var Ix=t=>{throw TypeError(t)};var Ih=(t,e,n)=>e.has(t)||Ix("Cannot "+n);var E=(t,e,n)=>(Ih(t,e,"read from private field"),n?n.call(t):e.get(t)),ee=(t,e,n)=>e.has(t)?Ix("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,r)=>(Ih(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ie=(t,e,n)=>(Ih(t,e,"access private method"),n);var Vc=(t,e,n,r)=>({set _(o){U(t,e,o,n)},get _(){return E(t,e,r)}});function ij(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rb={exports:{}},jf={},Db={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bc=Symbol.for("react.element"),aj=Symbol.for("react.portal"),lj=Symbol.for("react.fragment"),cj=Symbol.for("react.strict_mode"),uj=Symbol.for("react.profiler"),dj=Symbol.for("react.provider"),fj=Symbol.for("react.context"),hj=Symbol.for("react.forward_ref"),pj=Symbol.for("react.suspense"),mj=Symbol.for("react.memo"),gj=Symbol.for("react.lazy"),Lx=Symbol.iterator;function yj(t){return t===null||typeof t!="object"?null:(t=Lx&&t[Lx]||t["@@iterator"],typeof t=="function"?t:null)}var Ib={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lb=Object.assign,_b={};function ba(t,e,n){this.props=t,this.context=e,this.refs=_b,this.updater=n||Ib}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fb(){}Fb.prototype=ba.prototype;function ny(t,e,n){this.props=t,this.context=e,this.refs=_b,this.updater=n||Ib}var ry=ny.prototype=new Fb;ry.constructor=ny;Lb(ry,ba.prototype);ry.isPureReactComponent=!0;var _x=Array.isArray,zb=Object.prototype.hasOwnProperty,oy={current:null},$b={key:!0,ref:!0,__self:!0,__source:!0};function Bb(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)zb.call(e,r)&&!$b.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:bc,type:t,key:s,ref:i,props:o,_owner:oy.current}}function vj(t,e){return{$$typeof:bc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sy(t){return typeof t=="object"&&t!==null&&t.$$typeof===bc}function xj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fx=/\/+/g;function Lh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xj(""+t.key):e.toString(36)}function Pu(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case bc:case aj:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Lh(i,0):r,_x(o)?(n="",t!=null&&(n=t.replace(Fx,"$&/")+"/"),Pu(o,e,n,"",function(c){return c})):o!=null&&(sy(o)&&(o=vj(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Fx,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",_x(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Lh(s,a);i+=Pu(s,e,n,l,o)}else if(l=yj(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Lh(s,a++),i+=Pu(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Wc(t,e,n){if(t==null)return t;var r=[],o=0;return Pu(t,r,"","",function(s){return e.call(n,s,o++)}),r}function wj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Au={transition:null},bj={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Au,ReactCurrentOwner:oy};function Hb(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!sy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=ba;ce.Fragment=lj;ce.Profiler=uj;ce.PureComponent=ny;ce.StrictMode=cj;ce.Suspense=pj;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bj;ce.act=Hb;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Lb({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=oy.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zb.call(e,l)&&!$b.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:bc,type:t.type,key:o,ref:s,props:r,_owner:i}};ce.createContext=function(t){return t={$$typeof:fj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dj,_context:t},t.Consumer=t};ce.createElement=Bb;ce.createFactory=function(t){var e=Bb.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:hj,render:t}};ce.isValidElement=sy;ce.lazy=function(t){return{$$typeof:gj,_payload:{_status:-1,_result:t},_init:wj}};ce.memo=function(t,e){return{$$typeof:mj,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Au.transition;Au.transition={};try{t()}finally{Au.transition=e}};ce.unstable_act=Hb;ce.useCallback=function(t,e){return Ft.current.useCallback(t,e)};ce.useContext=function(t){return Ft.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Ft.current.useEffect(t,e)};ce.useId=function(){return Ft.current.useId()};ce.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ft.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};ce.useRef=function(t){return Ft.current.useRef(t)};ce.useState=function(t){return Ft.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ft.current.useTransition()};ce.version="18.3.1";Db.exports=ce;var y=Db.exports;const fe=Of(y),Vb=ij({__proto__:null,default:fe},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sj=y,kj=Symbol.for("react.element"),Cj=Symbol.for("react.fragment"),Ej=Object.prototype.hasOwnProperty,Nj=Sj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tj={key:!0,ref:!0,__self:!0,__source:!0};function Wb(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Ej.call(e,r)&&!Tj.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:kj,type:t,key:s,ref:i,props:o,_owner:Nj.current}}jf.Fragment=Cj;jf.jsx=Wb;jf.jsxs=Wb;Rb.exports=jf;var u=Rb.exports,Ub={exports:{}},hn={},Kb={exports:{}},qb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,O){var F=M.length;M.push(O);e:for(;0<F;){var G=F-1>>>1,re=M[G];if(0<o(re,O))M[G]=O,M[F]=re,F=G;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var O=M[0],F=M.pop();if(F!==O){M[0]=F;e:for(var G=0,re=M.length,Be=re>>>1;G<Be;){var se=2*(G+1)-1,xt=M[se],De=se+1,Q=M[De];if(0>o(xt,F))De<re&&0>o(Q,xt)?(M[G]=Q,M[De]=F,G=De):(M[G]=xt,M[se]=F,G=se);else if(De<re&&0>o(Q,F))M[G]=Q,M[De]=F,G=De;else break e}}return O}function o(M,O){var F=M.sortIndex-O.sortIndex;return F!==0?F:M.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=M)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function S(M){if(m=!1,b(M),!g)if(n(l)!==null)g=!0,B(k);else{var O=n(c);O!==null&&$(S,O.startTime-M)}}function k(M,O){g=!1,m&&(m=!1,x(N),N=-1),p=!0;var F=h;try{for(b(O),f=n(l);f!==null&&(!(f.expirationTime>O)||M&&!R());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var re=G(f.expirationTime<=O);O=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(l)&&r(l),b(O)}else r(l);f=n(l)}if(f!==null)var Be=!0;else{var se=n(c);se!==null&&$(S,se.startTime-O),Be=!1}return Be}finally{f=null,h=F,p=!1}}var T=!1,C=null,N=-1,A=5,P=-1;function R(){return!(t.unstable_now()-P<A)}function j(){if(C!==null){var M=t.unstable_now();P=M;var O=!0;try{O=C(!0,M)}finally{O?V():(T=!1,C=null)}}else T=!1}var V;if(typeof w=="function")V=function(){w(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,K=D.port2;D.port1.onmessage=j,V=function(){K.postMessage(null)}}else V=function(){v(j,0)};function B(M){C=M,T||(T=!0,V())}function $(M,O){N=v(function(){M(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,B(k))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var F=h;h=O;try{return M()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,O){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=h;h=M;try{return O()}finally{h=F}},t.unstable_scheduleCallback=function(M,O,F){var G=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,M){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=F+re,M={id:d++,callback:O,priorityLevel:M,startTime:F,expirationTime:re,sortIndex:-1},F>G?(M.sortIndex=F,e(c,M),n(l)===null&&M===n(c)&&(m?(x(N),N=-1):m=!0,$(S,F-G))):(M.sortIndex=re,e(l,M),g||p||(g=!0,B(k))),M},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(M){var O=h;return function(){var F=h;h=O;try{return M.apply(this,arguments)}finally{h=F}}}})(qb);Kb.exports=qb;var Mj=Kb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pj=y,fn=Mj;function _(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gb=new Set,jl={};function Js(t,e){oa(t,e),oa(t+"Capture",e)}function oa(t,e){for(jl[t]=e,t=0;t<e.length;t++)Gb.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,Aj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zx={},$x={};function Oj(t){return rm.call($x,t)?!0:rm.call(zx,t)?!1:Aj.test(t)?$x[t]=!0:(zx[t]=!0,!1)}function jj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Rj(t,e,n,r){if(e===null||typeof e>"u"||jj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var iy=/[\-:]([a-z])/g;function ay(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iy,ay);yt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iy,ay);yt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iy,ay);yt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ly(t,e,n,r){var o=yt.hasOwnProperty(e)?yt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rj(e,n,o,r)&&(n=null),r||o===null?Oj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=Pj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uc=Symbol.for("react.element"),gi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),cy=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),Qb=Symbol.for("react.provider"),Yb=Symbol.for("react.context"),uy=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),dy=Symbol.for("react.memo"),ro=Symbol.for("react.lazy"),Jb=Symbol.for("react.offscreen"),Bx=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=Bx&&t[Bx]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,_h;function Xa(t){if(_h===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var Fh=!1;function zh(t,e){if(!t||Fh)return"";Fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{Fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xa(t):""}function Dj(t){switch(t.tag){case 5:return Xa(t.type);case 16:return Xa("Lazy");case 13:return Xa("Suspense");case 19:return Xa("SuspenseList");case 0:case 2:case 15:return t=zh(t.type,!1),t;case 11:return t=zh(t.type.render,!1),t;case 1:return t=zh(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yi:return"Fragment";case gi:return"Portal";case om:return"Profiler";case cy:return"StrictMode";case sm:return"Suspense";case im:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yb:return(t.displayName||"Context")+".Consumer";case Qb:return(t._context.displayName||"Context")+".Provider";case uy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dy:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case ro:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function Ij(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===cy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $o(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lj(t){var e=Xb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){t._valueTracker||(t._valueTracker=Lj(t))}function Zb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Xb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$o(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eS(t,e){e=e.checked,e!=null&&ly(t,"checked",e,!1)}function cm(t,e){eS(t,e);var n=$o(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?um(t,e.type,n):e.hasOwnProperty("defaultValue")&&um(t,e.type,$o(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function um(t,e,n){(e!=="number"||od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Za=Array.isArray;function Pi(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$o(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function dm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_(92));if(Za(n)){if(1<n.length)throw Error(_(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$o(n)}}function tS(t,e){var n=$o(e.value),r=$o(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ux(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qc,rS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qc=qc||document.createElement("div"),qc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_j=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(t){_j.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ul[e]=ul[t]})});function oS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ul.hasOwnProperty(t)&&ul[t]?(""+e).trim():e+"px"}function sS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=oS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Fj=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hm(t,e){if(e){if(Fj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function fy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,Ai=null,Oi=null;function Kx(t){if(t=Cc(t)){if(typeof gm!="function")throw Error(_(280));var e=t.stateNode;e&&(e=_f(e),gm(t.stateNode,t.type,e))}}function iS(t){Ai?Oi?Oi.push(t):Oi=[t]:Ai=t}function aS(){if(Ai){var t=Ai,e=Oi;if(Oi=Ai=null,Kx(t),e)for(t=0;t<e.length;t++)Kx(e[t])}}function lS(t,e){return t(e)}function cS(){}var $h=!1;function uS(t,e,n){if($h)return t(e,n);$h=!0;try{return lS(t,e,n)}finally{$h=!1,(Ai!==null||Oi!==null)&&(cS(),aS())}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_(231,e,typeof n));return n}var ym=!1;if(Lr)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){ym=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{ym=!1}function zj(t,e,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var dl=!1,sd=null,id=!1,vm=null,$j={onError:function(t){dl=!0,sd=t}};function Bj(t,e,n,r,o,s,i,a,l){dl=!1,sd=null,zj.apply($j,arguments)}function Hj(t,e,n,r,o,s,i,a,l){if(Bj.apply(this,arguments),dl){if(dl){var c=sd;dl=!1,sd=null}else throw Error(_(198));id||(id=!0,vm=c)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qx(t){if(Xs(t)!==t)throw Error(_(188))}function Vj(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error(_(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return qx(o),t;if(s===r)return qx(o),e;s=s.sibling}throw Error(_(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?t:e}function fS(t){return t=Vj(t),t!==null?hS(t):null}function hS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hS(t);if(e!==null)return e;t=t.sibling}return null}var pS=fn.unstable_scheduleCallback,Gx=fn.unstable_cancelCallback,Wj=fn.unstable_shouldYield,Uj=fn.unstable_requestPaint,Qe=fn.unstable_now,Kj=fn.unstable_getCurrentPriorityLevel,hy=fn.unstable_ImmediatePriority,mS=fn.unstable_UserBlockingPriority,ad=fn.unstable_NormalPriority,qj=fn.unstable_LowPriority,gS=fn.unstable_IdlePriority,Rf=null,dr=null;function Gj(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Rf,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:Jj,Qj=Math.log,Yj=Math.LN2;function Jj(t){return t>>>=0,t===0?32:31-(Qj(t)/Yj|0)|0}var Gc=64,Qc=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ld(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=el(a):(s&=i,s!==0&&(r=el(s)))}else i=n&~o,i!==0?r=el(i):s!==0&&(r=el(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),o=1<<n,r|=t[n],e&=~o;return r}function Xj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-qn(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=Xj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yS(){var t=Gc;return Gc<<=1,!(Gc&4194240)&&(Gc=64),t}function Bh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function eR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-qn(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var xe=0;function vS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xS,my,wS,bS,SS,wm=!1,Yc=[],To=null,Mo=null,Po=null,Il=new Map,Ll=new Map,lo=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qx(t,e){switch(t){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Fa(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Cc(e),e!==null&&my(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function nR(t,e,n,r,o){switch(e){case"focusin":return To=Fa(To,t,e,n,r,o),!0;case"dragenter":return Mo=Fa(Mo,t,e,n,r,o),!0;case"mouseover":return Po=Fa(Po,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Il.set(s,Fa(Il.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Ll.set(s,Fa(Ll.get(s)||null,t,e,n,r,o)),!0}return!1}function kS(t){var e=ps(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=dS(n),e!==null){t.blockedOn=e,SS(t.priority,function(){wS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=Cc(n),e!==null&&my(e),t.blockedOn=n,!1;e.shift()}return!0}function Yx(t,e,n){Ou(t)&&n.delete(e)}function rR(){wm=!1,To!==null&&Ou(To)&&(To=null),Mo!==null&&Ou(Mo)&&(Mo=null),Po!==null&&Ou(Po)&&(Po=null),Il.forEach(Yx),Ll.forEach(Yx)}function za(t,e){t.blockedOn===e&&(t.blockedOn=null,wm||(wm=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,rR)))}function _l(t){function e(o){return za(o,t)}if(0<Yc.length){za(Yc[0],t);for(var n=1;n<Yc.length;n++){var r=Yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(To!==null&&za(To,t),Mo!==null&&za(Mo,t),Po!==null&&za(Po,t),Il.forEach(e),Ll.forEach(e),n=0;n<lo.length;n++)r=lo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lo.length&&(n=lo[0],n.blockedOn===null);)kS(n),n.blockedOn===null&&lo.shift()}var ji=Vr.ReactCurrentBatchConfig,cd=!0;function oR(t,e,n,r){var o=xe,s=ji.transition;ji.transition=null;try{xe=1,gy(t,e,n,r)}finally{xe=o,ji.transition=s}}function sR(t,e,n,r){var o=xe,s=ji.transition;ji.transition=null;try{xe=4,gy(t,e,n,r)}finally{xe=o,ji.transition=s}}function gy(t,e,n,r){if(cd){var o=bm(t,e,n,r);if(o===null)Jh(t,e,r,ud,n),Qx(t,r);else if(nR(o,t,e,n,r))r.stopPropagation();else if(Qx(t,r),e&4&&-1<tR.indexOf(t)){for(;o!==null;){var s=Cc(o);if(s!==null&&xS(s),s=bm(t,e,n,r),s===null&&Jh(t,e,r,ud,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Jh(t,e,r,null,n)}}var ud=null;function bm(t,e,n,r){if(ud=null,t=fy(r),t=ps(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ud=t,null}function CS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kj()){case hy:return 1;case mS:return 4;case ad:case qj:return 16;case gS:return 536870912;default:return 16}default:return 16}}var So=null,yy=null,ju=null;function ES(){if(ju)return ju;var t,e=yy,n=e.length,r,o="value"in So?So.value:So.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return ju=o.slice(t,1<r?1-r:void 0)}function Ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jc(){return!0}function Jx(){return!1}function pn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jc:Jx,this.isPropagationStopped=Jx,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jc)},persist:function(){},isPersistent:Jc}),e}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vy=pn(Sa),kc=$e({},Sa,{view:0,detail:0}),iR=pn(kc),Hh,Vh,$a,Df=$e({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(Hh=t.screenX-$a.screenX,Vh=t.screenY-$a.screenY):Vh=Hh=0,$a=t),Hh)},movementY:function(t){return"movementY"in t?t.movementY:Vh}}),Xx=pn(Df),aR=$e({},Df,{dataTransfer:0}),lR=pn(aR),cR=$e({},kc,{relatedTarget:0}),Wh=pn(cR),uR=$e({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),dR=pn(uR),fR=$e({},Sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hR=pn(fR),pR=$e({},Sa,{data:0}),Zx=pn(pR),mR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yR[t])?!!e[t]:!1}function xy(){return vR}var xR=$e({},kc,{key:function(t){if(t.key){var e=mR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(t){return t.type==="keypress"?Ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wR=pn(xR),bR=$e({},Df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=pn(bR),SR=$e({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),kR=pn(SR),CR=$e({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ER=pn(CR),NR=$e({},Df,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TR=pn(NR),MR=[9,13,27,32],wy=Lr&&"CompositionEvent"in window,fl=null;Lr&&"documentMode"in document&&(fl=document.documentMode);var PR=Lr&&"TextEvent"in window&&!fl,NS=Lr&&(!wy||fl&&8<fl&&11>=fl),t0=" ",n0=!1;function TS(t,e){switch(t){case"keyup":return MR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vi=!1;function AR(t,e){switch(t){case"compositionend":return MS(e);case"keypress":return e.which!==32?null:(n0=!0,t0);case"textInput":return t=e.data,t===t0&&n0?null:t;default:return null}}function OR(t,e){if(vi)return t==="compositionend"||!wy&&TS(t,e)?(t=ES(),ju=yy=So=null,vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NS&&e.locale!=="ko"?null:e.data;default:return null}}var jR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jR[t.type]:e==="textarea"}function PS(t,e,n,r){iS(r),e=dd(e,"onChange"),0<e.length&&(n=new vy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hl=null,Fl=null;function RR(t){$S(t,0)}function If(t){var e=bi(t);if(Zb(e))return t}function DR(t,e){if(t==="change")return e}var AS=!1;if(Lr){var Uh;if(Lr){var Kh="oninput"in document;if(!Kh){var o0=document.createElement("div");o0.setAttribute("oninput","return;"),Kh=typeof o0.oninput=="function"}Uh=Kh}else Uh=!1;AS=Uh&&(!document.documentMode||9<document.documentMode)}function s0(){hl&&(hl.detachEvent("onpropertychange",OS),Fl=hl=null)}function OS(t){if(t.propertyName==="value"&&If(Fl)){var e=[];PS(e,Fl,t,fy(t)),uS(RR,e)}}function IR(t,e,n){t==="focusin"?(s0(),hl=e,Fl=n,hl.attachEvent("onpropertychange",OS)):t==="focusout"&&s0()}function LR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return If(Fl)}function _R(t,e){if(t==="click")return If(e)}function FR(t,e){if(t==="input"||t==="change")return If(e)}function zR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:zR;function zl(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!rm.call(e,o)||!Yn(t[o],e[o]))return!1}return!0}function i0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function a0(t,e){var n=i0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i0(n)}}function jS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RS(){for(var t=window,e=od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=od(t.document)}return e}function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $R(t){var e=RS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jS(n.ownerDocument.documentElement,n)){if(r!==null&&by(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=a0(n,s);var i=a0(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BR=Lr&&"documentMode"in document&&11>=document.documentMode,xi=null,Sm=null,pl=null,km=!1;function l0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;km||xi==null||xi!==od(r)||(r=xi,"selectionStart"in r&&by(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pl&&zl(pl,r)||(pl=r,r=dd(Sm,"onSelect"),0<r.length&&(e=new vy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xi)))}function Xc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:Xc("Animation","AnimationEnd"),animationiteration:Xc("Animation","AnimationIteration"),animationstart:Xc("Animation","AnimationStart"),transitionend:Xc("Transition","TransitionEnd")},qh={},DS={};Lr&&(DS=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Lf(t){if(qh[t])return qh[t];if(!wi[t])return t;var e=wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DS)return qh[t]=e[n];return t}var IS=Lf("animationend"),LS=Lf("animationiteration"),_S=Lf("animationstart"),FS=Lf("transitionend"),zS=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zo(t,e){zS.set(t,e),Js(e,[t])}for(var Gh=0;Gh<c0.length;Gh++){var Qh=c0[Gh],HR=Qh.toLowerCase(),VR=Qh[0].toUpperCase()+Qh.slice(1);Zo(HR,"on"+VR)}Zo(IS,"onAnimationEnd");Zo(LS,"onAnimationIteration");Zo(_S,"onAnimationStart");Zo("dblclick","onDoubleClick");Zo("focusin","onFocus");Zo("focusout","onBlur");Zo(FS,"onTransitionEnd");oa("onMouseEnter",["mouseout","mouseover"]);oa("onMouseLeave",["mouseout","mouseover"]);oa("onPointerEnter",["pointerout","pointerover"]);oa("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WR=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function u0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hj(r,e,void 0,t),t.currentTarget=null}function $S(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;u0(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;u0(o,a,c),s=l}}}if(id)throw t=vm,id=!1,vm=null,t}function Oe(t,e){var n=e[Mm];n===void 0&&(n=e[Mm]=new Set);var r=t+"__bubble";n.has(r)||(BS(e,t,2,!1),n.add(r))}function Yh(t,e,n){var r=0;e&&(r|=4),BS(n,t,r,e)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[Zc]){t[Zc]=!0,Gb.forEach(function(n){n!=="selectionchange"&&(WR.has(n)||Yh(n,!1,t),Yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zc]||(e[Zc]=!0,Yh("selectionchange",!1,e))}}function BS(t,e,n,r){switch(CS(e)){case 1:var o=oR;break;case 4:o=sR;break;default:o=gy}n=o.bind(null,e,n,t),o=void 0,!ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Jh(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=ps(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}uS(function(){var c=s,d=fy(n),f=[];e:{var h=zS.get(t);if(h!==void 0){var p=vy,g=t;switch(t){case"keypress":if(Ru(n)===0)break e;case"keydown":case"keyup":p=wR;break;case"focusin":g="focus",p=Wh;break;case"focusout":g="blur",p=Wh;break;case"beforeblur":case"afterblur":p=Wh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Xx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kR;break;case IS:case LS:case _S:p=dR;break;case FS:p=ER;break;case"scroll":p=iR;break;case"wheel":p=TR;break;case"copy":case"cut":case"paste":p=hR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=e0}var m=(e&4)!==0,v=!m&&t==="scroll",x=m?h!==null?h+"Capture":null:h;m=[];for(var w=c,b;w!==null;){b=w;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=Dl(w,x),S!=null&&m.push(Bl(w,S,b)))),v)break;w=w.return}0<m.length&&(h=new p(h,g,null,n,d),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==mm&&(g=n.relatedTarget||n.fromElement)&&(ps(g)||g[_r]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?ps(g):null,g!==null&&(v=Xs(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=Xx,S="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=e0,S="onPointerLeave",x="onPointerEnter",w="pointer"),v=p==null?h:bi(p),b=g==null?h:bi(g),h=new m(S,w+"leave",p,n,d),h.target=v,h.relatedTarget=b,S=null,ps(d)===c&&(m=new m(x,w+"enter",g,n,d),m.target=b,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,x=g,w=0,b=m;b;b=si(b))w++;for(b=0,S=x;S;S=si(S))b++;for(;0<w-b;)m=si(m),w--;for(;0<b-w;)x=si(x),b--;for(;w--;){if(m===x||x!==null&&m===x.alternate)break t;m=si(m),x=si(x)}m=null}else m=null;p!==null&&d0(f,h,p,m,!1),g!==null&&v!==null&&d0(f,v,g,m,!0)}}e:{if(h=c?bi(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=DR;else if(r0(h))if(AS)k=FR;else{k=LR;var T=IR}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=_R);if(k&&(k=k(t,c))){PS(f,k,n,d);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&um(h,"number",h.value)}switch(T=c?bi(c):window,t){case"focusin":(r0(T)||T.contentEditable==="true")&&(xi=T,Sm=c,pl=null);break;case"focusout":pl=Sm=xi=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,l0(f,n,d);break;case"selectionchange":if(BR)break;case"keydown":case"keyup":l0(f,n,d)}var C;if(wy)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else vi?TS(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(NS&&n.locale!=="ko"&&(vi||N!=="onCompositionStart"?N==="onCompositionEnd"&&vi&&(C=ES()):(So=d,yy="value"in So?So.value:So.textContent,vi=!0)),T=dd(c,N),0<T.length&&(N=new Zx(N,t,null,n,d),f.push({event:N,listeners:T}),C?N.data=C:(C=MS(n),C!==null&&(N.data=C)))),(C=PR?AR(t,n):OR(t,n))&&(c=dd(c,"onBeforeInput"),0<c.length&&(d=new Zx("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=C))}$S(f,e)})}function Bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Dl(t,n),s!=null&&r.unshift(Bl(t,s,o)),s=Dl(t,e),s!=null&&r.push(Bl(t,s,o))),t=t.return}return r}function si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d0(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=Dl(n,s),l!=null&&i.unshift(Bl(n,l,a))):o||(l=Dl(n,s),l!=null&&i.push(Bl(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var UR=/\r\n?/g,KR=/\u0000|\uFFFD/g;function f0(t){return(typeof t=="string"?t:""+t).replace(UR,`
`).replace(KR,"")}function eu(t,e,n){if(e=f0(e),f0(t)!==e&&n)throw Error(_(425))}function fd(){}var Cm=null,Em=null;function Nm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,qR=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,GR=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(QR)}:Tm;function QR(t){setTimeout(function(){throw t})}function Xh(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),_l(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);_l(e)}function Ao(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ka=Math.random().toString(36).slice(2),cr="__reactFiber$"+ka,Hl="__reactProps$"+ka,_r="__reactContainer$"+ka,Mm="__reactEvents$"+ka,YR="__reactListeners$"+ka,JR="__reactHandles$"+ka;function ps(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_r]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=p0(t);t!==null;){if(n=t[cr])return n;t=p0(t)}return e}t=n,n=t.parentNode}return null}function Cc(t){return t=t[cr]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_(33))}function _f(t){return t[Hl]||null}var Pm=[],Si=-1;function es(t){return{current:t}}function Re(t){0>Si||(t.current=Pm[Si],Pm[Si]=null,Si--)}function Pe(t,e){Si++,Pm[Si]=t.current,t.current=e}var Bo={},Nt=es(Bo),Gt=es(!1),Ls=Bo;function sa(t,e){var n=t.type.contextTypes;if(!n)return Bo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Qt(t){return t=t.childContextTypes,t!=null}function hd(){Re(Gt),Re(Nt)}function m0(t,e,n){if(Nt.current!==Bo)throw Error(_(168));Pe(Nt,e),Pe(Gt,n)}function HS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(_(108,Ij(t)||"Unknown",o));return $e({},n,r)}function pd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bo,Ls=Nt.current,Pe(Nt,t),Pe(Gt,Gt.current),!0}function g0(t,e,n){var r=t.stateNode;if(!r)throw Error(_(169));n?(t=HS(t,e,Ls),r.__reactInternalMemoizedMergedChildContext=t,Re(Gt),Re(Nt),Pe(Nt,t)):Re(Gt),Pe(Gt,n)}var Tr=null,Ff=!1,Zh=!1;function VS(t){Tr===null?Tr=[t]:Tr.push(t)}function XR(t){Ff=!0,VS(t)}function ts(){if(!Zh&&Tr!==null){Zh=!0;var t=0,e=xe;try{var n=Tr;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,Ff=!1}catch(o){throw Tr!==null&&(Tr=Tr.slice(t+1)),pS(hy,ts),o}finally{xe=e,Zh=!1}}return null}var ki=[],Ci=0,md=null,gd=0,kn=[],Cn=0,_s=null,Pr=1,Ar="";function us(t,e){ki[Ci++]=gd,ki[Ci++]=md,md=t,gd=e}function WS(t,e,n){kn[Cn++]=Pr,kn[Cn++]=Ar,kn[Cn++]=_s,_s=t;var r=Pr;t=Ar;var o=32-qn(r)-1;r&=~(1<<o),n+=1;var s=32-qn(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Pr=1<<32-qn(e)+o|n<<o|r,Ar=s+t}else Pr=1<<s|n<<o|r,Ar=t}function Sy(t){t.return!==null&&(us(t,1),WS(t,1,0))}function ky(t){for(;t===md;)md=ki[--Ci],ki[Ci]=null,gd=ki[--Ci],ki[Ci]=null;for(;t===_s;)_s=kn[--Cn],kn[Cn]=null,Ar=kn[--Cn],kn[Cn]=null,Pr=kn[--Cn],kn[Cn]=null}var un=null,an=null,Ie=!1,Vn=null;function US(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function y0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=Ao(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_s!==null?{id:Pr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function Am(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(Ie){var e=an;if(e){var n=e;if(!y0(t,e)){if(Am(t))throw Error(_(418));e=Ao(n.nextSibling);var r=un;e&&y0(t,e)?US(r,n):(t.flags=t.flags&-4097|2,Ie=!1,un=t)}}else{if(Am(t))throw Error(_(418));t.flags=t.flags&-4097|2,Ie=!1,un=t}}}function v0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function tu(t){if(t!==un)return!1;if(!Ie)return v0(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nm(t.type,t.memoizedProps)),e&&(e=an)){if(Am(t))throw KS(),Error(_(418));for(;e;)US(t,e),e=Ao(e.nextSibling)}if(v0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=Ao(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?Ao(t.stateNode.nextSibling):null;return!0}function KS(){for(var t=an;t;)t=Ao(t.nextSibling)}function ia(){an=un=null,Ie=!1}function Cy(t){Vn===null?Vn=[t]:Vn.push(t)}var ZR=Vr.ReactCurrentBatchConfig;function Ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,t))}return t}function nu(t,e){throw t=Object.prototype.toString.call(e),Error(_(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x0(t){var e=t._init;return e(t._payload)}function qS(t){function e(x,w){if(t){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function o(x,w){return x=Do(x,w),x.index=0,x.sibling=null,x}function s(x,w,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,b,S){return w===null||w.tag!==6?(w=ip(b,x.mode,S),w.return=x,w):(w=o(w,b),w.return=x,w)}function l(x,w,b,S){var k=b.type;return k===yi?d(x,w,b.props.children,S,b.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ro&&x0(k)===w.type)?(S=o(w,b.props),S.ref=Ba(x,w,b),S.return=x,S):(S=$u(b.type,b.key,b.props,null,x.mode,S),S.ref=Ba(x,w,b),S.return=x,S)}function c(x,w,b,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=ap(b,x.mode,S),w.return=x,w):(w=o(w,b.children||[]),w.return=x,w)}function d(x,w,b,S,k){return w===null||w.tag!==7?(w=As(b,x.mode,S,k),w.return=x,w):(w=o(w,b),w.return=x,w)}function f(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ip(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Uc:return b=$u(w.type,w.key,w.props,null,x.mode,b),b.ref=Ba(x,null,w),b.return=x,b;case gi:return w=ap(w,x.mode,b),w.return=x,w;case ro:var S=w._init;return f(x,S(w._payload),b)}if(Za(w)||La(w))return w=As(w,x.mode,b,null),w.return=x,w;nu(x,w)}return null}function h(x,w,b,S){var k=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(x,w,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Uc:return b.key===k?l(x,w,b,S):null;case gi:return b.key===k?c(x,w,b,S):null;case ro:return k=b._init,h(x,w,k(b._payload),S)}if(Za(b)||La(b))return k!==null?null:d(x,w,b,S,null);nu(x,b)}return null}function p(x,w,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,a(w,x,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Uc:return x=x.get(S.key===null?b:S.key)||null,l(w,x,S,k);case gi:return x=x.get(S.key===null?b:S.key)||null,c(w,x,S,k);case ro:var T=S._init;return p(x,w,b,T(S._payload),k)}if(Za(S)||La(S))return x=x.get(b)||null,d(w,x,S,k,null);nu(w,S)}return null}function g(x,w,b,S){for(var k=null,T=null,C=w,N=w=0,A=null;C!==null&&N<b.length;N++){C.index>N?(A=C,C=null):A=C.sibling;var P=h(x,C,b[N],S);if(P===null){C===null&&(C=A);break}t&&C&&P.alternate===null&&e(x,C),w=s(P,w,N),T===null?k=P:T.sibling=P,T=P,C=A}if(N===b.length)return n(x,C),Ie&&us(x,N),k;if(C===null){for(;N<b.length;N++)C=f(x,b[N],S),C!==null&&(w=s(C,w,N),T===null?k=C:T.sibling=C,T=C);return Ie&&us(x,N),k}for(C=r(x,C);N<b.length;N++)A=p(C,x,N,b[N],S),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?N:A.key),w=s(A,w,N),T===null?k=A:T.sibling=A,T=A);return t&&C.forEach(function(R){return e(x,R)}),Ie&&us(x,N),k}function m(x,w,b,S){var k=La(b);if(typeof k!="function")throw Error(_(150));if(b=k.call(b),b==null)throw Error(_(151));for(var T=k=null,C=w,N=w=0,A=null,P=b.next();C!==null&&!P.done;N++,P=b.next()){C.index>N?(A=C,C=null):A=C.sibling;var R=h(x,C,P.value,S);if(R===null){C===null&&(C=A);break}t&&C&&R.alternate===null&&e(x,C),w=s(R,w,N),T===null?k=R:T.sibling=R,T=R,C=A}if(P.done)return n(x,C),Ie&&us(x,N),k;if(C===null){for(;!P.done;N++,P=b.next())P=f(x,P.value,S),P!==null&&(w=s(P,w,N),T===null?k=P:T.sibling=P,T=P);return Ie&&us(x,N),k}for(C=r(x,C);!P.done;N++,P=b.next())P=p(C,x,N,P.value,S),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?N:P.key),w=s(P,w,N),T===null?k=P:T.sibling=P,T=P);return t&&C.forEach(function(j){return e(x,j)}),Ie&&us(x,N),k}function v(x,w,b,S){if(typeof b=="object"&&b!==null&&b.type===yi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Uc:e:{for(var k=b.key,T=w;T!==null;){if(T.key===k){if(k=b.type,k===yi){if(T.tag===7){n(x,T.sibling),w=o(T,b.props.children),w.return=x,x=w;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ro&&x0(k)===T.type){n(x,T.sibling),w=o(T,b.props),w.ref=Ba(x,T,b),w.return=x,x=w;break e}n(x,T);break}else e(x,T);T=T.sibling}b.type===yi?(w=As(b.props.children,x.mode,S,b.key),w.return=x,x=w):(S=$u(b.type,b.key,b.props,null,x.mode,S),S.ref=Ba(x,w,b),S.return=x,x=S)}return i(x);case gi:e:{for(T=b.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(x,w.sibling),w=o(w,b.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=ap(b,x.mode,S),w.return=x,x=w}return i(x);case ro:return T=b._init,v(x,w,T(b._payload),S)}if(Za(b))return g(x,w,b,S);if(La(b))return m(x,w,b,S);nu(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(x,w.sibling),w=o(w,b),w.return=x,x=w):(n(x,w),w=ip(b,x.mode,S),w.return=x,x=w),i(x)):n(x,w)}return v}var aa=qS(!0),GS=qS(!1),yd=es(null),vd=null,Ei=null,Ey=null;function Ny(){Ey=Ei=vd=null}function Ty(t){var e=yd.current;Re(yd),t._currentValue=e}function jm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){vd=t,Ey=Ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Ey!==t)if(t={context:t,memoizedValue:e,next:null},Ei===null){if(vd===null)throw Error(_(308));Ei=t,vd.dependencies={lanes:0,firstContext:t}}else Ei=Ei.next=t;return e}var ms=null;function My(t){ms===null?ms=[t]:ms.push(t)}function QS(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,My(e)):(n.next=o.next,o.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oo=!1;function Py(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Fr(t,n)}return o=r.interleaved,o===null?(e.next=e,My(r)):(e.next=o.next,o.next=e),r.interleaved=e,Fr(t,n)}function Du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}function w0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xd(t,e,n,r){var o=t.updateQueue;oo=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=o.baseState;i=0,d=c=l=null,a=s;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=$e({},f,h);break e;case 2:oo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=f):d=d.next=p,i|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);zs|=i,t.lanes=i,t.memoizedState=f}}function b0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(_(191,o));o.call(r)}}}var Ec={},fr=es(Ec),Vl=es(Ec),Wl=es(Ec);function gs(t){if(t===Ec)throw Error(_(174));return t}function Ay(t,e){switch(Pe(Wl,e),Pe(Vl,t),Pe(fr,Ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fm(e,t)}Re(fr),Pe(fr,e)}function la(){Re(fr),Re(Vl),Re(Wl)}function JS(t){gs(Wl.current);var e=gs(fr.current),n=fm(e,t.type);e!==n&&(Pe(Vl,t),Pe(fr,n))}function Oy(t){Vl.current===t&&(Re(fr),Re(Vl))}var Le=es(0);function wd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ep=[];function jy(){for(var t=0;t<ep.length;t++)ep[t]._workInProgressVersionPrimary=null;ep.length=0}var Iu=Vr.ReactCurrentDispatcher,tp=Vr.ReactCurrentBatchConfig,Fs=0,ze=null,et=null,ot=null,bd=!1,ml=!1,Ul=0,e2=0;function wt(){throw Error(_(321))}function Ry(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Dy(t,e,n,r,o,s){if(Fs=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?o2:s2,t=n(r,o),ml){s=0;do{if(ml=!1,Ul=0,25<=s)throw Error(_(301));s+=1,ot=et=null,e.updateQueue=null,Iu.current=i2,t=n(r,o)}while(ml)}if(Iu.current=Sd,e=et!==null&&et.next!==null,Fs=0,ot=et=ze=null,bd=!1,e)throw Error(_(300));return t}function Iy(){var t=Ul!==0;return Ul=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ze.memoizedState=ot=t:ot=ot.next=t,ot}function In(){if(et===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=ot===null?ze.memoizedState:ot.next;if(e!==null)ot=e,et=t;else{if(t===null)throw Error(_(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},ot===null?ze.memoizedState=ot=t:ot=ot.next=t}return ot}function Kl(t,e){return typeof e=="function"?e(t):e}function np(t){var e=In(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=et,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var d=c.lane;if((Fs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,ze.lanes|=d,zs|=d}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Yn(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,ze.lanes|=s,zs|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rp(t){var e=In(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Yn(s,e.memoizedState)||(qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function XS(){}function ZS(t,e){var n=ze,r=In(),o=e(),s=!Yn(r.memoizedState,o);if(s&&(r.memoizedState=o,qt=!0),r=r.queue,Ly(nk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,ql(9,tk.bind(null,n,r,o,e),void 0,null),at===null)throw Error(_(349));Fs&30||ek(n,e,o)}return o}function ek(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tk(t,e,n,r){e.value=n,e.getSnapshot=r,rk(e)&&ok(t)}function nk(t,e,n){return n(function(){rk(e)&&ok(t)})}function rk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function ok(t){var e=Fr(t,1);e!==null&&Gn(e,t,1,-1)}function S0(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:t},e.queue=t,t=t.dispatch=r2.bind(null,ze,t),[e.memoizedState,t]}function ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sk(){return In().memoizedState}function Lu(t,e,n,r){var o=nr();ze.flags|=t,o.memoizedState=ql(1|e,n,void 0,r===void 0?null:r)}function zf(t,e,n,r){var o=In();r=r===void 0?null:r;var s=void 0;if(et!==null){var i=et.memoizedState;if(s=i.destroy,r!==null&&Ry(r,i.deps)){o.memoizedState=ql(e,n,s,r);return}}ze.flags|=t,o.memoizedState=ql(1|e,n,s,r)}function k0(t,e){return Lu(8390656,8,t,e)}function Ly(t,e){return zf(2048,8,t,e)}function ik(t,e){return zf(4,2,t,e)}function ak(t,e){return zf(4,4,t,e)}function lk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ck(t,e,n){return n=n!=null?n.concat([t]):null,zf(4,4,lk.bind(null,e,t),n)}function _y(){}function uk(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ry(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dk(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ry(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fk(t,e,n){return Fs&21?(Yn(n,e)||(n=yS(),ze.lanes|=n,zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function t2(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=tp.transition;tp.transition={};try{t(!1),e()}finally{xe=n,tp.transition=r}}function hk(){return In().memoizedState}function n2(t,e,n){var r=Ro(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pk(t))mk(e,n);else if(n=QS(t,e,n,r),n!==null){var o=Dt();Gn(n,t,r,o),gk(n,e,r)}}function r2(t,e,n){var r=Ro(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pk(t))mk(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Yn(a,i)){var l=e.interleaved;l===null?(o.next=o,My(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=QS(t,e,o,r),n!==null&&(o=Dt(),Gn(n,t,r,o),gk(n,e,r))}}function pk(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function mk(t,e){ml=bd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}var Sd={readContext:Dn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},o2={readContext:Dn,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:k0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lu(4194308,4,lk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lu(4,2,t,e)},useMemo:function(t,e){var n=nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=n2.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:S0,useDebugValue:_y,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=S0(!1),e=t[0];return t=t2.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,o=nr();if(Ie){if(n===void 0)throw Error(_(407));n=n()}else{if(n=e(),at===null)throw Error(_(349));Fs&30||ek(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,k0(nk.bind(null,r,s,t),[t]),r.flags|=2048,ql(9,tk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nr(),e=at.identifierPrefix;if(Ie){var n=Ar,r=Pr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=e2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},s2={readContext:Dn,useCallback:uk,useContext:Dn,useEffect:Ly,useImperativeHandle:ck,useInsertionEffect:ik,useLayoutEffect:ak,useMemo:dk,useReducer:np,useRef:sk,useState:function(){return np(Kl)},useDebugValue:_y,useDeferredValue:function(t){var e=In();return fk(e,et.memoizedState,t)},useTransition:function(){var t=np(Kl)[0],e=In().memoizedState;return[t,e]},useMutableSource:XS,useSyncExternalStore:ZS,useId:hk,unstable_isNewReconciler:!1},i2={readContext:Dn,useCallback:uk,useContext:Dn,useEffect:Ly,useImperativeHandle:ck,useInsertionEffect:ik,useLayoutEffect:ak,useMemo:dk,useReducer:rp,useRef:sk,useState:function(){return rp(Kl)},useDebugValue:_y,useDeferredValue:function(t){var e=In();return et===null?e.memoizedState=t:fk(e,et.memoizedState,t)},useTransition:function(){var t=rp(Kl)[0],e=In().memoizedState;return[t,e]},useMutableSource:XS,useSyncExternalStore:ZS,useId:hk,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $f={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),o=Ro(t),s=jr(r,o);s.payload=e,n!=null&&(s.callback=n),e=Oo(t,s,o),e!==null&&(Gn(e,t,o,r),Du(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),o=Ro(t),s=jr(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oo(t,s,o),e!==null&&(Gn(e,t,o,r),Du(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=Ro(t),o=jr(n,r);o.tag=2,e!=null&&(o.callback=e),e=Oo(t,o,r),e!==null&&(Gn(e,t,r,n),Du(e,t,r))}};function C0(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!zl(n,r)||!zl(o,s):!0}function yk(t,e,n){var r=!1,o=Bo,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(o=Qt(e)?Ls:Nt.current,r=e.contextTypes,s=(r=r!=null)?sa(t,o):Bo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$f,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function E0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$f.enqueueReplaceState(e,e.state,null)}function Dm(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Py(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Dn(s):(s=Qt(e)?Ls:Nt.current,o.context=sa(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rm(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&$f.enqueueReplaceState(o,o.state,null),xd(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e){try{var n="",r=e;do n+=Dj(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Im(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var a2=typeof WeakMap=="function"?WeakMap:Map;function vk(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cd||(Cd=!0,Um=r),Im(t,e)},n}function xk(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Im(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Im(t,e),typeof r!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function N0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new a2;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=b2.bind(null,t,e,n),e.then(t,t))}function T0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M0(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,Oo(n,e,1))),n.lanes|=1),t)}var l2=Vr.ReactCurrentOwner,qt=!1;function Ot(t,e,n,r){e.child=t===null?GS(e,null,n,r):aa(e,t.child,n,r)}function P0(t,e,n,r,o){n=n.render;var s=e.ref;return Ri(e,o),r=Dy(t,e,n,r,s,o),n=Iy(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,zr(t,e,o)):(Ie&&n&&Sy(e),e.flags|=1,Ot(t,e,r,o),e.child)}function A0(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!Uy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wk(t,e,s,r,o)):(t=$u(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(i,r)&&t.ref===e.ref)return zr(t,e,o)}return e.flags|=1,t=Do(s,r),t.ref=e.ref,t.return=e,e.child=t}function wk(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(zl(s,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,zr(t,e,o)}return Lm(t,e,n,r,o)}function bk(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ti,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ti,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(Ti,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(Ti,rn),rn|=r;return Ot(t,e,o,n),e.child}function Sk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lm(t,e,n,r,o){var s=Qt(n)?Ls:Nt.current;return s=sa(e,s),Ri(e,o),n=Dy(t,e,n,r,s,o),r=Iy(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,zr(t,e,o)):(Ie&&r&&Sy(e),e.flags|=1,Ot(t,e,n,o),e.child)}function O0(t,e,n,r,o){if(Qt(n)){var s=!0;pd(e)}else s=!1;if(Ri(e,o),e.stateNode===null)_u(t,e),yk(e,n,r),Dm(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=Qt(n)?Ls:Nt.current,c=sa(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&E0(e,i,r,c),oo=!1;var h=e.memoizedState;i.state=h,xd(e,r,i,o),l=e.memoizedState,a!==r||h!==l||Gt.current||oo?(typeof d=="function"&&(Rm(e,n,d,r),l=e.memoizedState),(a=oo||C0(e,n,a,r,h,l,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,YS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:zn(e.type,a),i.props=c,f=e.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=Qt(n)?Ls:Nt.current,l=sa(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==l)&&E0(e,i,r,l),oo=!1,h=e.memoizedState,i.state=h,xd(e,r,i,o);var g=e.memoizedState;a!==f||h!==g||Gt.current||oo?(typeof p=="function"&&(Rm(e,n,p,r),g=e.memoizedState),(c=oo||C0(e,n,c,r,h,g,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),i.props=r,i.state=g,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return _m(t,e,n,r,s,o)}function _m(t,e,n,r,o,s){Sk(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&g0(e,n,!1),zr(t,e,s);r=e.stateNode,l2.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=aa(e,t.child,null,s),e.child=aa(e,null,a,s)):Ot(t,e,a,s),e.memoizedState=r.state,o&&g0(e,n,!0),e.child}function kk(t){var e=t.stateNode;e.pendingContext?m0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m0(t,e.context,!1),Ay(t,e.containerInfo)}function j0(t,e,n,r,o){return ia(),Cy(o),e.flags|=256,Ot(t,e,n,r),e.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function zm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ck(t,e,n){var r=e.pendingProps,o=Le.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Pe(Le,o&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Vf(i,r,0,null),t=As(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zm(n),e.memoizedState=Fm,t):Fy(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return c2(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Do(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Do(a,s):(s=As(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?zm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=Fm,r}return s=t.child,t=s.sibling,r=Do(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fy(t,e){return e=Vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ru(t,e,n,r){return r!==null&&Cy(r),aa(e,t.child,null,n),t=Fy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function c2(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=op(Error(_(422))),ru(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Vf({mode:"visible",children:r.children},o,0,null),s=As(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&aa(e,t.child,null,i),e.child.memoizedState=zm(i),e.memoizedState=Fm,s);if(!(e.mode&1))return ru(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(_(419)),r=op(s,r,void 0),ru(t,e,i,r)}if(a=(i&t.childLanes)!==0,qt||a){if(r=at,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Fr(t,o),Gn(r,t,o,-1))}return Wy(),r=op(Error(_(421))),ru(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=S2.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,an=Ao(o.nextSibling),un=e,Ie=!0,Vn=null,t!==null&&(kn[Cn++]=Pr,kn[Cn++]=Ar,kn[Cn++]=_s,Pr=t.id,Ar=t.overflow,_s=e),e=Fy(e,r.children),e.flags|=4096,e)}function R0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jm(t.return,e,n)}function sp(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Ek(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Ot(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0(t,n,e);else if(t.tag===19)R0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Le,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&wd(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),sp(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&wd(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}sp(e,!0,n,null,s);break;case"together":sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_(153));if(e.child!==null){for(t=e.child,n=Do(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Do(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function u2(t,e,n){switch(e.tag){case 3:kk(e),ia();break;case 5:JS(e);break;case 1:Qt(e.type)&&pd(e);break;case 4:Ay(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Pe(yd,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?Ck(t,e,n):(Pe(Le,Le.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Pe(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ek(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Pe(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,bk(t,e,n)}return zr(t,e,n)}var Nk,$m,Tk,Mk;Nk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};Tk=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,gs(fr.current);var s=null;switch(n){case"input":o=lm(t,o),r=lm(t,r),s=[];break;case"select":o=$e({},o,{value:void 0}),r=$e({},r,{value:void 0}),s=[];break;case"textarea":o=dm(t,o),r=dm(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fd)}hm(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(jl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(jl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Mk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ha(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function d2(t,e,n){var r=e.pendingProps;switch(ky(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Qt(e.type)&&hd(),bt(e),null;case 3:return r=e.stateNode,la(),Re(Gt),Re(Nt),jy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(Gm(Vn),Vn=null))),$m(t,e),bt(e),null;case 5:Oy(e);var o=gs(Wl.current);if(n=e.type,t!==null&&e.stateNode!=null)Tk(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_(166));return bt(e),null}if(t=gs(fr.current),tu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cr]=e,r[Hl]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(o=0;o<tl.length;o++)Oe(tl[o],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Hx(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":Wx(r,s),Oe("invalid",r)}hm(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&eu(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&eu(r.textContent,a,t),o=["children",""+a]):jl.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Kc(r),Vx(r,s,!0);break;case"textarea":Kc(r),Ux(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=fd)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[cr]=e,t[Hl]=r,Nk(t,e,!1,!1),e.stateNode=t;e:{switch(i=pm(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),o=r;break;case"iframe":case"object":case"embed":Oe("load",t),o=r;break;case"video":case"audio":for(o=0;o<tl.length;o++)Oe(tl[o],t);o=r;break;case"source":Oe("error",t),o=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),o=r;break;case"details":Oe("toggle",t),o=r;break;case"input":Hx(t,r),o=lm(t,r),Oe("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=$e({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":Wx(t,r),o=dm(t,r),Oe("invalid",t);break;default:o=r}hm(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?sS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rl(t,l):typeof l=="number"&&Rl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(jl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&ly(t,s,l,i))}switch(n){case"input":Kc(t),Vx(t,r,!1);break;case"textarea":Kc(t),Ux(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$o(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Pi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=fd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)Mk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_(166));if(n=gs(Wl.current),gs(fr.current),tu(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(s=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:eu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return bt(e),null;case 13:if(Re(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&an!==null&&e.mode&1&&!(e.flags&128))KS(),ia(),e.flags|=98560,s=!1;else if(s=tu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(_(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_(317));s[cr]=e}else ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),s=!1}else Vn!==null&&(Gm(Vn),Vn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?nt===0&&(nt=3):Wy())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return la(),$m(t,e),t===null&&$l(e.stateNode.containerInfo),bt(e),null;case 10:return Ty(e.type._context),bt(e),null;case 17:return Qt(e.type)&&hd(),bt(e),null;case 19:if(Re(Le),s=e.memoizedState,s===null)return bt(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Ha(s,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=wd(t),i!==null){for(e.flags|=128,Ha(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Le,Le.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>ua&&(e.flags|=128,r=!0,Ha(s,!1),e.lanes=4194304)}else{if(!r)if(t=wd(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ha(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ie)return bt(e),null}else 2*Qe()-s.renderingStartTime>ua&&n!==1073741824&&(e.flags|=128,r=!0,Ha(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Le.current,Pe(Le,r?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Vy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(_(156,e.tag))}function f2(t,e){switch(ky(e),e.tag){case 1:return Qt(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),Re(Gt),Re(Nt),jy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Oy(e),null;case 13:if(Re(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_(340));ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Le),null;case 4:return la(),null;case 10:return Ty(e.type._context),null;case 22:case 23:return Vy(),null;case 24:return null;default:return null}}var ou=!1,Ct=!1,h2=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Bm(t,e,n){try{n()}catch(r){We(t,e,r)}}var D0=!1;function p2(t,e){if(Cm=cd,t=RS(),by(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||o!==0&&f.nodeType!==3||(a=i+o),f!==s||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++c===o&&(a=i),h===s&&++d===r&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Em={focusedElem:t,selectionRange:n},cd=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?m:zn(e.type,m),v);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(S){We(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return g=D0,D0=!1,g}function gl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&Bm(e,n,s)}o=o.next}while(o!==r)}}function Bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pk(t){var e=t.alternate;e!==null&&(t.alternate=null,Pk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[Hl],delete e[Mm],delete e[YR],delete e[JR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ak(t){return t.tag===5||t.tag===3||t.tag===4}function I0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ak(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fd));else if(r!==4&&(t=t.child,t!==null))for(Vm(t,e,n),t=t.sibling;t!==null;)Vm(t,e,n),t=t.sibling}function Wm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wm(t,e,n),t=t.sibling;t!==null;)Wm(t,e,n),t=t.sibling}var ft=null,Bn=!1;function Gr(t,e,n){for(n=n.child;n!==null;)Ok(t,e,n),n=n.sibling}function Ok(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Rf,n)}catch{}switch(n.tag){case 5:Ct||Ni(n,e);case 6:var r=ft,o=Bn;ft=null,Gr(t,e,n),ft=r,Bn=o,ft!==null&&(Bn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Bn?(t=ft,n=n.stateNode,t.nodeType===8?Xh(t.parentNode,n):t.nodeType===1&&Xh(t,n),_l(t)):Xh(ft,n.stateNode));break;case 4:r=ft,o=Bn,ft=n.stateNode.containerInfo,Bn=!0,Gr(t,e,n),ft=r,Bn=o;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Bm(n,e,i),o=o.next}while(o!==r)}Gr(t,e,n);break;case 1:if(!Ct&&(Ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,e,a)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Gr(t,e,n),Ct=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function L0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new h2),e.forEach(function(r){var o=k2.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Bn=!1;break e;case 3:ft=a.stateNode.containerInfo,Bn=!0;break e;case 4:ft=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(ft===null)throw Error(_(160));Ok(s,i,o),ft=null,Bn=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){We(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jk(e,t),e=e.sibling}function jk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),tr(t),r&4){try{gl(3,t,t.return),Bf(3,t)}catch(m){We(t,t.return,m)}try{gl(5,t,t.return)}catch(m){We(t,t.return,m)}}break;case 1:_n(e,t),tr(t),r&512&&n!==null&&Ni(n,n.return);break;case 5:if(_n(e,t),tr(t),r&512&&n!==null&&Ni(n,n.return),t.flags&32){var o=t.stateNode;try{Rl(o,"")}catch(m){We(t,t.return,m)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eS(o,s),pm(a,i);var c=pm(a,s);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?sS(o,f):d==="dangerouslySetInnerHTML"?rS(o,f):d==="children"?Rl(o,f):ly(o,d,f,c)}switch(a){case"input":cm(o,s);break;case"textarea":tS(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Pi(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Pi(o,!!s.multiple,s.defaultValue,!0):Pi(o,!!s.multiple,s.multiple?[]:"",!1))}o[Hl]=s}catch(m){We(t,t.return,m)}}break;case 6:if(_n(e,t),tr(t),r&4){if(t.stateNode===null)throw Error(_(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){We(t,t.return,m)}}break;case 3:if(_n(e,t),tr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_l(e.containerInfo)}catch(m){We(t,t.return,m)}break;case 4:_n(e,t),tr(t);break;case 13:_n(e,t),tr(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(By=Qe())),r&4&&L0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(c=Ct)||d,_n(e,t),Ct=c):_n(e,t),tr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(f=q=d;q!==null;){switch(h=q,p=h.child,h.tag){case 0:case 11:case 14:case 15:gl(4,h,h.return);break;case 1:Ni(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){We(r,n,m)}}break;case 5:Ni(h,h.return);break;case 22:if(h.memoizedState!==null){F0(f);continue}}p!==null?(p.return=h,q=p):F0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oS("display",i))}catch(m){We(t,t.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){We(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_n(e,t),tr(t),r&4&&L0(t);break;case 21:break;default:_n(e,t),tr(t)}}function tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ak(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Rl(o,""),r.flags&=-33);var s=I0(t);Wm(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=I0(t);Vm(t,a,i);break;default:throw Error(_(161))}}catch(l){We(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function m2(t,e,n){q=t,Rk(t)}function Rk(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var o=q,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ou;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=ou;var c=Ct;if(ou=i,(Ct=l)&&!c)for(q=o;q!==null;)i=q,l=i.child,i.tag===22&&i.memoizedState!==null?z0(o):l!==null?(l.return=i,q=l):z0(o);for(;s!==null;)q=s,Rk(s),s=s.sibling;q=o,ou=a,Ct=c}_0(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,q=s):_0(t)}}function _0(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Bf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&b0(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}b0(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&_l(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}Ct||e.flags&512&&Hm(e)}catch(h){We(e,e.return,h)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function F0(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function z0(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bf(4,e)}catch(l){We(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){We(e,o,l)}}var s=e.return;try{Hm(e)}catch(l){We(e,s,l)}break;case 5:var i=e.return;try{Hm(e)}catch(l){We(e,i,l)}}}catch(l){We(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var g2=Math.ceil,kd=Vr.ReactCurrentDispatcher,zy=Vr.ReactCurrentOwner,Tn=Vr.ReactCurrentBatchConfig,he=0,at=null,Je=null,gt=0,rn=0,Ti=es(0),nt=0,Gl=null,zs=0,Hf=0,$y=0,yl=null,Ut=null,By=0,ua=1/0,Er=null,Cd=!1,Um=null,jo=null,su=!1,ko=null,Ed=0,vl=0,Km=null,Fu=-1,zu=0;function Dt(){return he&6?Qe():Fu!==-1?Fu:Fu=Qe()}function Ro(t){return t.mode&1?he&2&&gt!==0?gt&-gt:ZR.transition!==null?(zu===0&&(zu=yS()),zu):(t=xe,t!==0||(t=window.event,t=t===void 0?16:CS(t.type)),t):1}function Gn(t,e,n,r){if(50<vl)throw vl=0,Km=null,Error(_(185));Sc(t,n,r),(!(he&2)||t!==at)&&(t===at&&(!(he&2)&&(Hf|=n),nt===4&&co(t,gt)),Yt(t,r),n===1&&he===0&&!(e.mode&1)&&(ua=Qe()+500,Ff&&ts()))}function Yt(t,e){var n=t.callbackNode;Zj(t,e);var r=ld(t,t===at?gt:0);if(r===0)n!==null&&Gx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gx(n),e===1)t.tag===0?XR($0.bind(null,t)):VS($0.bind(null,t)),GR(function(){!(he&6)&&ts()}),n=null;else{switch(vS(r)){case 1:n=hy;break;case 4:n=mS;break;case 16:n=ad;break;case 536870912:n=gS;break;default:n=ad}n=Bk(n,Dk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dk(t,e){if(Fu=-1,zu=0,he&6)throw Error(_(327));var n=t.callbackNode;if(Di()&&t.callbackNode!==n)return null;var r=ld(t,t===at?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nd(t,r);else{e=r;var o=he;he|=2;var s=Lk();(at!==t||gt!==e)&&(Er=null,ua=Qe()+500,Ps(t,e));do try{x2();break}catch(a){Ik(t,a)}while(!0);Ny(),kd.current=s,he=o,Je!==null?e=0:(at=null,gt=0,e=nt)}if(e!==0){if(e===2&&(o=xm(t),o!==0&&(r=o,e=qm(t,o))),e===1)throw n=Gl,Ps(t,0),co(t,r),Yt(t,Qe()),n;if(e===6)co(t,r);else{if(o=t.current.alternate,!(r&30)&&!y2(o)&&(e=Nd(t,r),e===2&&(s=xm(t),s!==0&&(r=s,e=qm(t,s))),e===1))throw n=Gl,Ps(t,0),co(t,r),Yt(t,Qe()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(_(345));case 2:ds(t,Ut,Er);break;case 3:if(co(t,r),(r&130023424)===r&&(e=By+500-Qe(),10<e)){if(ld(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Tm(ds.bind(null,t,Ut,Er),e);break}ds(t,Ut,Er);break;case 4:if(co(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-qn(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g2(r/1960))-r,10<r){t.timeoutHandle=Tm(ds.bind(null,t,Ut,Er),r);break}ds(t,Ut,Er);break;case 5:ds(t,Ut,Er);break;default:throw Error(_(329))}}}return Yt(t,Qe()),t.callbackNode===n?Dk.bind(null,t):null}function qm(t,e){var n=yl;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=Nd(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&Gm(e)),t}function Gm(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function y2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Yn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function co(t,e){for(e&=~$y,e&=~Hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function $0(t){if(he&6)throw Error(_(327));Di();var e=ld(t,0);if(!(e&1))return Yt(t,Qe()),null;var n=Nd(t,e);if(t.tag!==0&&n===2){var r=xm(t);r!==0&&(e=r,n=qm(t,r))}if(n===1)throw n=Gl,Ps(t,0),co(t,e),Yt(t,Qe()),n;if(n===6)throw Error(_(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Ut,Er),Yt(t,Qe()),null}function Hy(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(ua=Qe()+500,Ff&&ts())}}function $s(t){ko!==null&&ko.tag===0&&!(he&6)&&Di();var e=he;he|=1;var n=Tn.transition,r=xe;try{if(Tn.transition=null,xe=1,t)return t()}finally{xe=r,Tn.transition=n,he=e,!(he&6)&&ts()}}function Vy(){rn=Ti.current,Re(Ti)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qR(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hd();break;case 3:la(),Re(Gt),Re(Nt),jy();break;case 5:Oy(r);break;case 4:la();break;case 13:Re(Le);break;case 19:Re(Le);break;case 10:Ty(r.type._context);break;case 22:case 23:Vy()}n=n.return}if(at=t,Je=t=Do(t.current,null),gt=rn=e,nt=0,Gl=null,$y=Hf=zs=0,Ut=yl=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}ms=null}return t}function Ik(t,e){do{var n=Je;try{if(Ny(),Iu.current=Sd,bd){for(var r=ze.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}bd=!1}if(Fs=0,ot=et=ze=null,ml=!1,Ul=0,zy.current=null,n===null||n.return===null){nt=1,Gl=e,Je=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=T0(i);if(p!==null){p.flags&=-257,M0(p,i,a,s,e),p.mode&1&&N0(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){N0(s,c,e),Wy();break e}l=Error(_(426))}}else if(Ie&&a.mode&1){var v=T0(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),M0(v,i,a,s,e),Cy(ca(l,a));break e}}s=l=ca(l,a),nt!==4&&(nt=2),yl===null?yl=[s]:yl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=vk(s,l,e);w0(s,x);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(jo===null||!jo.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=xk(s,a,e);w0(s,S);break e}}s=s.return}while(s!==null)}Fk(n)}catch(k){e=k,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Lk(){var t=kd.current;return kd.current=Sd,t===null?Sd:t}function Wy(){(nt===0||nt===3||nt===2)&&(nt=4),at===null||!(zs&268435455)&&!(Hf&268435455)||co(at,gt)}function Nd(t,e){var n=he;he|=2;var r=Lk();(at!==t||gt!==e)&&(Er=null,Ps(t,e));do try{v2();break}catch(o){Ik(t,o)}while(!0);if(Ny(),he=n,kd.current=r,Je!==null)throw Error(_(261));return at=null,gt=0,nt}function v2(){for(;Je!==null;)_k(Je)}function x2(){for(;Je!==null&&!Wj();)_k(Je)}function _k(t){var e=$k(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?Fk(t):Je=e,zy.current=null}function Fk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=f2(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Je=null;return}}else if(n=d2(n,e,rn),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);nt===0&&(nt=5)}function ds(t,e,n){var r=xe,o=Tn.transition;try{Tn.transition=null,xe=1,w2(t,e,n,r)}finally{Tn.transition=o,xe=r}return null}function w2(t,e,n,r){do Di();while(ko!==null);if(he&6)throw Error(_(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(eR(t,s),t===at&&(Je=at=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||su||(su=!0,Bk(ad,function(){return Di(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var i=xe;xe=1;var a=he;he|=4,zy.current=null,p2(t,n),jk(n,t),$R(Em),cd=!!Cm,Em=Cm=null,t.current=n,m2(n),Uj(),he=a,xe=i,Tn.transition=s}else t.current=n;if(su&&(su=!1,ko=t,Ed=o),s=t.pendingLanes,s===0&&(jo=null),Gj(n.stateNode),Yt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Cd)throw Cd=!1,t=Um,Um=null,t;return Ed&1&&t.tag!==0&&Di(),s=t.pendingLanes,s&1?t===Km?vl++:(vl=0,Km=t):vl=0,ts(),null}function Di(){if(ko!==null){var t=vS(Ed),e=Tn.transition,n=xe;try{if(Tn.transition=null,xe=16>t?16:t,ko===null)var r=!1;else{if(t=ko,ko=null,Ed=0,he&6)throw Error(_(331));var o=he;for(he|=4,q=t.current;q!==null;){var s=q,i=s.child;if(q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:gl(8,d,s)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var h=d.sibling,p=d.return;if(Pk(d),d===c){q=null;break}if(h!==null){h.return=p,q=h;break}q=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}q=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,q=i;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gl(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,q=x;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){i=q;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,q=b;else e:for(i=w;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bf(9,a)}}catch(k){We(a,a.return,k)}if(a===i){q=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,q=S;break e}q=a.return}}if(he=o,ts(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Rf,t)}catch{}r=!0}return r}finally{xe=n,Tn.transition=e}}return!1}function B0(t,e,n){e=ca(n,e),e=vk(t,e,1),t=Oo(t,e,1),e=Dt(),t!==null&&(Sc(t,1,e),Yt(t,e))}function We(t,e,n){if(t.tag===3)B0(t,t,n);else for(;e!==null;){if(e.tag===3){B0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jo===null||!jo.has(r))){t=ca(n,t),t=xk(e,t,1),e=Oo(e,t,1),t=Dt(),e!==null&&(Sc(e,1,t),Yt(e,t));break}}e=e.return}}function b2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(gt&n)===n&&(nt===4||nt===3&&(gt&130023424)===gt&&500>Qe()-By?Ps(t,0):$y|=n),Yt(t,e)}function zk(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=Dt();t=Fr(t,e),t!==null&&(Sc(t,e,n),Yt(t,n))}function S2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zk(t,n)}function k2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(e),zk(t,n)}var $k;$k=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,u2(t,e,n);qt=!!(t.flags&131072)}else qt=!1,Ie&&e.flags&1048576&&WS(e,gd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_u(t,e),t=e.pendingProps;var o=sa(e,Nt.current);Ri(e,n),o=Dy(null,e,r,t,o,n);var s=Iy();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(s=!0,pd(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Py(e),o.updater=$f,e.stateNode=o,o._reactInternals=e,Dm(e,r,t,n),e=_m(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&Sy(e),Ot(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_u(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=E2(r),t=zn(r,t),o){case 0:e=Lm(null,e,r,t,n);break e;case 1:e=O0(null,e,r,t,n);break e;case 11:e=P0(null,e,r,t,n);break e;case 14:e=A0(null,e,r,zn(r.type,t),n);break e}throw Error(_(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:zn(r,o),Lm(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:zn(r,o),O0(t,e,r,o,n);case 3:e:{if(kk(e),t===null)throw Error(_(387));r=e.pendingProps,s=e.memoizedState,o=s.element,YS(t,e),xd(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=ca(Error(_(423)),e),e=j0(t,e,r,n,o);break e}else if(r!==o){o=ca(Error(_(424)),e),e=j0(t,e,r,n,o);break e}else for(an=Ao(e.stateNode.containerInfo.firstChild),un=e,Ie=!0,Vn=null,n=GS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ia(),r===o){e=zr(t,e,n);break e}Ot(t,e,r,n)}e=e.child}return e;case 5:return JS(e),t===null&&Om(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Nm(r,o)?i=null:s!==null&&Nm(r,s)&&(e.flags|=32),Sk(t,e),Ot(t,e,i,n),e.child;case 6:return t===null&&Om(e),null;case 13:return Ck(t,e,n);case 4:return Ay(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=aa(e,null,r,n):Ot(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:zn(r,o),P0(t,e,r,o,n);case 7:return Ot(t,e,e.pendingProps,n),e.child;case 8:return Ot(t,e,e.pendingProps.children,n),e.child;case 12:return Ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,Pe(yd,r._currentValue),r._currentValue=i,s!==null)if(Yn(s.value,i)){if(s.children===o.children&&!Gt.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=jr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(_(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),jm(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Ot(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Ri(e,n),o=Dn(o),r=r(o),e.flags|=1,Ot(t,e,r,n),e.child;case 14:return r=e.type,o=zn(r,e.pendingProps),o=zn(r.type,o),A0(t,e,r,o,n);case 15:return wk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:zn(r,o),_u(t,e),e.tag=1,Qt(r)?(t=!0,pd(e)):t=!1,Ri(e,n),yk(e,r,o),Dm(e,r,o,n),_m(null,e,r,!0,t,n);case 19:return Ek(t,e,n);case 22:return bk(t,e,n)}throw Error(_(156,e.tag))};function Bk(t,e){return pS(t,e)}function C2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new C2(t,e,n,r)}function Uy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E2(t){if(typeof t=="function")return Uy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uy)return 11;if(t===dy)return 14}return 2}function Do(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $u(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")Uy(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case yi:return As(n.children,o,s,e);case cy:i=8,o|=8;break;case om:return t=Nn(12,n,e,o|2),t.elementType=om,t.lanes=s,t;case sm:return t=Nn(13,n,e,o),t.elementType=sm,t.lanes=s,t;case im:return t=Nn(19,n,e,o),t.elementType=im,t.lanes=s,t;case Jb:return Vf(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qb:i=10;break e;case Yb:i=9;break e;case uy:i=11;break e;case dy:i=14;break e;case ro:i=16,r=null;break e}throw Error(_(130,t==null?t:typeof t,""))}return e=Nn(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function As(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function Vf(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=Jb,t.lanes=n,t.stateNode={isHidden:!1},t}function ip(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function ap(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function N2(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bh(0),this.expirationTimes=Bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bh(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ky(t,e,n,r,o,s,i,a,l){return t=new N2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Py(s),t}function T2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hk(t){if(!t)return Bo;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(_(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_(171))}if(t.tag===1){var n=t.type;if(Qt(n))return HS(t,n,e)}return e}function Vk(t,e,n,r,o,s,i,a,l){return t=Ky(n,r,!0,t,o,s,i,a,l),t.context=Hk(null),n=t.current,r=Dt(),o=Ro(n),s=jr(r,o),s.callback=e??null,Oo(n,s,o),t.current.lanes=o,Sc(t,o,r),Yt(t,r),t}function Wf(t,e,n,r){var o=e.current,s=Dt(),i=Ro(o);return n=Hk(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oo(o,e,i),t!==null&&(Gn(t,o,i,s),Du(t,o,i)),i}function Td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qy(t,e){H0(t,e),(t=t.alternate)&&H0(t,e)}function M2(){return null}var Wk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gy(t){this._internalRoot=t}Uf.prototype.render=Gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_(409));Wf(t,e,null,null)};Uf.prototype.unmount=Gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){Wf(null,t,null,null)}),e[_r]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=bS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lo.length&&e!==0&&e<lo[n].priority;n++);lo.splice(n,0,t),n===0&&kS(t)}};function Qy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function V0(){}function P2(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Td(i);s.call(c)}}var i=Vk(e,r,t,0,null,!1,!1,"",V0);return t._reactRootContainer=i,t[_r]=i.current,$l(t.nodeType===8?t.parentNode:t),$s(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=Td(l);a.call(c)}}var l=Ky(t,0,!1,null,null,!1,!1,"",V0);return t._reactRootContainer=l,t[_r]=l.current,$l(t.nodeType===8?t.parentNode:t),$s(function(){Wf(e,l,n,r)}),l}function qf(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=Td(i);a.call(l)}}Wf(e,i,t,o)}else i=P2(n,e,t,o,r);return Td(i)}xS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(py(e,n|1),Yt(e,Qe()),!(he&6)&&(ua=Qe()+500,ts()))}break;case 13:$s(function(){var r=Fr(t,1);if(r!==null){var o=Dt();Gn(r,t,1,o)}}),qy(t,1)}};my=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=Dt();Gn(e,t,134217728,n)}qy(t,134217728)}};wS=function(t){if(t.tag===13){var e=Ro(t),n=Fr(t,e);if(n!==null){var r=Dt();Gn(n,t,e,r)}qy(t,e)}};bS=function(){return xe};SS=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};gm=function(t,e,n){switch(e){case"input":if(cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=_f(r);if(!o)throw Error(_(90));Zb(r),cm(r,o)}}}break;case"textarea":tS(t,n);break;case"select":e=n.value,e!=null&&Pi(t,!!n.multiple,e,!1)}};lS=Hy;cS=$s;var A2={usingClientEntryPoint:!1,Events:[Cc,bi,_f,iS,aS,Hy]},Va={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O2={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fS(t),t===null?null:t.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||M2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{Rf=iu.inject(O2),dr=iu}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A2;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(e))throw Error(_(200));return T2(t,e,null,n)};hn.createRoot=function(t,e){if(!Qy(t))throw Error(_(299));var n=!1,r="",o=Wk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Ky(t,1,!1,null,null,n,!1,r,o),t[_r]=e.current,$l(t.nodeType===8?t.parentNode:t),new Gy(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_(188)):(t=Object.keys(t).join(","),Error(_(268,t)));return t=fS(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return $s(t)};hn.hydrate=function(t,e,n){if(!Kf(e))throw Error(_(200));return qf(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Qy(t))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Wk;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=Vk(e,null,t,1,n??null,o,!1,s,i),t[_r]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Uf(e)};hn.render=function(t,e,n){if(!Kf(e))throw Error(_(200));return qf(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Kf(t))throw Error(_(40));return t._reactRootContainer?($s(function(){qf(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};hn.unstable_batchedUpdates=Hy;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kf(n))throw Error(_(200));if(t==null||t._reactInternals===void 0)throw Error(_(38));return qf(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function Uk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uk)}catch(t){console.error(t)}}Uk(),Ub.exports=hn;var Zs=Ub.exports;const Kk=Of(Zs);var qk,W0=Zs;qk=W0.createRoot,W0.hydrateRoot;function j2(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,s,i=[],a="",l=t.split("/");for(l[0]||l.shift();o=l.shift();)n=o[0],n==="*"?(i.push(n),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),s=o.indexOf(".",1),i.push(o.substring(1,~r?r:~s?s:o.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:i,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var Gk={exports:{}},Qk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=y;function R2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var D2=typeof Object.is=="function"?Object.is:R2,I2=da.useState,L2=da.useEffect,_2=da.useLayoutEffect,F2=da.useDebugValue;function z2(t,e){var n=e(),r=I2({inst:{value:n,getSnapshot:e}}),o=r[0].inst,s=r[1];return _2(function(){o.value=n,o.getSnapshot=e,lp(o)&&s({inst:o})},[t,n,e]),L2(function(){return lp(o)&&s({inst:o}),t(function(){lp(o)&&s({inst:o})})},[t]),F2(n),n}function lp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!D2(t,n)}catch{return!0}}function $2(t,e){return e()}var B2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$2:z2;Qk.useSyncExternalStore=da.useSyncExternalStore!==void 0?da.useSyncExternalStore:B2;Gk.exports=Qk;var Gf=Gk.exports;const H2=Vb.useInsertionEffect,V2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W2=V2?y.useLayoutEffect:y.useEffect,U2=H2||W2,Yk=t=>{const e=y.useRef([t,(...n)=>e[0](...n)]).current;return U2(()=>{e[0]=t}),e[1]},K2="popstate",Yy="pushState",Jy="replaceState",q2="hashchange",U0=[K2,Yy,Jy,q2],G2=t=>{for(const e of U0)addEventListener(e,t);return()=>{for(const e of U0)removeEventListener(e,t)}},Jk=(t,e)=>Gf.useSyncExternalStore(G2,t,e),Q2=()=>location.search,Y2=({ssrSearch:t=""}={})=>Jk(Q2,()=>t),K0=()=>location.pathname,J2=({ssrPath:t}={})=>Jk(K0,t?()=>t:K0),X2=(t,{replace:e=!1,state:n=null}={})=>history[e?Jy:Yy](n,"",t),Z2=(t={})=>[J2(t),X2],q0=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[q0]>"u"){for(const t of[Yy,Jy]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,q0,{value:!0})}const eD=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Xk=(t="")=>t==="/"?"":t,tD=(t,e)=>t[0]==="~"?t.slice(1):Xk(e)+t,nD=(t="",e)=>eD(G0(Xk(t)),G0(e)),G0=t=>{try{return decodeURI(t)}catch{return t}},Zk={hook:Z2,searchHook:Y2,parser:j2,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},eC=y.createContext(Zk),Nc=()=>y.useContext(eC),tC={},nC=y.createContext(tC),Xy=()=>y.useContext(nC),Qf=t=>{const[e,n]=t.hook(t);return[nD(t.base,e),Yk((r,o)=>n(tD(r,t.base),o))]},yr=()=>Qf(Nc()),rC=(t,e,n,r)=>{const{pattern:o,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),i=o.exec(n)||[],[a,...l]=i;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((f,h)=>[f,l[h]])):i.groups;let d={...l};return c&&Object.assign(d,c),d})(),...r?[a]:[]]:[!1,null]},rD=({children:t,...e})=>{var d,f;const n=Nc(),r=e.hook?Zk:n;let o=r;const[s,i]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];i&&(e.ssrSearch=i,e.ssrPath=s),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=y.useRef({}),l=a.current,c=l;for(let h in r){const p=h==="base"?r[h]+(e[h]||""):e[h]||r[h];l===c&&p!==c[h]&&(a.current=c={...c}),c[h]=p,p!==r[h]&&(o=c)}return y.createElement(eC.Provider,{value:o,children:t})},Q0=({children:t,component:e},n)=>e?y.createElement(e,{params:n}):typeof t=="function"?t(n):t,oD=t=>{let e=y.useRef(tC),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Bt=({path:t,nest:e,match:n,...r})=>{const o=Nc(),[s]=Qf(o),[i,a,l]=n??rC(o.parser,t,s,e),c=oD({...Xy(),...a});if(!i)return null;const d=l?y.createElement(rD,{base:l},Q0(r,c)):Q0(r,c);return y.createElement(nC.Provider,{value:c,children:d})},jt=y.forwardRef((t,e)=>{const n=Nc(),[r,o]=Qf(n),{to:s="",href:i=s,onClick:a,asChild:l,children:c,className:d,replace:f,state:h,...p}=t,g=Yk(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(a==null||a(v),v.defaultPrevented||(v.preventDefault(),o(i,t)))}),m=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return l&&y.isValidElement(c)?y.cloneElement(c,{onClick:g,href:m}):y.createElement("a",{...p,onClick:g,href:m,className:d!=null&&d.call?d(r===i):d,children:c,ref:e})}),oC=t=>Array.isArray(t)?t.flatMap(e=>oC(e&&e.type===y.Fragment?e.props.children:e)):[t],sD=({children:t,location:e})=>{const n=Nc(),[r]=Qf(n);for(const o of oC(t)){let s=0;if(y.isValidElement(o)&&(s=rC(n.parser,o.props.path,e||r,o.props.nest))[0])return y.cloneElement(o,{match:s})}return null};var Ca=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bs=typeof window>"u"||"Deno"in globalThis;function wn(){}function iD(t,e){return typeof t=="function"?t(e):t}function Qm(t){return typeof t=="number"&&t>=0&&t!==1/0}function sC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ii(t,e){return typeof t=="function"?t(e):t}function Wn(t,e){return typeof t=="function"?t(e):t}function Y0(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:a}=t;if(i){if(r){if(e.queryHash!==Zy(i,e.options))return!1}else if(!Ql(e.queryKey,i))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||o&&o!==e.state.fetchStatus||s&&!s(e))}function J0(t,e){const{exact:n,status:r,predicate:o,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Hs(e.options.mutationKey)!==Hs(s))return!1}else if(!Ql(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function Zy(t,e){return((e==null?void 0:e.queryKeyHashFn)||Hs)(t)}function Hs(t){return JSON.stringify(t,(e,n)=>Ym(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Ql(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Ql(t[n],e[n])):!1}function iC(t,e){if(t===e)return t;const n=X0(t)&&X0(e);if(n||Ym(t)&&Ym(e)){const r=n?t:Object.keys(t),o=r.length,s=n?e:Object.keys(e),i=s.length,a=n?[]:{};let l=0;for(let c=0;c<i;c++){const d=n?c:s[c];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=iC(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return o===i&&l===o?t:a}return e}function Md(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function X0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ym(t){if(!Z0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Z0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Z0(t){return Object.prototype.toString.call(t)==="[object Object]"}function aD(t){return new Promise(e=>{setTimeout(e,t)})}function Jm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?iC(t,e):e}function lD(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function cD(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ev=Symbol();function aC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ev?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ss,ho,Ui,kb,uD=(kb=class extends Ca{constructor(){super();ee(this,Ss);ee(this,ho);ee(this,Ui);U(this,Ui,e=>{if(!Bs&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){E(this,ho)||this.setEventListener(E(this,Ui))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,ho))==null||e.call(this),U(this,ho,void 0))}setEventListener(e){var n;U(this,Ui,e),(n=E(this,ho))==null||n.call(this),U(this,ho,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){E(this,Ss)!==e&&(U(this,Ss,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof E(this,Ss)=="boolean"?E(this,Ss):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ss=new WeakMap,ho=new WeakMap,Ui=new WeakMap,kb),tv=new uD,Ki,po,qi,Cb,dD=(Cb=class extends Ca{constructor(){super();ee(this,Ki,!0);ee(this,po);ee(this,qi);U(this,qi,e=>{if(!Bs&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){E(this,po)||this.setEventListener(E(this,qi))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,po))==null||e.call(this),U(this,po,void 0))}setEventListener(e){var n;U(this,qi,e),(n=E(this,po))==null||n.call(this),U(this,po,e(this.setOnline.bind(this)))}setOnline(e){E(this,Ki)!==e&&(U(this,Ki,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return E(this,Ki)}},Ki=new WeakMap,po=new WeakMap,qi=new WeakMap,Cb),Pd=new dD;function Xm(){let t,e;const n=new Promise((o,s)=>{t=o,e=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}function fD(t){return Math.min(1e3*2**t,3e4)}function lC(t){return(t??"online")==="online"?Pd.isOnline():!0}var cC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cp(t){return t instanceof cC}function uC(t){let e=!1,n=0,r=!1,o;const s=Xm(),i=m=>{var v;r||(h(new cC(m)),(v=t.abort)==null||v.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>tv.isFocused()&&(t.networkMode==="always"||Pd.isOnline())&&t.canRun(),d=()=>lC(t.networkMode)&&t.canRun(),f=m=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,m),o==null||o(),s.resolve(m))},h=m=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,m),o==null||o(),s.reject(m))},p=()=>new Promise(m=>{var v;o=x=>{(r||c())&&m(x)},(v=t.onPause)==null||v.call(t)}).then(()=>{var m;o=void 0,r||(m=t.onContinue)==null||m.call(t)}),g=()=>{if(r)return;let m;const v=n===0?t.initialPromise:void 0;try{m=v??t.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(f).catch(x=>{var T;if(r)return;const w=t.retry??(Bs?0:3),b=t.retryDelay??fD,S=typeof b=="function"?b(n,x):b,k=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,x);if(e||!k){h(x);return}n++,(T=t.onFail)==null||T.call(t,n,x),aD(S).then(()=>c()?void 0:p()).then(()=>{e?h(x):g()})})};return{promise:s,cancel:i,continue:()=>(o==null||o(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?g():p().then(g),s)}}function hD(){let t=[],e=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const s=a=>{e?t.push(a):o(()=>{n(a)})},i=()=>{const a=t;t=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||i()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var tt=hD(),ks,Eb,dC=(Eb=class{constructor(){ee(this,ks)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qm(this.gcTime)&&U(this,ks,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Bs?1/0:5*60*1e3))}clearGcTimeout(){E(this,ks)&&(clearTimeout(E(this,ks)),U(this,ks,void 0))}},ks=new WeakMap,Eb),Gi,Qi,xn,St,yc,Cs,$n,kr,Nb,pD=(Nb=class extends dC{constructor(e){super();ee(this,$n);ee(this,Gi);ee(this,Qi);ee(this,xn);ee(this,St);ee(this,yc);ee(this,Cs);U(this,Cs,!1),U(this,yc,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,xn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Gi,mD(this.options)),this.state=e.state??E(this,Gi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=E(this,St))==null?void 0:e.promise}setOptions(e){this.options={...E(this,yc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,xn).remove(this)}setData(e,n){const r=Jm(this.state.data,e,this.options);return ie(this,$n,kr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ie(this,$n,kr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,o;const n=(r=E(this,St))==null?void 0:r.promise;return(o=E(this,St))==null||o.cancel(e),n?n.then(wn).catch(wn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,Gi))}isActive(){return this.observers.some(e=>Wn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ev||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!sC(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,St))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=E(this,St))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),E(this,xn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(E(this,St)&&(E(this,Cs)?E(this,St).cancel({revert:!0}):E(this,St).cancelRetry()),this.scheduleGc()),E(this,xn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ie(this,$n,kr).call(this,{type:"invalidate"})}fetch(e,n){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(E(this,St))return E(this,St).continueRetry(),E(this,St).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,o=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(U(this,Cs,!0),r.signal)})},s=()=>{const f=aC(this.options,n),h={queryKey:this.queryKey,meta:this.meta};return o(h),U(this,Cs,!1),this.options.persister?this.options.persister(f,h,this):f(h)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(i),(l=this.options.behavior)==null||l.onFetch(i,this),U(this,Qi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&ie(this,$n,kr).call(this,{type:"fetch",meta:(d=i.fetchOptions)==null?void 0:d.meta});const a=f=>{var h,p,g,m;cp(f)&&f.silent||ie(this,$n,kr).call(this,{type:"error",error:f}),cp(f)||((p=(h=E(this,xn).config).onError)==null||p.call(h,f,this),(m=(g=E(this,xn).config).onSettled)==null||m.call(g,this.state.data,f,this)),this.scheduleGc()};return U(this,St,uC({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var h,p,g,m;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){a(v);return}(p=(h=E(this,xn).config).onSuccess)==null||p.call(h,f,this),(m=(g=E(this,xn).config).onSettled)==null||m.call(g,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,h)=>{ie(this,$n,kr).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{ie(this,$n,kr).call(this,{type:"pause"})},onContinue:()=>{ie(this,$n,kr).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),E(this,St).start()}},Gi=new WeakMap,Qi=new WeakMap,xn=new WeakMap,St=new WeakMap,yc=new WeakMap,Cs=new WeakMap,$n=new WeakSet,kr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fC(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return cp(o)&&o.revert&&E(this,Qi)?{...E(this,Qi),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),tt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),E(this,xn).notify({query:this,type:"updated",action:e})})},Nb);function fC(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function mD(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sr,Tb,gD=(Tb=class extends Ca{constructor(e={}){super();ee(this,sr);this.config=e,U(this,sr,new Map)}build(e,n,r){const o=n.queryKey,s=n.queryHash??Zy(o,n);let i=this.get(s);return i||(i=new pD({cache:this,queryKey:o,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(i)),i}add(e){E(this,sr).has(e.queryHash)||(E(this,sr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=E(this,sr).get(e.queryHash);n&&(e.destroy(),n===e&&E(this,sr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){tt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return E(this,sr).get(e)}getAll(){return[...E(this,sr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Y0(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Y0(e,r)):n}notify(e){tt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){tt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){tt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},sr=new WeakMap,Tb),ir,Pt,Es,ar,eo,Mb,yD=(Mb=class extends dC{constructor(e){super();ee(this,ar);ee(this,ir);ee(this,Pt);ee(this,Es);this.mutationId=e.mutationId,U(this,Pt,e.mutationCache),U(this,ir,[]),this.state=e.state||hC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){E(this,ir).includes(e)||(E(this,ir).push(e),this.clearGcTimeout(),E(this,Pt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,ir,E(this,ir).filter(n=>n!==e)),this.scheduleGc(),E(this,Pt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){E(this,ir).length||(this.state.status==="pending"?this.scheduleGc():E(this,Pt).remove(this))}continue(){var e;return((e=E(this,Es))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,s,i,a,l,c,d,f,h,p,g,m,v,x,w,b,S,k,T,C;U(this,Es,uC({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,A)=>{ie(this,ar,eo).call(this,{type:"failed",failureCount:N,error:A})},onPause:()=>{ie(this,ar,eo).call(this,{type:"pause"})},onContinue:()=>{ie(this,ar,eo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,Pt).canRun(this)}));const n=this.state.status==="pending",r=!E(this,Es).canStart();try{if(!n){ie(this,ar,eo).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(o=E(this,Pt).config).onMutate)==null?void 0:s.call(o,e,this));const A=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e));A!==this.state.context&&ie(this,ar,eo).call(this,{type:"pending",context:A,variables:e,isPaused:r})}const N=await E(this,Es).start();return await((c=(l=E(this,Pt).config).onSuccess)==null?void 0:c.call(l,N,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,N,e,this.state.context)),await((p=(h=E(this,Pt).config).onSettled)==null?void 0:p.call(h,N,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,N,null,e,this.state.context)),ie(this,ar,eo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(v=E(this,Pt).config).onError)==null?void 0:x.call(v,N,e,this.state.context,this)),await((b=(w=this.options).onError)==null?void 0:b.call(w,N,e,this.state.context)),await((k=(S=E(this,Pt).config).onSettled)==null?void 0:k.call(S,void 0,N,this.state.variables,this.state.context,this)),await((C=(T=this.options).onSettled)==null?void 0:C.call(T,void 0,N,e,this.state.context)),N}finally{ie(this,ar,eo).call(this,{type:"error",error:N})}}finally{E(this,Pt).runNext(this)}}},ir=new WeakMap,Pt=new WeakMap,Es=new WeakMap,ar=new WeakSet,eo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),tt.batch(()=>{E(this,ir).forEach(r=>{r.onMutationUpdate(e)}),E(this,Pt).notify({mutation:this,type:"updated",action:e})})},Mb);function hC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nn,vc,Pb,vD=(Pb=class extends Ca{constructor(e={}){super();ee(this,nn);ee(this,vc);this.config=e,U(this,nn,new Map),U(this,vc,Date.now())}build(e,n,r){const o=new yD({mutationCache:this,mutationId:++Vc(this,vc)._,options:e.defaultMutationOptions(n),state:r});return this.add(o),o}add(e){const n=au(e),r=E(this,nn).get(n)??[];r.push(e),E(this,nn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=au(e);if(E(this,nn).has(n)){const o=(r=E(this,nn).get(n))==null?void 0:r.filter(s=>s!==e);o&&(o.length===0?E(this,nn).delete(n):E(this,nn).set(n,o))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=E(this,nn).get(au(e)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=E(this,nn).get(au(e)))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){tt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...E(this,nn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>J0(n,r))}findAll(e={}){return this.getAll().filter(n=>J0(e,n))}notify(e){tt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return tt.batch(()=>Promise.all(e.map(n=>n.continue().catch(wn))))}},nn=new WeakMap,vc=new WeakMap,Pb);function au(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function ew(t){return{onFetch:(e,n)=>{var d,f,h,p,g;const r=e.options,o=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],i=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},x=aC(e.options,e.fetchOptions),w=async(b,S,k)=>{if(m)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const T={queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};v(T);const C=await x(T),{maxPages:N}=e.options,A=k?cD:lD;return{pages:A(b.pages,C,N),pageParams:A(b.pageParams,S,N)}};if(o&&s.length){const b=o==="backward",S=b?xD:tw,k={pages:s,pageParams:i},T=S(r,k);a=await w(k,T,b)}else{const b=t??s.length;do{const S=l===0?i[0]??r.initialPageParam:tw(r,a);if(l>0&&S==null)break;a=await w(a,S),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var m,v;return(v=(m=e.options).persister)==null?void 0:v.call(m,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function tw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function xD(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ve,mo,go,Yi,Ji,yo,Xi,Zi,Ab,wD=(Ab=class{constructor(t={}){ee(this,Ve);ee(this,mo);ee(this,go);ee(this,Yi);ee(this,Ji);ee(this,yo);ee(this,Xi);ee(this,Zi);U(this,Ve,t.queryCache||new gD),U(this,mo,t.mutationCache||new vD),U(this,go,t.defaultOptions||{}),U(this,Yi,new Map),U(this,Ji,new Map),U(this,yo,0)}mount(){Vc(this,yo)._++,E(this,yo)===1&&(U(this,Xi,tv.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,Ve).onFocus())})),U(this,Zi,Pd.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,Ve).onOnline())})))}unmount(){var t,e;Vc(this,yo)._--,E(this,yo)===0&&((t=E(this,Xi))==null||t.call(this),U(this,Xi,void 0),(e=E(this,Zi))==null||e.call(this),U(this,Zi,void 0))}isFetching(t){return E(this,Ve).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return E(this,mo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,Ve).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=E(this,Ve).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Ii(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return E(this,Ve).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=E(this,Ve).get(r.queryHash),s=o==null?void 0:o.state.data,i=iD(e,s);if(i!==void 0)return E(this,Ve).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return tt.batch(()=>E(this,Ve).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=E(this,Ve).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=E(this,Ve);tt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=E(this,Ve),r={type:"active",...t};return tt.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=tt.batch(()=>E(this,Ve).findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(wn).catch(wn)}invalidateQueries(t={},e={}){return tt.batch(()=>{if(E(this,Ve).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=tt.batch(()=>E(this,Ve).findAll(t).filter(o=>!o.isDisabled()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(wn)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(wn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=E(this,Ve).build(this,e);return n.isStaleByTime(Ii(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wn).catch(wn)}fetchInfiniteQuery(t){return t.behavior=ew(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wn).catch(wn)}ensureInfiniteQueryData(t){return t.behavior=ew(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Pd.isOnline()?E(this,mo).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,Ve)}getMutationCache(){return E(this,mo)}getDefaultOptions(){return E(this,go)}setDefaultOptions(t){U(this,go,t)}setQueryDefaults(t,e){E(this,Yi).set(Hs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...E(this,Yi).values()];let n={};return e.forEach(r=>{Ql(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){E(this,Ji).set(Hs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...E(this,Ji).values()];let n={};return e.forEach(r=>{Ql(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...E(this,go).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Zy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===ev&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...E(this,go).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){E(this,Ve).clear(),E(this,mo).clear()}},Ve=new WeakMap,mo=new WeakMap,go=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,yo=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,Ab),Ht,ue,xc,At,Ns,ea,vo,lr,wc,ta,na,Ts,Ms,xo,ra,me,nl,Zm,eg,tg,ng,rg,og,sg,pC,Ob,bD=(Ob=class extends Ca{constructor(e,n){super();ee(this,me);ee(this,Ht);ee(this,ue);ee(this,xc);ee(this,At);ee(this,Ns);ee(this,ea);ee(this,vo);ee(this,lr);ee(this,wc);ee(this,ta);ee(this,na);ee(this,Ts);ee(this,Ms);ee(this,xo);ee(this,ra,new Set);this.options=n,U(this,Ht,e),U(this,lr,null),U(this,vo,Xm()),this.options.experimental_prefetchInRender||E(this,vo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,ue).addObserver(this),nw(E(this,ue),this.options)?ie(this,me,nl).call(this):this.updateResult(),ie(this,me,ng).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ig(E(this,ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ig(E(this,ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ie(this,me,rg).call(this),ie(this,me,og).call(this),E(this,ue).removeObserver(this)}setOptions(e,n){const r=this.options,o=E(this,ue);if(this.options=E(this,Ht).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wn(this.options.enabled,E(this,ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ie(this,me,sg).call(this),E(this,ue).setOptions(this.options),r._defaulted&&!Md(this.options,r)&&E(this,Ht).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,ue),observer:this});const s=this.hasListeners();s&&rw(E(this,ue),o,this.options,r)&&ie(this,me,nl).call(this),this.updateResult(n),s&&(E(this,ue)!==o||Wn(this.options.enabled,E(this,ue))!==Wn(r.enabled,E(this,ue))||Ii(this.options.staleTime,E(this,ue))!==Ii(r.staleTime,E(this,ue)))&&ie(this,me,Zm).call(this);const i=ie(this,me,eg).call(this);s&&(E(this,ue)!==o||Wn(this.options.enabled,E(this,ue))!==Wn(r.enabled,E(this,ue))||i!==E(this,xo))&&ie(this,me,tg).call(this,i)}getOptimisticResult(e){const n=E(this,Ht).getQueryCache().build(E(this,Ht),e),r=this.createResult(n,e);return kD(this,r)&&(U(this,At,r),U(this,ea,this.options),U(this,Ns,E(this,ue).state)),r}getCurrentResult(){return E(this,At)}trackResult(e,n){const r={};return Object.keys(e).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),n==null||n(o),e[o])})}),r}trackProp(e){E(this,ra).add(e)}getCurrentQuery(){return E(this,ue)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=E(this,Ht).defaultQueryOptions(e),r=E(this,Ht).getQueryCache().build(E(this,Ht),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ie(this,me,nl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,At)))}createResult(e,n){var N;const r=E(this,ue),o=this.options,s=E(this,At),i=E(this,Ns),a=E(this,ea),c=e!==r?e.state:E(this,xc),{state:d}=e;let f={...d},h=!1,p;if(n._optimisticResults){const A=this.hasListeners(),P=!A&&nw(e,n),R=A&&rw(e,r,n,o);(P||R)&&(f={...f,...fC(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:v}=f;if(n.select&&f.data!==void 0)if(s&&f.data===(i==null?void 0:i.data)&&n.select===E(this,wc))p=E(this,ta);else try{U(this,wc,n.select),p=n.select(f.data),p=Jm(s==null?void 0:s.data,p,n),U(this,ta,p),U(this,lr,null)}catch(A){U(this,lr,A)}else p=f.data;if(n.placeholderData!==void 0&&p===void 0&&v==="pending"){let A;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))A=s.data;else if(A=typeof n.placeholderData=="function"?n.placeholderData((N=E(this,na))==null?void 0:N.state.data,E(this,na)):n.placeholderData,n.select&&A!==void 0)try{A=n.select(A),U(this,lr,null)}catch(P){U(this,lr,P)}A!==void 0&&(v="success",p=Jm(s==null?void 0:s.data,A,n),h=!0)}E(this,lr)&&(g=E(this,lr),p=E(this,ta),m=Date.now(),v="error");const x=f.fetchStatus==="fetching",w=v==="pending",b=v==="error",S=w&&x,k=p!==void 0,C={status:v,fetchStatus:f.fetchStatus,isPending:w,isSuccess:v==="success",isError:b,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:b&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:b&&k,isStale:nv(e,n),refetch:this.refetch,promise:E(this,vo)};if(this.options.experimental_prefetchInRender){const A=j=>{C.status==="error"?j.reject(C.error):C.data!==void 0&&j.resolve(C.data)},P=()=>{const j=U(this,vo,C.promise=Xm());A(j)},R=E(this,vo);switch(R.status){case"pending":e.queryHash===r.queryHash&&A(R);break;case"fulfilled":(C.status==="error"||C.data!==R.value)&&P();break;case"rejected":(C.status!=="error"||C.error!==R.reason)&&P();break}}return C}updateResult(e){const n=E(this,At),r=this.createResult(E(this,ue),this.options);if(U(this,Ns,E(this,ue).state),U(this,ea,this.options),E(this,Ns).data!==void 0&&U(this,na,E(this,ue)),Md(r,n))return;U(this,At,r);const o={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!E(this,ra).size)return!0;const l=new Set(a??E(this,ra));return this.options.throwOnError&&l.add("error"),Object.keys(E(this,At)).some(c=>{const d=c;return E(this,At)[d]!==n[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&s()&&(o.listeners=!0),ie(this,me,pC).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ie(this,me,ng).call(this)}},Ht=new WeakMap,ue=new WeakMap,xc=new WeakMap,At=new WeakMap,Ns=new WeakMap,ea=new WeakMap,vo=new WeakMap,lr=new WeakMap,wc=new WeakMap,ta=new WeakMap,na=new WeakMap,Ts=new WeakMap,Ms=new WeakMap,xo=new WeakMap,ra=new WeakMap,me=new WeakSet,nl=function(e){ie(this,me,sg).call(this);let n=E(this,ue).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(wn)),n},Zm=function(){ie(this,me,rg).call(this);const e=Ii(this.options.staleTime,E(this,ue));if(Bs||E(this,At).isStale||!Qm(e))return;const r=sC(E(this,At).dataUpdatedAt,e)+1;U(this,Ts,setTimeout(()=>{E(this,At).isStale||this.updateResult()},r))},eg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,ue)):this.options.refetchInterval)??!1},tg=function(e){ie(this,me,og).call(this),U(this,xo,e),!(Bs||Wn(this.options.enabled,E(this,ue))===!1||!Qm(E(this,xo))||E(this,xo)===0)&&U(this,Ms,setInterval(()=>{(this.options.refetchIntervalInBackground||tv.isFocused())&&ie(this,me,nl).call(this)},E(this,xo)))},ng=function(){ie(this,me,Zm).call(this),ie(this,me,tg).call(this,ie(this,me,eg).call(this))},rg=function(){E(this,Ts)&&(clearTimeout(E(this,Ts)),U(this,Ts,void 0))},og=function(){E(this,Ms)&&(clearInterval(E(this,Ms)),U(this,Ms,void 0))},sg=function(){const e=E(this,Ht).getQueryCache().build(E(this,Ht),this.options);if(e===E(this,ue))return;const n=E(this,ue);U(this,ue,e),U(this,xc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},pC=function(e){tt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(E(this,At))}),E(this,Ht).getQueryCache().notify({query:E(this,ue),type:"observerResultsUpdated"})})},Ob);function SD(t,e){return Wn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function nw(t,e){return SD(t,e)||t.state.data!==void 0&&ig(t,e,e.refetchOnMount)}function ig(t,e,n){if(Wn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&nv(t,e)}return!1}function rw(t,e,n,r){return(t!==e||Wn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&nv(t,n)}function nv(t,e){return Wn(e.enabled,t)!==!1&&t.isStaleByTime(Ii(e.staleTime,t))}function kD(t,e){return!Md(t.getCurrentResult(),e)}var wo,bo,Vt,Mr,Ir,Bu,ag,jb,CD=(jb=class extends Ca{constructor(n,r){super();ee(this,Ir);ee(this,wo);ee(this,bo);ee(this,Vt);ee(this,Mr);U(this,wo,n),this.setOptions(r),this.bindMethods(),ie(this,Ir,Bu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var o;const r=this.options;this.options=E(this,wo).defaultMutationOptions(n),Md(this.options,r)||E(this,wo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Vt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Hs(r.mutationKey)!==Hs(this.options.mutationKey)?this.reset():((o=E(this,Vt))==null?void 0:o.state.status)==="pending"&&E(this,Vt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=E(this,Vt))==null||n.removeObserver(this)}onMutationUpdate(n){ie(this,Ir,Bu).call(this),ie(this,Ir,ag).call(this,n)}getCurrentResult(){return E(this,bo)}reset(){var n;(n=E(this,Vt))==null||n.removeObserver(this),U(this,Vt,void 0),ie(this,Ir,Bu).call(this),ie(this,Ir,ag).call(this)}mutate(n,r){var o;return U(this,Mr,r),(o=E(this,Vt))==null||o.removeObserver(this),U(this,Vt,E(this,wo).getMutationCache().build(E(this,wo),this.options)),E(this,Vt).addObserver(this),E(this,Vt).execute(n)}},wo=new WeakMap,bo=new WeakMap,Vt=new WeakMap,Mr=new WeakMap,Ir=new WeakSet,Bu=function(){var r;const n=((r=E(this,Vt))==null?void 0:r.state)??hC();U(this,bo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ag=function(n){tt.batch(()=>{var r,o,s,i,a,l,c,d;if(E(this,Mr)&&this.hasListeners()){const f=E(this,bo).variables,h=E(this,bo).context;(n==null?void 0:n.type)==="success"?((o=(r=E(this,Mr)).onSuccess)==null||o.call(r,n.data,f,h),(i=(s=E(this,Mr)).onSettled)==null||i.call(s,n.data,null,f,h)):(n==null?void 0:n.type)==="error"&&((l=(a=E(this,Mr)).onError)==null||l.call(a,n.error,f,h),(d=(c=E(this,Mr)).onSettled)==null||d.call(c,void 0,n.error,f,h))}this.listeners.forEach(f=>{f(E(this,bo))})})},jb),mC=y.createContext(void 0),Ln=t=>{const e=y.useContext(mC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ED=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(mC.Provider,{value:t,children:e})),gC=y.createContext(!1),ND=()=>y.useContext(gC);gC.Provider;function TD(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var MD=y.createContext(TD()),PD=()=>y.useContext(MD);function yC(t,e){return typeof t=="function"?t(...e):!!t}function lg(){}var AD=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},OD=t=>{y.useEffect(()=>{t.clearReset()},[t])},jD=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&yC(n,[t.error,r]),RD=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},DD=(t,e)=>t.isLoading&&t.isFetching&&!e,ID=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ow=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function LD(t,e,n){var d,f,h,p,g;const r=Ln(),o=ND(),s=PD(),i=r.defaultQueryOptions(t);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,i),i._optimisticResults=o?"isRestoring":"optimistic",RD(i),AD(i,s),OD(s);const a=!r.getQueryCache().get(i.queryHash),[l]=y.useState(()=>new e(r,i)),c=l.getOptimisticResult(i);if(y.useSyncExternalStore(y.useCallback(m=>{const v=o?lg:l.subscribe(tt.batchCalls(m));return l.updateResult(),v},[l,o]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),y.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),ID(i,c))throw ow(i,l,s);if(jD({result:c,errorResetBoundary:s,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;if((p=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||p.call(h,i,c),i.experimental_prefetchInRender&&!Bs&&DD(c,o)){const m=a?ow(i,l,s):(g=r.getQueryCache().get(i.queryHash))==null?void 0:g.promise;m==null||m.catch(lg).finally(()=>{l.updateResult()})}return i.notifyOnChangeProps?c:l.trackResult(c)}function Mn(t,e){return LD(t,bD)}function lt(t,e){const n=Ln(),[r]=y.useState(()=>new CD(n,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const o=y.useSyncExternalStore(y.useCallback(i=>r.subscribe(tt.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=y.useCallback((i,a)=>{r.mutate(i,a).catch(lg)},[r]);if(o.error&&yC(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:s,mutateAsync:o.mutate}}const _D="";console.log("[Config] Using API base URL:","(relative URLs for web)");function Ea(t){return t.startsWith("http")?t:`${_D}${t}`}/*! Capacitor: https://capacitorjs.com/ - MIT License */var fa;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(fa||(fa={}));class up extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const FD=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},zD=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:FD(t),s=()=>o()!=="web",i=f=>{const h=c.get(f);return!!(h!=null&&h.platforms.has(o())||a(f))},a=f=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},l=f=>t.console.error(f),c=new Map,d=(f,h={})=>{const p=c.get(f);if(p)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),p.proxy;const g=o(),m=a(f);let v;const x=async()=>(!v&&g in h?v=typeof h[g]=="function"?v=await h[g]():v=h[g]:e!==null&&!v&&"web"in h&&(v=typeof h.web=="function"?v=await h.web():v=h.web),v),w=(N,A)=>{var P,R;if(m){const j=m==null?void 0:m.methods.find(V=>A===V.name);if(j)return j.rtype==="promise"?V=>n.nativePromise(f,A.toString(),V):(V,D)=>n.nativeCallback(f,A.toString(),V,D);if(N)return(P=N[A])===null||P===void 0?void 0:P.bind(N)}else{if(N)return(R=N[A])===null||R===void 0?void 0:R.bind(N);throw new up(`"${f}" plugin is not implemented on ${g}`,fa.Unimplemented)}},b=N=>{let A;const P=(...R)=>{const j=x().then(V=>{const D=w(V,N);if(D){const K=D(...R);return A=K==null?void 0:K.remove,K}else throw new up(`"${f}.${N}()" is not implemented on ${g}`,fa.Unimplemented)});return N==="addListener"&&(j.remove=async()=>A()),j};return P.toString=()=>`${N.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:N,writable:!1,configurable:!1}),P},S=b("addListener"),k=b("removeListener"),T=(N,A)=>{const P=S({eventName:N},A),R=async()=>{const V=await P;k({eventName:N,callbackId:V},A)},j=new Promise(V=>P.then(()=>V({remove:R})));return j.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},j},C=new Proxy({},{get(N,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?T:S;case"removeListener":return k;default:return b(A)}}});return r[f]=C,c.set(f,{name:f,proxy:C,platforms:new Set([...Object.keys(h),...m?[g]:[]])}),C};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=o,n.handleError=l,n.isNativePlatform=s,n.isPluginAvailable=i,n.registerPlugin=d,n.Exception=up,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},$D=t=>t.Capacitor=zD(t),ys=$D(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vC=ys.registerPlugin;class xC{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,n);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const o=this.listeners[e];if(!o){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}o.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ys.Exception(e,fa.Unimplemented)}unavailable(e="not available"){return new ys.Exception(e,fa.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const o=r.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const sw=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),iw=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class BD extends xC{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[o,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=iw(o).trim(),s=iw(s).trim(),n[o]=s}),n}async setCookie(e){try{const n=sw(e.key),r=sw(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${o}; path=${s}; ${i};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}vC("CapacitorCookies",{web:()=>new BD});const HD=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const o=r.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},r.onerror=o=>n(o),r.readAsDataURL(t)}),VD=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(o=>o.toLocaleLowerCase()).reduce((o,s,i)=>(o[s]=t[e[i]],o),{})},WD=(t,e=!0)=>t?Object.entries(t).reduce((r,o)=>{const[s,i]=o;let a,l;return Array.isArray(i)?(l="",i.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${s}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(i):i,l=`${s}=${a}`),`${r}&${l}`},"").substr(1):null,UD=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),o=VD(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(o.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[i,a]of Object.entries(t.data||{}))s.set(i,a);n.body=s.toString()}else if(o.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{s.append(l,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(o.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class KD extends xC{async request(e){const n=UD(e,e.webFetchExtra),r=WD(e.params,e.shouldEncodeUrlParams),o=r?`${e.url}?${r}`:e.url,s=await fetch(o,n),i=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};i.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await s.blob(),l=await HD(c);break;case"json":l=await s.json();break;case"document":case"text":default:l=await s.text()}const d={};return s.headers.forEach((f,h)=>{d[h]=f}),{data:l,headers:d,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}vC("CapacitorHttp",{web:()=>new KD});const dp="novawriter_auth_token",Wt={getToken(){return ys.isNativePlatform()?localStorage.getItem(dp):null},setToken(t){ys.isNativePlatform()&&localStorage.setItem(dp,t)},removeToken(){ys.isNativePlatform()&&localStorage.removeItem(dp)},isNativePlatform(){return ys.isNativePlatform()}};async function wC(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Ye(t,e,n){const r=Ea(e),o=n?{"Content-Type":"application/json"}:{};if(Wt.isNativePlatform()){const i=Wt.getToken();i&&(o.Authorization=`Bearer ${i}`)}const s=await fetch(r,{method:t,headers:o,body:n?JSON.stringify(n):void 0,credentials:"include"});return await wC(s),s}const qD=({on401:t})=>async({queryKey:e})=>{const n=Ea(e.join("/")),r={};if(Wt.isNativePlatform()){const s=Wt.getToken();s&&(r.Authorization=`Bearer ${s}`)}const o=await fetch(n,{headers:r,credentials:"include"});return t==="returnNull"&&o.status===401?null:(await wC(o),await o.json())},Hn=new wD({defaultOptions:{queries:{queryFn:qD({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),GD=1,QD=1e6;let fp=0;function YD(){return fp=(fp+1)%Number.MAX_SAFE_INTEGER,fp.toString()}const hp=new Map,aw=t=>{if(hp.has(t))return;const e=setTimeout(()=>{hp.delete(t),xl({type:"REMOVE_TOAST",toastId:t})},QD);hp.set(t,e)},JD=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,GD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?aw(n):t.toasts.forEach(r=>{aw(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Hu=[];let Vu={toasts:[]};function xl(t){Vu=JD(Vu,t),Hu.forEach(e=>{e(Vu)})}function XD({...t}){const e=YD(),n=o=>xl({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>xl({type:"DISMISS_TOAST",toastId:e});return xl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:n}}function Wr(){const[t,e]=y.useState(Vu);return y.useEffect(()=>(Hu.push(e),()=>{const n=Hu.indexOf(e);n>-1&&Hu.splice(n,1)}),[t]),{...t,toast:XD,dismiss:n=>xl({type:"DISMISS_TOAST",toastId:n})}}function z(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function lw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yf(...t){return e=>{let n=!1;const r=t.map(o=>{const s=lw(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():lw(t[o],null)}}}}function de(...t){return y.useCallback(Yf(...t),t)}function ZD(t,e){const n=y.createContext(e),r=s=>{const{children:i,...a}=s,l=y.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function o(s){const i=y.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,o]}function mn(t,e=[]){let n=[];function r(s,i){const a=y.createContext(i),l=n.length;n=[...n,i];const c=f=>{var x;const{scope:h,children:p,...g}=f,m=((x=h==null?void 0:h[t])==null?void 0:x[l])||a,v=y.useMemo(()=>g,Object.values(g));return u.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[t])==null?void 0:m[l])||a,g=y.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,d]}const o=()=>{const s=n.map(i=>y.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,eI(o,...e)]}function eI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Ho(t){const e=nI(t),n=y.forwardRef((r,o)=>{const{children:s,...i}=r,a=y.Children.toArray(s),l=a.find(rI);if(l){const c=l.props.children,d=a.map(f=>f===l?y.Children.count(c)>1?y.Children.only(null):y.isValidElement(c)?c.props.children:null:f);return u.jsx(e,{...i,ref:o,children:y.isValidElement(c)?y.cloneElement(c,void 0,d):null})}return u.jsx(e,{...i,ref:o,children:s})});return n.displayName=`${t}.Slot`,n}var tI=Ho("Slot");function nI(t){const e=y.forwardRef((n,r)=>{const{children:o,...s}=n;if(y.isValidElement(o)){const i=sI(o),a=oI(s,o.props);return o.type!==y.Fragment&&(a.ref=r?Yf(r,i):i),y.cloneElement(o,a)}return y.Children.count(o)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bC=Symbol("radix.slottable");function SC(t){const e=({children:n})=>u.jsx(u.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=bC,e}function rI(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bC}function oI(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function sI(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Jf(t){const e=t+"CollectionProvider",[n,r]=mn(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:v,children:x}=m,w=fe.useRef(null),b=fe.useRef(new Map).current;return u.jsx(o,{scope:v,itemMap:b,collectionRef:w,children:x})};i.displayName=e;const a=t+"CollectionSlot",l=Ho(a),c=fe.forwardRef((m,v)=>{const{scope:x,children:w}=m,b=s(a,x),S=de(v,b.collectionRef);return u.jsx(l,{ref:S,children:w})});c.displayName=a;const d=t+"CollectionItemSlot",f="data-radix-collection-item",h=Ho(d),p=fe.forwardRef((m,v)=>{const{scope:x,children:w,...b}=m,S=fe.useRef(null),k=de(v,S),T=s(d,x);return fe.useEffect(()=>(T.itemMap.set(S,{ref:S,...b}),()=>void T.itemMap.delete(S))),u.jsx(h,{[f]:"",ref:k,children:w})});p.displayName=d;function g(m){const v=s(t+"CollectionConsumer",m);return fe.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((T,C)=>b.indexOf(T.ref.current)-b.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:c,ItemSlot:p},g,r]}var iI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],te=iI.reduce((t,e)=>{const n=Ho(`Primitive.${e}`),r=y.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function rv(t,e){t&&Zs.flushSync(()=>t.dispatchEvent(e))}function vt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function aI(t,e=globalThis==null?void 0:globalThis.document){const n=vt(t);y.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var lI="DismissableLayer",cg="dismissableLayer.update",cI="dismissableLayer.pointerDownOutside",uI="dismissableLayer.focusOutside",cw,kC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ei=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=y.useContext(kC),[d,f]=y.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),g=de(e,C=>f(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(v),w=d?m.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=x,k=fI(C=>{const N=C.target,A=[...c.branches].some(P=>P.contains(N));!S||A||(o==null||o(C),i==null||i(C),C.defaultPrevented||a==null||a())},h),T=hI(C=>{const N=C.target;[...c.branches].some(P=>P.contains(N))||(s==null||s(C),i==null||i(C),C.defaultPrevented||a==null||a())},h);return aI(C=>{w===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},h),y.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(cw=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),uw(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=cw)}},[d,h,n,c]),y.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),uw())},[d,c]),y.useEffect(()=>{const C=()=>p({});return document.addEventListener(cg,C),()=>document.removeEventListener(cg,C)},[]),u.jsx(te.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:z(t.onFocusCapture,T.onFocusCapture),onBlurCapture:z(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:z(t.onPointerDownCapture,k.onPointerDownCapture)})});ei.displayName=lI;var dI="DismissableLayerBranch",CC=y.forwardRef((t,e)=>{const n=y.useContext(kC),r=y.useRef(null),o=de(e,r);return y.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),u.jsx(te.div,{...t,ref:o})});CC.displayName=dI;function fI(t,e=globalThis==null?void 0:globalThis.document){const n=vt(t),r=y.useRef(!1),o=y.useRef(()=>{});return y.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){EC(cI,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function hI(t,e=globalThis==null?void 0:globalThis.document){const n=vt(t),r=y.useRef(!1);return y.useEffect(()=>{const o=s=>{s.target&&!r.current&&EC(uI,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function uw(){const t=new CustomEvent(cg);document.dispatchEvent(t)}function EC(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?rv(o,s):o.dispatchEvent(s)}var pI=ei,mI=CC,rt=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},gI="Portal",Na=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=y.useState(!1);rt(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?Kk.createPortal(u.jsx(te.div,{...r,ref:e}),i):null});Na.displayName=gI;function yI(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var gn=t=>{const{present:e,children:n}=t,r=vI(e),o=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),s=de(r.ref,xI(o));return typeof n=="function"||r.isPresent?y.cloneElement(o,{ref:s}):null};gn.displayName="Presence";function vI(t){const[e,n]=y.useState(),r=y.useRef({}),o=y.useRef(t),s=y.useRef("none"),i=t?"mounted":"unmounted",[a,l]=yI(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=lu(r.current);s.current=a==="mounted"?c:"none"},[a]),rt(()=>{const c=r.current,d=o.current;if(d!==t){const h=s.current,p=lu(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),rt(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,f=p=>{const m=lu(r.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!o.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=p=>{p.target===e&&(s.current=lu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function lu(t){return(t==null?void 0:t.animationName)||"none"}function xI(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Vo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=wI({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=vt(n),l=y.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else o(c)},[s,t,o,a]);return[i,l]}function wI({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,o=y.useRef(r),s=vt(e);return y.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var bI="VisuallyHidden",Tc=y.forwardRef((t,e)=>u.jsx(te.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Tc.displayName=bI;var SI=Tc,ov="ToastProvider",[sv,kI,CI]=Jf("Toast"),[NC,wK]=mn("Toast",[CI]),[EI,Xf]=NC(ov),TC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=t,[a,l]=y.useState(null),[c,d]=y.useState(0),f=y.useRef(!1),h=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ov}\`. Expected non-empty \`string\`.`),u.jsx(sv.Provider,{scope:e,children:u.jsx(EI,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>d(p=>p+1),[]),onToastRemove:y.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:i})})};TC.displayName=ov;var MC="ToastViewport",NI=["F8"],ug="toast.viewportPause",dg="toast.viewportResume",PC=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=NI,label:o="Notifications ({hotkey})",...s}=t,i=Xf(MC,n),a=kI(n),l=y.useRef(null),c=y.useRef(null),d=y.useRef(null),f=y.useRef(null),h=de(e,f,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;y.useEffect(()=>{const v=x=>{var b;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),y.useEffect(()=>{const v=l.current,x=f.current;if(g&&v&&x){const w=()=>{if(!i.isClosePausedRef.current){const T=new CustomEvent(ug);x.dispatchEvent(T),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const T=new CustomEvent(dg);x.dispatchEvent(T),i.isClosePausedRef.current=!1}},S=T=>{!v.contains(T.relatedTarget)&&b()},k=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",w),v.addEventListener("focusout",S),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",k),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[g,i.isClosePausedRef]);const m=y.useCallback(({tabbingDirection:v})=>{const w=a().map(b=>{const S=b.ref.current,k=[S,...zI(S)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return y.useEffect(()=>{const v=f.current;if(v){const x=w=>{var k,T,C;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const N=document.activeElement,A=w.shiftKey;if(w.target===v&&A){(k=c.current)==null||k.focus();return}const j=m({tabbingDirection:A?"backwards":"forwards"}),V=j.findIndex(D=>D===N);pp(j.slice(V+1))?w.preventDefault():A?(T=c.current)==null||T.focus():(C=d.current)==null||C.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[a,m]),u.jsxs(mI,{ref:l,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&u.jsx(fg,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});pp(v)}}),u.jsx(sv.Slot,{scope:n,children:u.jsx(te.ol,{tabIndex:-1,...s,ref:h})}),g&&u.jsx(fg,{ref:d,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});pp(v)}})]})});PC.displayName=MC;var AC="ToastFocusProxy",fg=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,s=Xf(AC,n);return u.jsx(Tc,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:i=>{var c;const a=i.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});fg.displayName=AC;var Zf="Toast",TI="toast.swipeStart",MI="toast.swipeMove",PI="toast.swipeCancel",AI="toast.swipeEnd",OC=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=t,[a=!0,l]=Vo({prop:r,defaultProp:o,onChange:s});return u.jsx(gn,{present:n||a,children:u.jsx(RI,{open:a,...i,ref:e,onClose:()=>l(!1),onPause:vt(t.onPause),onResume:vt(t.onResume),onSwipeStart:z(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:z(t.onSwipeMove,c=>{const{x:d,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:z(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:z(t.onSwipeEnd,c=>{const{x:d,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});OC.displayName=Zf;var[OI,jI]=NC(Zf,{onClose(){}}),RI=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...g}=t,m=Xf(Zf,n),[v,x]=y.useState(null),w=de(e,D=>x(D)),b=y.useRef(null),S=y.useRef(null),k=o||m.duration,T=y.useRef(0),C=y.useRef(k),N=y.useRef(0),{onToastAdd:A,onToastRemove:P}=m,R=vt(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),i()}),j=y.useCallback(D=>{!D||D===1/0||(window.clearTimeout(N.current),T.current=new Date().getTime(),N.current=window.setTimeout(R,D))},[R]);y.useEffect(()=>{const D=m.viewport;if(D){const K=()=>{j(C.current),c==null||c()},B=()=>{const $=new Date().getTime()-T.current;C.current=C.current-$,window.clearTimeout(N.current),l==null||l()};return D.addEventListener(ug,B),D.addEventListener(dg,K),()=>{D.removeEventListener(ug,B),D.removeEventListener(dg,K)}}},[m.viewport,k,l,c,j]),y.useEffect(()=>{s&&!m.isClosePausedRef.current&&j(k)},[s,k,m.isClosePausedRef,j]),y.useEffect(()=>(A(),()=>P()),[A,P]);const V=y.useMemo(()=>v?FC(v):null,[v]);return m.viewport?u.jsxs(u.Fragment,{children:[V&&u.jsx(DI,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),u.jsx(OI,{scope:n,onClose:R,children:Zs.createPortal(u.jsx(sv.ItemSlot,{scope:n,children:u.jsx(pI,{asChild:!0,onEscapeKeyDown:z(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||R(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(te.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:z(t.onKeyDown,D=>{D.key==="Escape"&&(a==null||a(D.nativeEvent),D.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:z(t.onPointerDown,D=>{D.button===0&&(b.current={x:D.clientX,y:D.clientY})}),onPointerMove:z(t.onPointerMove,D=>{if(!b.current)return;const K=D.clientX-b.current.x,B=D.clientY-b.current.y,$=!!S.current,M=["left","right"].includes(m.swipeDirection),O=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,F=M?O(0,K):0,G=M?0:O(0,B),re=D.pointerType==="touch"?10:2,Be={x:F,y:G},se={originalEvent:D,delta:Be};$?(S.current=Be,cu(MI,f,se,{discrete:!1})):dw(Be,m.swipeDirection,re)?(S.current=Be,cu(TI,d,se,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(K)>re||Math.abs(B)>re)&&(b.current=null)}),onPointerUp:z(t.onPointerUp,D=>{const K=S.current,B=D.target;if(B.hasPointerCapture(D.pointerId)&&B.releasePointerCapture(D.pointerId),S.current=null,b.current=null,K){const $=D.currentTarget,M={originalEvent:D,delta:K};dw(K,m.swipeDirection,m.swipeThreshold)?cu(AI,p,M,{discrete:!0}):cu(PI,h,M,{discrete:!0}),$.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),DI=t=>{const{__scopeToast:e,children:n,...r}=t,o=Xf(Zf,e),[s,i]=y.useState(!1),[a,l]=y.useState(!1);return _I(()=>i(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:u.jsx(Na,{asChild:!0,children:u.jsx(Tc,{...r,children:s&&u.jsxs(u.Fragment,{children:[o.label," ",n]})})})},II="ToastTitle",jC=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return u.jsx(te.div,{...r,ref:e})});jC.displayName=II;var LI="ToastDescription",RC=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return u.jsx(te.div,{...r,ref:e})});RC.displayName=LI;var DC="ToastAction",IC=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?u.jsx(_C,{altText:n,asChild:!0,children:u.jsx(iv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${DC}\`. Expected non-empty \`string\`.`),null)});IC.displayName=DC;var LC="ToastClose",iv=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=jI(LC,n);return u.jsx(_C,{asChild:!0,children:u.jsx(te.button,{type:"button",...r,ref:e,onClick:z(t.onClick,o.onClose)})})});iv.displayName=LC;var _C=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return u.jsx(te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function FC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),FI(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...FC(r))}}),e}function cu(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?rv(o,s):o.dispatchEvent(s)}var dw=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),s=r>o;return e==="left"||e==="right"?s&&r>n:!s&&o>n};function _I(t=()=>{}){const e=vt(t);rt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function FI(t){return t.nodeType===t.ELEMENT_NODE}function zI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var $I=TC,zC=PC,$C=OC,BC=jC,HC=RC,VC=IC,WC=iv;function UC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=UC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function KC(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=UC(t))&&(r&&(r+=" "),r+=e);return r}const fw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,hw=KC,Mc=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return hw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=e,i=Object.keys(o).map(c=>{const d=n==null?void 0:n[c],f=s==null?void 0:s[c];if(d===null)return null;const h=fw(d)||fw(f);return o[c][h]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,h]=d;return h===void 0||(c[f]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(g=>{let[m,v]=g;return Array.isArray(v)?v.includes({...s,...a}[m]):{...s,...a}[m]===v})?[...c,f,h]:c},[]);return hw(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>y.createElement("svg",{ref:l,...HI,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qC("lucide",o),...a},[...i.map(([c,d])=>y.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(t,e)=>{const n=y.forwardRef(({className:r,...o},s)=>y.createElement(VI,{ref:s,iconNode:e,className:qC(`lucide-${BI(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Z("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Z("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Z("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=Z("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Z("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=Z("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Z("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Z("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Z("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Z("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Z("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Z("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=Z("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=Z("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=Z("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=Z("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=Z("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=Z("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=Z("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=Z("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Z("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=Z("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=Z("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Z("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=Z("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=Z("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Z("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=Z("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=Z("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=Z("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),dv="-",gL=t=>{const e=vL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(dv);return a[0]===""&&a.length!==1&&a.shift(),sE(a,e)||yL(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},sE=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?sE(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(dv);return(i=e.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},yw=/^\[(.+)\]$/,yL=t=>{if(yw.test(t)){const e=yw.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},vL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return wL(Object.entries(t.classGroups),n).forEach(([s,i])=>{hg(i,r,s,e)}),r},hg=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:vw(e,o);s.classGroupId=n;return}if(typeof o=="function"){if(xL(o)){hg(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{hg(i,vw(e,s),n,r)})})},vw=(t,e)=>{let n=t;return e.split(dv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xL=t=>t.isThemeGetter,wL=(t,e)=>e?t.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[e+i,a])):s);return[n,o]}):t,bL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},iE="!",SL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],s=e.length,i=a=>{const l=[];let c=0,d=0,f;for(let v=0;v<a.length;v++){let x=a[v];if(c===0){if(x===o&&(r||a.slice(v,v+s)===e)){l.push(a.slice(d,v)),d=v+s;continue}if(x==="/"){f=v;continue}}x==="["?c++:x==="]"&&c--}const h=l.length===0?a:a.substring(d),p=h.startsWith(iE),g=p?h.substring(1):h,m=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:i}):i},kL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},CL=t=>({cache:bL(t.cacheSize),parseClassName:SL(t),...gL(t)}),EL=/\s+/,NL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,s=[],i=t.trim().split(EL);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let g=!!p,m=r(g?h.substring(0,p):h);if(!m){if(!g){a=c+(a.length>0?" "+a:a);continue}if(m=r(h),!m){a=c+(a.length>0?" "+a:a);continue}g=!1}const v=kL(d).join(":"),x=f?v+iE:v,w=x+m;if(s.includes(w))continue;s.push(w);const b=o(m,g);for(let S=0;S<b.length;++S){const k=b[S];s.push(x+k)}a=c+(a.length>0?" "+a:a)}return a};function TL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=aE(e))&&(r&&(r+=" "),r+=n);return r}const aE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aE(t[r]))&&(n&&(n+=" "),n+=e);return n};function ML(t,...e){let n,r,o,s=i;function i(l){const c=e.reduce((d,f)=>f(d),t());return n=CL(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=NL(l,n);return o(l,d),d}return function(){return s(TL.apply(null,arguments))}}const Ae=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},lE=/^\[(?:([a-z-]+):)?(.+)\]$/i,PL=/^\d+\/\d+$/,AL=new Set(["px","full","screen"]),OL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xr=t=>Li(t)||AL.has(t)||PL.test(t),Qr=t=>Ma(t,"length",VL),Li=t=>!!t&&!Number.isNaN(Number(t)),gp=t=>Ma(t,"number",Li),Wa=t=>!!t&&Number.isInteger(Number(t)),LL=t=>t.endsWith("%")&&Li(t.slice(0,-1)),oe=t=>lE.test(t),Yr=t=>OL.test(t),_L=new Set(["length","size","percentage"]),FL=t=>Ma(t,_L,cE),zL=t=>Ma(t,"position",cE),$L=new Set(["image","url"]),BL=t=>Ma(t,$L,UL),HL=t=>Ma(t,"",WL),Ua=()=>!0,Ma=(t,e,n)=>{const r=lE.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},VL=t=>jL.test(t)&&!RL.test(t),cE=()=>!1,WL=t=>DL.test(t),UL=t=>IL.test(t),KL=()=>{const t=Ae("colors"),e=Ae("spacing"),n=Ae("blur"),r=Ae("brightness"),o=Ae("borderColor"),s=Ae("borderRadius"),i=Ae("borderSpacing"),a=Ae("borderWidth"),l=Ae("contrast"),c=Ae("grayscale"),d=Ae("hueRotate"),f=Ae("invert"),h=Ae("gap"),p=Ae("gradientColorStops"),g=Ae("gradientColorStopPositions"),m=Ae("inset"),v=Ae("margin"),x=Ae("opacity"),w=Ae("padding"),b=Ae("saturate"),S=Ae("scale"),k=Ae("sepia"),T=Ae("skew"),C=Ae("space"),N=Ae("translate"),A=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",oe,e],j=()=>[oe,e],V=()=>["",xr,Qr],D=()=>["auto",Li,oe],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",oe],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Li,oe];return{cacheSize:500,separator:":",theme:{colors:[Ua],spacing:[xr,Qr],blur:["none","",Yr,oe],brightness:G(),borderColor:[t],borderRadius:["none","","full",Yr,oe],borderSpacing:j(),borderWidth:V(),contrast:G(),grayscale:O(),hueRotate:G(),invert:O(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[LL,Qr],inset:R(),margin:R(),opacity:G(),padding:j(),saturate:G(),scale:G(),sepia:O(),skew:G(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[Yr]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),oe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wa,oe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Wa,oe]}],"grid-cols":[{"grid-cols":[Ua]}],"col-start-end":[{col:["auto",{span:["full",Wa,oe]},oe]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Ua]}],"row-start-end":[{row:["auto",{span:[Wa,oe]},oe]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,e]}],"min-w":[{"min-w":[oe,e,"min","max","fit"]}],"max-w":[{"max-w":[oe,e,"none","full","min","max","fit","prose",{screen:[Yr]},Yr]}],h:[{h:[oe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Yr,Qr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gp]}],"font-family":[{font:[Ua]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",Li,gp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xr,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xr,Qr]}],"underline-offset":[{"underline-offset":["auto",xr,oe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),zL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:B()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[xr,oe]}],"outline-w":[{outline:[xr,Qr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[xr,Qr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Yr,HL]}],"shadow-color":[{shadow:[Ua]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Yr,oe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Wa,oe]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[xr,Qr,gp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qL=ML(KL);function X(...t){return qL(KC(t))}const GL=$I,uE=y.forwardRef(({className:t,...e},n)=>u.jsx(zC,{ref:n,className:X("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));uE.displayName=zC.displayName;const QL=Mc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dE=y.forwardRef(({className:t,variant:e,...n},r)=>u.jsx($C,{ref:r,className:X(QL({variant:e}),t),...n}));dE.displayName=$C.displayName;const YL=y.forwardRef(({className:t,...e},n)=>u.jsx(VC,{ref:n,className:X("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));YL.displayName=VC.displayName;const fE=y.forwardRef(({className:t,...e},n)=>u.jsx(WC,{ref:n,className:X("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:u.jsx(uv,{className:"h-4 w-4"})}));fE.displayName=WC.displayName;const hE=y.forwardRef(({className:t,...e},n)=>u.jsx(BC,{ref:n,className:X("text-sm font-semibold",t),...e}));hE.displayName=BC.displayName;const pE=y.forwardRef(({className:t,...e},n)=>u.jsx(HC,{ref:n,className:X("text-sm opacity-90",t),...e}));pE.displayName=HC.displayName;function JL(){const{toasts:t}=Wr();return u.jsxs(GL,{children:[t.map(function({id:e,title:n,description:r,action:o,...s}){return u.jsxs(dE,{...s,children:[u.jsxs("div",{className:"grid gap-1",children:[n&&u.jsx(hE,{children:n}),r&&u.jsx(pE,{children:r})]}),o,u.jsx(fE,{})]},e)}),u.jsx(uE,{})]})}var XL=Vb[" useId ".trim().toString()]||(()=>{}),ZL=0;function Qn(t){const[e,n]=y.useState(XL());return rt(()=>{t||n(r=>r??String(ZL++))},[t]),t||(e?`radix-${e}`:"")}const e_=["top","right","bottom","left"],Wo=Math.min,on=Math.max,Od=Math.round,uu=Math.floor,hr=t=>({x:t,y:t}),t_={left:"right",right:"left",bottom:"top",top:"bottom"},n_={start:"end",end:"start"};function pg(t,e,n){return on(t,Wo(e,n))}function $r(t,e){return typeof t=="function"?t(e):t}function Br(t){return t.split("-")[0]}function Pa(t){return t.split("-")[1]}function fv(t){return t==="x"?"y":"x"}function hv(t){return t==="y"?"height":"width"}function Uo(t){return["top","bottom"].includes(Br(t))?"y":"x"}function pv(t){return fv(Uo(t))}function r_(t,e,n){n===void 0&&(n=!1);const r=Pa(t),o=pv(t),s=hv(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=jd(i)),[i,jd(i)]}function o_(t){const e=jd(t);return[mg(t),e,mg(e)]}function mg(t){return t.replace(/start|end/g,e=>n_[e])}function s_(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function i_(t,e,n,r){const o=Pa(t);let s=s_(Br(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(mg)))),s}function jd(t){return t.replace(/left|right|bottom|top/g,e=>t_[e])}function a_(t){return{top:0,right:0,bottom:0,left:0,...t}}function mE(t){return typeof t!="number"?a_(t):{top:t,right:t,bottom:t,left:t}}function Rd(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function xw(t,e,n){let{reference:r,floating:o}=t;const s=Uo(e),i=pv(e),a=hv(i),l=Br(e),c=s==="y",d=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-o.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-o.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Pa(e)){case"start":p[i]-=h*(n&&c?-1:1);break;case"end":p[i]+=h*(n&&c?-1:1);break}return p}const l_=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:f}=xw(c,r,l),h=r,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:x}=a[m],{x:w,y:b,data:S,reset:k}=await x({x:d,y:f,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:i,elements:{reference:t,floating:e}});d=w??d,f=b??f,p={...p,[v]:{...p[v],...S}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(c=k.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):k.rects),{x:d,y:f}=xw(c,h,l)),m=-1)}return{x:d,y:f,placement:h,strategy:o,middlewareData:p}};async function Xl(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=$r(e,t),g=mE(p),v=a[h?f==="floating"?"reference":"floating":f],x=Rd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=Rd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(x.top-k.top+g.top)/S.y,bottom:(k.bottom-x.bottom+g.bottom)/S.y,left:(x.left-k.left+g.left)/S.x,right:(k.right-x.right+g.right)/S.x}}const c_=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=$r(t,e)||{};if(c==null)return{};const f=mE(d),h={x:n,y:r},p=pv(o),g=hv(p),m=await i.getDimensions(c),v=p==="y",x=v?"top":"left",w=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-h[p]-s.floating[g],k=h[p]-s.reference[p],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let C=T?T[b]:0;(!C||!await(i.isElement==null?void 0:i.isElement(T)))&&(C=a.floating[b]||s.floating[g]);const N=S/2-k/2,A=C/2-m[g]/2-1,P=Wo(f[x],A),R=Wo(f[w],A),j=P,V=C-m[g]-R,D=C/2-m[g]/2+N,K=pg(j,D,V),B=!l.arrow&&Pa(o)!=null&&D!==K&&s.reference[g]/2-(D<j?P:R)-m[g]/2<0,$=B?D<j?D-j:D-V:0;return{[p]:h[p]+$,data:{[p]:K,centerOffset:D-K-$,...B&&{alignmentOffset:$}},reset:B}}}),u_=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=$r(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=Br(o),w=Uo(a),b=Br(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=h||(b||!m?[jd(a)]:o_(a)),T=g!=="none";!h&&T&&k.push(...i_(a,m,g,S));const C=[a,...k],N=await Xl(e,v),A=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&A.push(N[x]),f){const D=r_(o,i,S);A.push(N[D[0]],N[D[1]])}if(P=[...P,{placement:o,overflows:A}],!A.every(D=>D<=0)){var R,j;const D=(((R=s.flip)==null?void 0:R.index)||0)+1,K=C[D];if(K)return{data:{index:D,overflows:P},reset:{placement:K}};let B=(j=P.filter($=>$.overflows[0]<=0).sort(($,M)=>$.overflows[1]-M.overflows[1])[0])==null?void 0:j.placement;if(!B)switch(p){case"bestFit":{var V;const $=(V=P.filter(M=>{if(T){const O=Uo(M.placement);return O===w||O==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(O=>O>0).reduce((O,F)=>O+F,0)]).sort((M,O)=>M[1]-O[1])[0])==null?void 0:V[0];$&&(B=$);break}case"initialPlacement":B=a;break}if(o!==B)return{reset:{placement:B}}}return{}}}};function ww(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function bw(t){return e_.some(e=>t[e]>=0)}const d_=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=$r(t,e);switch(r){case"referenceHidden":{const s=await Xl(e,{...o,elementContext:"reference"}),i=ww(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:bw(i)}}}case"escaped":{const s=await Xl(e,{...o,altBoundary:!0}),i=ww(s,n.floating);return{data:{escapedOffsets:i,escaped:bw(i)}}}default:return{}}}}};async function f_(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Br(n),a=Pa(n),l=Uo(n)==="y",c=["left","top"].includes(i)?-1:1,d=s&&l?-1:1,f=$r(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*d,y:h*c}:{x:h*c,y:p*d}}const h_=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,l=await f_(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},p_=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:v=>{let{x,y:w}=v;return{x,y:w}}},...l}=$r(t,e),c={x:n,y:r},d=await Xl(e,l),f=Uo(Br(o)),h=fv(f);let p=c[h],g=c[f];if(s){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=p+d[v],b=p-d[x];p=pg(w,p,b)}if(i){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=g+d[v],b=g-d[x];g=pg(w,g,b)}const m=a.fn({...e,[h]:p,[f]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[f]:i}}}}}},m_=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=$r(t,e),d={x:n,y:r},f=Uo(o),h=fv(f);let p=d[h],g=d[f];const m=$r(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=h==="y"?"height":"width",S=s.reference[h]-s.floating[b]+v.mainAxis,k=s.reference[h]+s.reference[b]-v.mainAxis;p<S?p=S:p>k&&(p=k)}if(c){var x,w;const b=h==="y"?"width":"height",S=["top","left"].includes(Br(o)),k=s.reference[f]-s.floating[b]+(S&&((x=i.offset)==null?void 0:x[f])||0)+(S?0:v.crossAxis),T=s.reference[f]+s.reference[b]+(S?0:((w=i.offset)==null?void 0:w[f])||0)-(S?v.crossAxis:0);g<k?g=k:g>T&&(g=T)}return{[h]:p,[f]:g}}}},g_=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:s,platform:i,elements:a}=e,{apply:l=()=>{},...c}=$r(t,e),d=await Xl(e,c),f=Br(o),h=Pa(o),p=Uo(o)==="y",{width:g,height:m}=s.floating;let v,x;f==="top"||f==="bottom"?(v=f,x=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,v=h==="end"?"top":"bottom");const w=m-d.top-d.bottom,b=g-d.left-d.right,S=Wo(m-d[v],w),k=Wo(g-d[x],b),T=!e.middlewareData.shift;let C=S,N=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=w),T&&!h){const P=on(d.left,0),R=on(d.right,0),j=on(d.top,0),V=on(d.bottom,0);p?N=g-2*(P!==0||R!==0?P+R:on(d.left,d.right)):C=m-2*(j!==0||V!==0?j+V:on(d.top,d.bottom))}await l({...e,availableWidth:N,availableHeight:C});const A=await i.getDimensions(a.floating);return g!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function th(){return typeof window<"u"}function Aa(t){return gE(t)?(t.nodeName||"").toLowerCase():"#document"}function dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vr(t){var e;return(e=(gE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gE(t){return th()?t instanceof Node||t instanceof dn(t).Node:!1}function Jn(t){return th()?t instanceof Element||t instanceof dn(t).Element:!1}function pr(t){return th()?t instanceof HTMLElement||t instanceof dn(t).HTMLElement:!1}function Sw(t){return!th()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof dn(t).ShadowRoot}function Pc(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Xn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function y_(t){return["table","td","th"].includes(Aa(t))}function nh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function mv(t){const e=gv(),n=Jn(t)?Xn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function v_(t){let e=Ko(t);for(;pr(e)&&!ha(e);){if(mv(e))return e;if(nh(e))return null;e=Ko(e)}return null}function gv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ha(t){return["html","body","#document"].includes(Aa(t))}function Xn(t){return dn(t).getComputedStyle(t)}function rh(t){return Jn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ko(t){if(Aa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Sw(t)&&t.host||vr(t);return Sw(e)?e.host:e}function yE(t){const e=Ko(t);return ha(e)?t.ownerDocument?t.ownerDocument.body:t.body:pr(e)&&Pc(e)?e:yE(e)}function Zl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=yE(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=dn(o);if(s){const a=gg(i);return e.concat(i,i.visualViewport||[],Pc(o)?o:[],a&&n?Zl(a):[])}return e.concat(o,Zl(o,[],n))}function gg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vE(t){const e=Xn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=pr(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=Od(n)!==s||Od(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function yv(t){return Jn(t)?t:t.contextElement}function _i(t){const e=yv(t);if(!pr(e))return hr(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=vE(e);let i=(s?Od(n.width):n.width)/r,a=(s?Od(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const x_=hr(0);function xE(t){const e=dn(t);return!gv()||!e.visualViewport?x_:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function w_(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==dn(t)?!1:e}function Vs(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=yv(t);let i=hr(1);e&&(r?Jn(r)&&(i=_i(r)):i=_i(t));const a=w_(s,n,r)?xE(s):hr(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,d=o.width/i.x,f=o.height/i.y;if(s){const h=dn(s),p=r&&Jn(r)?dn(r):r;let g=h,m=gg(g);for(;m&&r&&p!==g;){const v=_i(m),x=m.getBoundingClientRect(),w=Xn(m),b=x.left+(m.clientLeft+parseFloat(w.paddingLeft))*v.x,S=x.top+(m.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,f*=v.y,l+=b,c+=S,g=dn(m),m=gg(g)}}return Rd({width:d,height:f,x:l,y:c})}function vv(t,e){const n=rh(t).scrollLeft;return e?e.left+n:Vs(vr(t)).left+n}function wE(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:vv(t,r)),s=r.top+e.scrollTop;return{x:o,y:s}}function b_(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=vr(r),a=e?nh(e.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=hr(1);const d=hr(0),f=pr(r);if((f||!f&&!s)&&((Aa(r)!=="body"||Pc(i))&&(l=rh(r)),pr(r))){const p=Vs(r);c=_i(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=i&&!f&&!s?wE(i,l,!0):hr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}}function S_(t){return Array.from(t.getClientRects())}function k_(t){const e=vr(t),n=rh(t),r=t.ownerDocument.body,o=on(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=on(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+vv(t);const a=-n.scrollTop;return Xn(r).direction==="rtl"&&(i+=on(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function C_(t,e){const n=dn(t),r=vr(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=gv();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function E_(t,e){const n=Vs(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=pr(t)?_i(t):hr(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function kw(t,e,n){let r;if(e==="viewport")r=C_(t,n);else if(e==="document")r=k_(vr(t));else if(Jn(e))r=E_(e,n);else{const o=xE(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Rd(r)}function bE(t,e){const n=Ko(t);return n===e||!Jn(n)||ha(n)?!1:Xn(n).position==="fixed"||bE(n,e)}function N_(t,e){const n=e.get(t);if(n)return n;let r=Zl(t,[],!1).filter(a=>Jn(a)&&Aa(a)!=="body"),o=null;const s=Xn(t).position==="fixed";let i=s?Ko(t):t;for(;Jn(i)&&!ha(i);){const a=Xn(i),l=mv(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Pc(i)&&!l&&bE(t,i))?r=r.filter(d=>d!==i):o=a,i=Ko(i)}return e.set(t,r),r}function T_(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?nh(e)?[]:N_(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,d)=>{const f=kw(e,d,o);return c.top=on(f.top,c.top),c.right=Wo(f.right,c.right),c.bottom=Wo(f.bottom,c.bottom),c.left=on(f.left,c.left),c},kw(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function M_(t){const{width:e,height:n}=vE(t);return{width:e,height:n}}function P_(t,e,n){const r=pr(e),o=vr(e),s=n==="fixed",i=Vs(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=hr(0);if(r||!r&&!s)if((Aa(e)!=="body"||Pc(o))&&(a=rh(e)),r){const h=Vs(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&(l.x=vv(o));const c=o&&!r&&!s?wE(o,a):hr(0),d=i.left+a.scrollLeft-l.x-c.x,f=i.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:i.width,height:i.height}}function yp(t){return Xn(t).position==="static"}function Cw(t,e){if(!pr(t)||Xn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return vr(t)===n&&(n=n.ownerDocument.body),n}function SE(t,e){const n=dn(t);if(nh(t))return n;if(!pr(t)){let o=Ko(t);for(;o&&!ha(o);){if(Jn(o)&&!yp(o))return o;o=Ko(o)}return n}let r=Cw(t,e);for(;r&&y_(r)&&yp(r);)r=Cw(r,e);return r&&ha(r)&&yp(r)&&!mv(r)?n:r||v_(t)||n}const A_=async function(t){const e=this.getOffsetParent||SE,n=this.getDimensions,r=await n(t.floating);return{reference:P_(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function O_(t){return Xn(t).direction==="rtl"}const j_={convertOffsetParentRelativeRectToViewportRelativeRect:b_,getDocumentElement:vr,getClippingRect:T_,getOffsetParent:SE,getElementRects:A_,getClientRects:S_,getDimensions:M_,getScale:_i,isElement:Jn,isRTL:O_};function kE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function R_(t,e){let n=null,r;const o=vr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=c;if(a||e(),!h||!p)return;const g=uu(f),m=uu(o.clientWidth-(d+h)),v=uu(o.clientHeight-(f+p)),x=uu(d),b={rootMargin:-g+"px "+-m+"px "+-v+"px "+-x+"px",threshold:on(0,Wo(1,l))||1};let S=!0;function k(T){const C=T[0].intersectionRatio;if(C!==l){if(!S)return i();C?i(!1,C):r=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!kE(c,t.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(k,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(t)}return i(!0),s}function D_(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=yv(t),d=o||s?[...c?Zl(c):[],...Zl(e)]:[];d.forEach(x=>{o&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const f=c&&a?R_(c,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Vs(t):null;l&&v();function v(){const x=Vs(t);m&&!kE(m,x)&&n(),m=x,g=requestAnimationFrame(v)}return n(),()=>{var x;d.forEach(w=>{o&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const I_=h_,L_=p_,__=u_,F_=g_,z_=d_,Ew=c_,$_=m_,B_=(t,e,n)=>{const r=new Map,o={platform:j_,...n},s={...o.platform,_c:r};return l_(t,e,{...o,platform:s})};var Uu=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Dd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Dd(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!Dd(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function CE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nw(t,e){const n=CE(t);return Math.round(e*n)/n}function vp(t){const e=y.useRef(t);return Uu(()=>{e.current=t}),e}function H_(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=y.useState(r);Dd(h,r)||p(r);const[g,m]=y.useState(null),[v,x]=y.useState(null),w=y.useCallback(M=>{M!==T.current&&(T.current=M,m(M))},[]),b=y.useCallback(M=>{M!==C.current&&(C.current=M,x(M))},[]),S=s||g,k=i||v,T=y.useRef(null),C=y.useRef(null),N=y.useRef(d),A=l!=null,P=vp(l),R=vp(o),j=vp(c),V=y.useCallback(()=>{if(!T.current||!C.current)return;const M={placement:e,strategy:n,middleware:h};R.current&&(M.platform=R.current),B_(T.current,C.current,M).then(O=>{const F={...O,isPositioned:j.current!==!1};D.current&&!Dd(N.current,F)&&(N.current=F,Zs.flushSync(()=>{f(F)}))})},[h,e,n,R,j]);Uu(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[c]);const D=y.useRef(!1);Uu(()=>(D.current=!0,()=>{D.current=!1}),[]),Uu(()=>{if(S&&(T.current=S),k&&(C.current=k),S&&k){if(P.current)return P.current(S,k,V);V()}},[S,k,V,P,A]);const K=y.useMemo(()=>({reference:T,floating:C,setReference:w,setFloating:b}),[w,b]),B=y.useMemo(()=>({reference:S,floating:k}),[S,k]),$=y.useMemo(()=>{const M={position:n,left:0,top:0};if(!B.floating)return M;const O=Nw(B.floating,d.x),F=Nw(B.floating,d.y);return a?{...M,transform:"translate("+O+"px, "+F+"px)",...CE(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:F}},[n,a,B.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:V,refs:K,elements:B,floatingStyles:$}),[d,V,K,B,$])}const V_=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ew({element:r.current,padding:o}).fn(n):{}:r?Ew({element:r,padding:o}).fn(n):{}}}},W_=(t,e)=>({...I_(t),options:[t,e]}),U_=(t,e)=>({...L_(t),options:[t,e]}),K_=(t,e)=>({...$_(t),options:[t,e]}),q_=(t,e)=>({...__(t),options:[t,e]}),G_=(t,e)=>({...F_(t),options:[t,e]}),Q_=(t,e)=>({...z_(t),options:[t,e]}),Y_=(t,e)=>({...V_(t),options:[t,e]});var J_="Arrow",EE=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return u.jsx(te.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});EE.displayName=J_;var X_=EE;function Z_(t){const[e,n]=y.useState(void 0);return rt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var xv="Popper",[NE,ns]=mn(xv),[eF,TE]=NE(xv),ME=t=>{const{__scopePopper:e,children:n}=t,[r,o]=y.useState(null);return u.jsx(eF,{scope:e,anchor:r,onAnchorChange:o,children:n})};ME.displayName=xv;var PE="PopperAnchor",AE=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=TE(PE,n),i=y.useRef(null),a=de(e,i);return y.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:u.jsx(te.div,{...o,ref:a})});AE.displayName=PE;var wv="PopperContent",[tF,nF]=NE(wv),OE=y.forwardRef((t,e)=>{var Q,we,Me,ge,be,Se;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=TE(wv,n),[x,w]=y.useState(null),b=de(e,tn=>w(tn)),[S,k]=y.useState(null),T=Z_(S),C=(T==null?void 0:T.width)??0,N=(T==null?void 0:T.height)??0,A=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(c)?c:[c],j=R.length>0,V={padding:P,boundary:R.filter(oF),altBoundary:j},{refs:D,floatingStyles:K,placement:B,isPositioned:$,middlewareData:M}=H_({strategy:"fixed",placement:A,whileElementsMounted:(...tn)=>D_(...tn,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[W_({mainAxis:o+N,alignmentAxis:i}),l&&U_({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?K_():void 0,...V}),l&&q_({...V}),G_({...V,apply:({elements:tn,rects:er,availableWidth:Ra,availableHeight:Da})=>{const{width:Ia,height:sj}=er.reference,Hc=tn.floating.style;Hc.setProperty("--radix-popper-available-width",`${Ra}px`),Hc.setProperty("--radix-popper-available-height",`${Da}px`),Hc.setProperty("--radix-popper-anchor-width",`${Ia}px`),Hc.setProperty("--radix-popper-anchor-height",`${sj}px`)}}),S&&Y_({element:S,padding:a}),sF({arrowWidth:C,arrowHeight:N}),h&&Q_({strategy:"referenceHidden",...V})]}),[O,F]=DE(B),G=vt(g);rt(()=>{$&&(G==null||G())},[$,G]);const re=(Q=M.arrow)==null?void 0:Q.x,Be=(we=M.arrow)==null?void 0:we.y,se=((Me=M.arrow)==null?void 0:Me.centerOffset)!==0,[xt,De]=y.useState();return rt(()=>{x&&De(window.getComputedStyle(x).zIndex)},[x]),u.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:$?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xt,"--radix-popper-transform-origin":[(ge=M.transformOrigin)==null?void 0:ge.x,(be=M.transformOrigin)==null?void 0:be.y].join(" "),...((Se=M.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(tF,{scope:n,placedSide:O,onArrowChange:k,arrowX:re,arrowY:Be,shouldHideArrow:se,children:u.jsx(te.div,{"data-side":O,"data-align":F,...m,ref:b,style:{...m.style,animation:$?void 0:"none"}})})})});OE.displayName=wv;var jE="PopperArrow",rF={top:"bottom",right:"left",bottom:"top",left:"right"},RE=y.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=nF(jE,r),i=rF[s.placedSide];return u.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:u.jsx(X_,{...o,ref:n,style:{...o.style,display:"block"}})})});RE.displayName=jE;function oF(t){return t!==null}var sF=t=>({name:"transformOrigin",options:t,fn(e){var v,x,w;const{placement:n,rects:r,middlewareData:o}=e,i=((v=o.arrow)==null?void 0:v.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,d]=DE(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((x=o.arrow)==null?void 0:x.x)??0)+a/2,p=(((w=o.arrow)==null?void 0:w.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=i?f:`${h}px`,m=`${-l}px`):c==="top"?(g=i?f:`${h}px`,m=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=i?f:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,m=i?f:`${p}px`),{data:{x:g,y:m}}}});function DE(t){const[e,n="center"]=t.split("-");return[e,n]}var bv=ME,Ac=AE,oh=OE,sh=RE,[ih,bK]=mn("Tooltip",[ns]),Sv=ns(),IE="TooltipProvider",iF=700,Tw="tooltip.open",[aF,LE]=ih(IE),_E=t=>{const{__scopeTooltip:e,delayDuration:n=iF,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=t,i=y.useRef(!0),a=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),u.jsx(aF,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:y.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};_E.displayName=IE;var FE="Tooltip",[SK,ah]=ih(FE),yg="TooltipTrigger",lF=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=ah(yg,n),s=LE(yg,n),i=Sv(n),a=y.useRef(null),l=de(e,a,o.onTriggerChange),c=y.useRef(!1),d=y.useRef(!1),f=y.useCallback(()=>c.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),u.jsx(Ac,{asChild:!0,...i,children:u.jsx(te.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:z(t.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:z(t.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:z(t.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:z(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:z(t.onBlur,o.onClose),onClick:z(t.onClick,o.onClose)})})});lF.displayName=yg;var cF="TooltipPortal",[kK,uF]=ih(cF,{forceMount:void 0}),pa="TooltipContent",zE=y.forwardRef((t,e)=>{const n=uF(pa,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=t,i=ah(pa,t.__scopeTooltip);return u.jsx(gn,{present:r||i.open,children:i.disableHoverableContent?u.jsx($E,{side:o,...s,ref:e}):u.jsx(dF,{side:o,...s,ref:e})})}),dF=y.forwardRef((t,e)=>{const n=ah(pa,t.__scopeTooltip),r=LE(pa,t.__scopeTooltip),o=y.useRef(null),s=de(e,o),[i,a]=y.useState(null),{trigger:l,onClose:c}=n,d=o.current,{onPointerInTransitChange:f}=r,h=y.useCallback(()=>{a(null),f(!1)},[f]),p=y.useCallback((g,m)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},w=gF(x,v.getBoundingClientRect()),b=yF(x,w),S=vF(m.getBoundingClientRect()),k=wF([...b,...S]);a(k),f(!0)},[f]);return y.useEffect(()=>()=>h(),[h]),y.useEffect(()=>{if(l&&d){const g=v=>p(v,d),m=v=>p(v,l);return l.addEventListener("pointerleave",g),d.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",m)}}},[l,d,p,h]),y.useEffect(()=>{if(i){const g=m=>{const v=m.target,x={x:m.clientX,y:m.clientY},w=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),b=!xF(x,i);w?h():b&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,d,i,c,h]),u.jsx($E,{...t,ref:s})}),[fF,hF]=ih(FE,{isInside:!1}),pF=SC("TooltipContent"),$E=y.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=t,l=ah(pa,n),c=Sv(n),{onClose:d}=l;return y.useEffect(()=>(document.addEventListener(Tw,d),()=>document.removeEventListener(Tw,d)),[d]),y.useEffect(()=>{if(l.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),u.jsx(ei,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:u.jsxs(oh,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(pF,{children:r}),u.jsx(fF,{scope:n,isInside:!0,children:u.jsx(SI,{id:l.contentId,role:"tooltip",children:o||r})})]})})});zE.displayName=pa;var BE="TooltipArrow",mF=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Sv(n);return hF(BE,n).isInside?null:u.jsx(sh,{...o,...r,ref:e})});mF.displayName=BE;function gF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function yF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function vF(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function xF(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,d=e[i].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(o=!o)}return o}function wF(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),bF(e)}function bF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const s=e[e.length-1],i=e[e.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var SF=_E,HE=zE;const kF=SF,CF=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>u.jsx(HE,{ref:r,sideOffset:e,className:X("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));CF.displayName=HE.displayName;const VE=y.createContext(void 0);function EF({children:t}){const[e,n]=y.useState(()=>localStorage.getItem("theme")||"light");y.useEffect(()=>{const o=document.documentElement;o.classList.remove("light","dark"),o.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(o=>o==="light"?"dark":"light")};return u.jsx(VE.Provider,{value:{theme:e,toggleTheme:r},children:t})}function WE(){const t=y.useContext(VE);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}const UE=y.createContext(void 0);function NF({children:t}){const e=Ln(),{data:n,isLoading:r}=Mn({queryKey:["/api/auth/me"],retry:!1,staleTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,queryFn:async()=>{await new Promise(h=>setTimeout(h,500));const d={};if(Wt.isNativePlatform()){const h=Wt.getToken();h&&(d.Authorization=`Bearer ${h}`)}const f=await fetch(Ea("/api/auth/me"),{headers:d,credentials:"include"});if(f.status===401)return e.setQueryData(["/api/auth/me"],null),Wt.isNativePlatform()&&Wt.removeToken(),null;if(!f.ok)throw new Error(`${f.status}: ${f.statusText}`);return await f.json()}}),o=lt({mutationFn:async({email:d,password:f})=>{const p=await(await Ye("POST","/api/auth/login",{email:d,password:f})).json();return Wt.isNativePlatform()&&p.token&&Wt.setToken(p.token),p},onSuccess:async d=>{console.log("[AUTH FIX ACTIVE] Login/Register response:",d);const f={id:d.id,email:d.email,role:d.role,subscriptionTier:d.subscriptionTier};console.log("[AUTH FIX ACTIVE] Setting cache with user:",f),e.setQueryData(["/api/auth/me"],f)}}),s=lt({mutationFn:async({email:d,password:f})=>{const p=await(await Ye("POST","/api/auth/register",{email:d,password:f})).json();return Wt.isNativePlatform()&&p.token&&Wt.setToken(p.token),p},onSuccess:async d=>{console.log("[AUTH FIX ACTIVE] Login/Register response:",d);const f={id:d.id,email:d.email,role:d.role,subscriptionTier:d.subscriptionTier};console.log("[AUTH FIX ACTIVE] Setting cache with user:",f),e.setQueryData(["/api/auth/me"],f)}}),i=lt({mutationFn:async()=>{await Ye("POST","/api/auth/logout"),Wt.isNativePlatform()&&Wt.removeToken()},onSuccess:()=>{e.setQueryData(["/api/auth/me"],null)}}),a=async(d,f)=>{await o.mutateAsync({email:d,password:f})},l=async(d,f)=>{await s.mutateAsync({email:d,password:f})},c=async()=>{await i.mutateAsync()};return u.jsx(UE.Provider,{value:{user:n||null,isLoading:r,login:a,register:l,logout:c},children:t})}function ti(){const t=y.useContext(UE);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const kv=Mc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),H=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},s)=>{const i=r?tI:"button";return u.jsx(i,{className:X(kv({variant:e,size:n,className:t})),ref:s,...o})});H.displayName="Button";const pe=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));pe.displayName="Card";const ln=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("flex flex-col space-y-1.5 p-6",t),...e}));ln.displayName="CardHeader";const cn=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("text-2xl font-semibold leading-none tracking-tight",t),...e}));cn.displayName="CardTitle";const Pn=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("text-sm text-muted-foreground",t),...e}));Pn.displayName="CardDescription";const Ee=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("p-6 pt-0",t),...e}));Ee.displayName="CardContent";const TF=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("flex items-center p-6 pt-0",t),...e}));TF.displayName="CardFooter";const MF=Mc("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Fe({className:t,variant:e,...n}){return u.jsx("div",{className:X(MF({variant:e}),t),...n})}function KE(){return u.jsx("footer",{className:"border-t bg-background",children:u.jsx("div",{className:"container mx-auto px-4 py-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," NovaWriter. All rights reserved."]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx(jt,{href:"/privacy",className:"text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"link-privacy",children:"Privacy Policy"}),u.jsx(jt,{href:"/contact",className:"text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"link-contact",children:"Contact Us"})]})]})})})}function PF(){const[,t]=yr(),{theme:e,toggleTheme:n}=WE();return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("header",{className:"border-b",children:u.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[u.jsx(jt,{href:"/",children:u.jsxs("div",{className:"cursor-pointer hover:opacity-80 transition-opacity","data-testid":"link-logo-landing",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"NovaWriter"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"For Writers, By Writers."})]})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(H,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-theme-toggle",children:e==="dark"?u.jsx(rE,{className:"h-5 w-5"}):u.jsx(tE,{className:"h-5 w-5"})}),u.jsx(H,{variant:"ghost",asChild:!0,children:u.jsx(jt,{href:"/about","data-testid":"link-about-landing",children:"About"})}),u.jsx(H,{variant:"ghost",asChild:!0,children:u.jsx(jt,{href:"/contact","data-testid":"link-contact-landing",children:"Contact"})}),u.jsx(H,{variant:"ghost",onClick:()=>t("/auth?mode=login"),"data-testid":"button-login",children:"Log In"}),u.jsx(H,{onClick:()=>t("/auth?mode=register"),"data-testid":"button-signup",children:"Sign Up"})]})]})}),u.jsxs("main",{className:"container mx-auto px-4 py-16",children:[u.jsxs("section",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-5xl font-bold mb-4",children:"Write Better, Faster"}),u.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"A modern writing platform designed for all writers. Create documents, organize projects, and enhance your writing with intelligent assistance."}),u.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[u.jsx(H,{size:"lg",onClick:()=>t("/trial"),"data-testid":"button-try-editor",children:"Try Editor Free"}),u.jsx(H,{size:"lg",variant:"outline",onClick:()=>t("/auth?mode=register"),"data-testid":"button-get-started",children:"Sign Up Free"}),u.jsx(H,{size:"lg",variant:"outline",onClick:()=>t("/auth?mode=login"),"data-testid":"button-login-main",children:"Log In"})]})]}),u.jsxs("section",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:[u.jsx(pe,{className:"hover-elevate",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx(Ta,{className:"h-10 w-10 mb-4 text-primary"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Rich Text Editor"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Powerful formatting tools with a clean, distraction-free writing experience"})]})}),u.jsx(pe,{className:"hover-elevate",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx(ZI,{className:"h-10 w-10 mb-4 text-primary"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Project Organization"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Organize your work into projects and chapters for novels, books, or long-form content"})]})}),u.jsx(pe,{className:"hover-elevate",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx(Rr,{className:"h-10 w-10 mb-4 text-primary"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Writing Assistant"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Get intelligent suggestions to improve, continue, or rewrite your content"})]})}),u.jsx(pe,{className:"hover-elevate",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx(Wu,{className:"h-10 w-10 mb-4 text-primary"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Import & Export"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Import .docx and .txt files, export your work as DOCX or PDF"})]})})]}),u.jsxs("section",{className:"mb-16",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h3",{className:"text-3xl font-bold mb-2",children:"Works Written With NovaWriter"}),u.jsx("p",{className:"text-lg text-muted-foreground",children:"Real books created using our platform"})]}),u.jsx(pe,{className:"hover-elevate mb-8 bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsx(Fe,{variant:"default",className:"text-base px-4 py-1","data-testid":"badge-published",children:"Published"})}),u.jsxs("div",{className:"grid md:grid-cols-[200px_1fr] gap-6 items-start",children:[u.jsx("div",{className:"mx-auto md:mx-0",children:u.jsx("img",{src:"https://m.media-amazon.com/images/I/91Qao-+7c8L._SY522_.jpg",alt:"Echoes of the Ancients book cover",className:"rounded-lg shadow-lg w-full max-w-[200px]","data-testid":"img-book-cover"})}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("h4",{className:"text-3xl font-bold",children:"Echoes of the Ancients"}),u.jsx("p",{className:"text-lg text-muted-foreground",children:"A Journey Through The World's First Civilizations"}),u.jsx("p",{className:"text-sm",children:"From the ziggurats of Mesopotamia to the pyramids of Egypt, from the vanished streets of the Indus to the high cities of the Andesa fast, vivid tour of the world's earliest empires and why they still shape your life today."}),u.jsxs("div",{className:"flex gap-3 flex-wrap mt-2",children:[u.jsx("a",{href:"https://www.amazon.com/Echoes-Ancients-Journey-Through-Civilizations-ebook/dp/B0FWXWXN5Z",target:"_blank",rel:"noopener noreferrer","data-testid":"link-echoes-amazon",children:u.jsxs(H,{variant:"default",className:"gap-2",children:["View on Amazon ",u.jsx(mw,{className:"h-4 w-4"})]})}),u.jsx("a",{href:"https://www.etsy.com/listing/4389247621/echoes-of-the-ancients-ancient",target:"_blank",rel:"noopener noreferrer","data-testid":"link-echoes-etsy",children:u.jsxs(H,{variant:"outline",className:"gap-2",children:["View on Etsy ",u.jsx(mw,{className:"h-4 w-4"})]})})]})]})]})]})}),u.jsx("div",{className:"text-center mb-4",children:u.jsx("h4",{className:"text-xl font-semibold text-muted-foreground",children:"Currently in Progress"})}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsx(pe,{className:"hover-elevate",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx(pw,{className:"h-8 w-8 text-muted-foreground"}),u.jsx(Fe,{variant:"secondary","data-testid":"badge-in-progress-1",children:"In Progress"})]}),u.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Disclosure Day"}),u.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Currently being written with NovaWriter"})]})}),u.jsx(pe,{className:"hover-elevate",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx(pw,{className:"h-8 w-8 text-muted-foreground"}),u.jsx(Fe,{variant:"secondary","data-testid":"badge-in-progress-2",children:"In Progress"})]}),u.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Echoes of Ancient Greece"}),u.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Currently being written with NovaWriter"})]})})]})]}),u.jsxs("section",{className:"text-center bg-muted rounded-lg p-12",children:[u.jsx("h3",{className:"text-3xl font-bold mb-4",children:"Ready to start writing?"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Sign up now to access your documents, projects, and writing tools."}),u.jsx(H,{size:"lg",onClick:()=>t("/auth?mode=register"),"data-testid":"button-signup-footer",children:"Create Your Account"})]})]}),u.jsx(KE,{})]})}const ec=y.forwardRef(({className:t,type:e,...n},r)=>u.jsx("input",{type:e,className:X("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ec.displayName="Input";var AF="Label",qE=y.forwardRef((t,e)=>u.jsx(te.label,{...t,ref:e,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));qE.displayName=AF;var GE=qE;const OF=Mc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tc=y.forwardRef(({className:t,...e},n)=>u.jsx(GE,{ref:n,className:X(OF(),t),...e}));tc.displayName=GE.displayName;function jF({onLogin:t,onSignup:e,initialMode:n="login"}){const[r,o]=y.useState(n==="login"),[s,i]=y.useState(""),[a,l]=y.useState(""),c=d=>{d.preventDefault();const f=s.trim(),h=a.trim();r?t(f,h):e(f,h)};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:u.jsxs(pe,{className:"w-full max-w-md",children:[u.jsxs(ln,{className:"space-y-1 text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[u.jsx(Rr,{className:"h-8 w-8 text-primary"}),u.jsxs("div",{children:[u.jsx(cn,{className:"text-3xl font-bold",children:"NovaWriter"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"For Writers, By Writers."})]})]}),u.jsx(Pn,{children:r?"Welcome back! Sign in to your account":"Create an account to start writing"})]}),u.jsxs(Ee,{children:[u.jsxs("form",{onSubmit:c,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(tc,{htmlFor:"email",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(eE,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(ec,{id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:d=>i(d.target.value),className:"pl-10",required:!0,"data-testid":"input-email"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(tc,{htmlFor:"password",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(rL,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(ec,{id:"password",type:"password",placeholder:"",value:a,onChange:d=>l(d.target.value),className:"pl-10",required:!0,"data-testid":"input-password"})]})]}),u.jsx(H,{type:"submit",className:"w-full","data-testid":"button-submit-auth",children:r?"Sign In":"Sign Up"})]}),u.jsx("div",{className:"mt-4 text-center text-sm",children:u.jsx("button",{onClick:()=>o(!r),className:"text-primary hover:underline","data-testid":"button-toggle-auth-mode",children:r?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}function RF(){const[t,e]=yr(),{login:n,register:r,user:o,isLoading:s}=ti(),{toast:i}=Wr(),l=new URLSearchParams(window.location.search).get("mode")==="register"?"signup":"login",c=async(f,h)=>{try{await n(f,h),await new Promise(p=>setTimeout(p,300)),e("/dashboard")}catch(p){i({variant:"destructive",title:"Login failed",description:p instanceof Error?p.message:"Failed to login"})}},d=async(f,h)=>{try{await r(f,h),await new Promise(p=>setTimeout(p,300)),e("/dashboard")}catch(p){i({variant:"destructive",title:"Signup failed",description:p instanceof Error?p.message:"Failed to sign up"})}};return s?null:u.jsx(jF,{onLogin:c,onSignup:d,initialMode:l})}var DF=y.createContext(void 0);function lh(t){const e=y.useContext(DF);return t||e||"ltr"}var xp=0;function ch(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Mw()),document.body.insertAdjacentElement("beforeend",t[1]??Mw()),xp++,()=>{xp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),xp--}},[])}function Mw(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wp="focusScope.autoFocusOnMount",bp="focusScope.autoFocusOnUnmount",Pw={bubbles:!1,cancelable:!0},IF="FocusScope",Oc=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=y.useState(null),c=vt(o),d=vt(s),f=y.useRef(null),h=de(e,m=>l(m)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const S=b.target;a.contains(S)?f.current=S:to(f.current,{select:!0})},v=function(b){if(p.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||to(f.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&to(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),w.disconnect()}}},[r,a,p.paused]),y.useEffect(()=>{if(a){Ow.add(p);const m=document.activeElement;if(!a.contains(m)){const x=new CustomEvent(wp,Pw);a.addEventListener(wp,c),a.dispatchEvent(x),x.defaultPrevented||(LF(BF(QE(a)),{select:!0}),document.activeElement===m&&to(a))}return()=>{a.removeEventListener(wp,c),setTimeout(()=>{const x=new CustomEvent(bp,Pw);a.addEventListener(bp,d),a.dispatchEvent(x),x.defaultPrevented||to(m??document.body,{select:!0}),a.removeEventListener(bp,d),Ow.remove(p)},0)}}},[a,c,d,p]);const g=y.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(v&&x){const w=m.currentTarget,[b,S]=_F(w);b&&S?!m.shiftKey&&x===S?(m.preventDefault(),n&&to(b,{select:!0})):m.shiftKey&&x===b&&(m.preventDefault(),n&&to(S,{select:!0})):x===w&&m.preventDefault()}},[n,r,p.paused]);return u.jsx(te.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});Oc.displayName=IF;function LF(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(to(r,{select:e}),document.activeElement!==n)return}function _F(t){const e=QE(t),n=Aw(e,t),r=Aw(e.reverse(),t);return[n,r]}function QE(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Aw(t,e){for(const n of t)if(!FF(n,{upTo:e}))return n}function FF(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zF(t){return t instanceof HTMLInputElement&&"select"in t}function to(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&zF(t)&&e&&t.select()}}var Ow=$F();function $F(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=jw(t,e),t.unshift(e)},remove(e){var n;t=jw(t,e),(n=t[0])==null||n.resume()}}}function jw(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function BF(t){return t.filter(e=>e.tagName!=="A")}var Sp="rovingFocusGroup.onEntryFocus",HF={bubbles:!1,cancelable:!0},uh="RovingFocusGroup",[vg,YE,VF]=Jf(uh),[WF,dh]=mn(uh,[VF]),[UF,KF]=WF(uh),JE=y.forwardRef((t,e)=>u.jsx(vg.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(vg.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(qF,{...t,ref:e})})}));JE.displayName=uh;var qF=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...f}=t,h=y.useRef(null),p=de(e,h),g=lh(s),[m=null,v]=Vo({prop:i,defaultProp:a,onChange:l}),[x,w]=y.useState(!1),b=vt(c),S=YE(n),k=y.useRef(!1),[T,C]=y.useState(0);return y.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(Sp,b),()=>N.removeEventListener(Sp,b)},[b]),u.jsx(UF,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:m,onItemFocus:y.useCallback(N=>v(N),[v]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:y.useCallback(()=>C(N=>N-1),[]),children:u.jsx(te.div,{tabIndex:x||T===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:z(t.onMouseDown,()=>{k.current=!0}),onFocus:z(t.onFocus,N=>{const A=!k.current;if(N.target===N.currentTarget&&A&&!x){const P=new CustomEvent(Sp,HF);if(N.currentTarget.dispatchEvent(P),!P.defaultPrevented){const R=S().filter(B=>B.focusable),j=R.find(B=>B.active),V=R.find(B=>B.id===m),K=[j,V,...R].filter(Boolean).map(B=>B.ref.current);eN(K,d)}}k.current=!1}),onBlur:z(t.onBlur,()=>w(!1))})})}),XE="RovingFocusGroupItem",ZE=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=Qn(),l=s||a,c=KF(XE,n),d=c.currentTabStopId===l,f=YE(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return y.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),u.jsx(vg.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:u.jsx(te.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:z(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:z(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:z(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=YF(g,c.orientation,c.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=f().filter(w=>w.focusable).map(w=>w.ref.current);if(m==="last")x.reverse();else if(m==="prev"||m==="next"){m==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=c.loop?JF(x,w+1):x.slice(w+1)}setTimeout(()=>eN(x))}})})})});ZE.displayName=XE;var GF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QF(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function YF(t,e,n){const r=QF(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return GF[r]}function eN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function JF(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var tN=JE,nN=ZE,XF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ii=new WeakMap,du=new WeakMap,fu={},kp=0,rN=function(t){return t&&(t.host||rN(t.parentNode))},ZF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=rN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},e4=function(t,e,n,r){var o=ZF(e,Array.isArray(t)?t:[t]);fu[n]||(fu[n]=new WeakMap);var s=fu[n],i=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var p=h.getAttribute(r),g=p!==null&&p!=="false",m=(ii.get(h)||0)+1,v=(s.get(h)||0)+1;ii.set(h,m),s.set(h,v),i.push(h),m===1&&g&&du.set(h,!0),v===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(e),a.clear(),kp++,function(){i.forEach(function(f){var h=ii.get(f)-1,p=s.get(f)-1;ii.set(f,h),s.set(f,p),h||(du.has(f)||f.removeAttribute(r),du.delete(f)),p||f.removeAttribute(n)}),kp--,kp||(ii=new WeakMap,ii=new WeakMap,du=new WeakMap,fu={})}},fh=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=XF(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),e4(r,o,n,"aria-hidden")):function(){return null}},ur=function(){return ur=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ur.apply(this,arguments)};function oN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function t4(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ku="right-scroll-bar-position",qu="width-before-scroll-bar",n4="with-scroll-bars-hidden",r4="--removed-body-scroll-bar-size";function Cp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function o4(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var s4=typeof window<"u"?y.useLayoutEffect:y.useEffect,Rw=new WeakMap;function i4(t,e){var n=o4(null,function(r){return t.forEach(function(o){return Cp(o,r)})});return s4(function(){var r=Rw.get(n);if(r){var o=new Set(r),s=new Set(t),i=n.current;o.forEach(function(a){s.has(a)||Cp(a,null)}),s.forEach(function(a){o.has(a)||Cp(a,i)})}Rw.set(n,t)},[t]),n}function a4(t){return t}function l4(t,e){e===void 0&&(e=a4);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var i=e(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var d=i;i=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){i.push(d),c()},filter:function(d){return i=i.filter(d),n}}}};return o}function c4(t){t===void 0&&(t={});var e=l4(null);return e.options=ur({async:!0,ssr:!1},t),e}var sN=function(t){var e=t.sideCar,n=oN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,ur({},n))};sN.isSideCarExport=!0;function u4(t,e){return t.useMedium(e),sN}var iN=c4(),Ep=function(){},hh=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Ep,onWheelCapture:Ep,onTouchMoveCapture:Ep}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,p=t.noIsolation,g=t.inert,m=t.allowPinchZoom,v=t.as,x=v===void 0?"div":v,w=t.gapMode,b=oN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,k=i4([n,e]),T=ur(ur({},b),o);return y.createElement(y.Fragment,null,d&&y.createElement(S,{sideCar:iN,removeScrollBar:c,shards:f,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:w}),i?y.cloneElement(y.Children.only(a),ur(ur({},T),{ref:k})):y.createElement(x,ur({},T,{className:l,ref:k}),a))});hh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hh.classNames={fullWidth:qu,zeroRight:Ku};var d4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function f4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=d4();return e&&t.setAttribute("nonce",e),t}function h4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function p4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var m4=function(){var t=0,e=null;return{add:function(n){t==0&&(e=f4())&&(h4(e,n),p4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},g4=function(){var t=m4();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},aN=function(){var t=g4(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},y4={left:0,top:0,right:0,gap:0},Np=function(t){return parseInt(t||"",10)||0},v4=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Np(n),Np(r),Np(o)]},x4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return y4;var e=v4(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},w4=aN(),Fi="data-scroll-locked",b4=function(t,e,n,r){var o=t.left,s=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(n4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Fi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ku,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(qu,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ku," .").concat(Ku,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qu," .").concat(qu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fi,`] {
    `).concat(r4,": ").concat(a,`px;
  }
`)},Dw=function(){var t=parseInt(document.body.getAttribute(Fi)||"0",10);return isFinite(t)?t:0},S4=function(){y.useEffect(function(){return document.body.setAttribute(Fi,(Dw()+1).toString()),function(){var t=Dw()-1;t<=0?document.body.removeAttribute(Fi):document.body.setAttribute(Fi,t.toString())}},[])},k4=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;S4();var s=y.useMemo(function(){return x4(o)},[o]);return y.createElement(w4,{styles:b4(s,!e,o,n?"":"!important")})},xg=!1;if(typeof window<"u")try{var hu=Object.defineProperty({},"passive",{get:function(){return xg=!0,!0}});window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{xg=!1}var ai=xg?{passive:!1}:!1,C4=function(t){return t.tagName==="TEXTAREA"},lN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!C4(t)&&n[e]==="visible")},E4=function(t){return lN(t,"overflowY")},N4=function(t){return lN(t,"overflowX")},Iw=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=cN(t,r);if(o){var s=uN(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},T4=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},M4=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},cN=function(t,e){return t==="v"?E4(e):N4(e)},uN=function(t,e){return t==="v"?T4(e):M4(e)},P4=function(t,e){return t==="h"&&e==="rtl"?-1:1},A4=function(t,e,n,r,o){var s=P4(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,d=i>0,f=0,h=0;do{var p=uN(t,a),g=p[0],m=p[1],v=p[2],x=m-v-s*g;(g||x)&&cN(t,a)&&(f+=x,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(f)<1||!o)||!d&&(Math.abs(h)<1||!o))&&(c=!0),c},pu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Lw=function(t){return[t.deltaX,t.deltaY]},_w=function(t){return t&&"current"in t?t.current:t},O4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},j4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},R4=0,li=[];function D4(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),o=y.useState(R4++)[0],s=y.useState(aN)[0],i=y.useRef(t);y.useEffect(function(){i.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var m=t4([t.lockRef.current],(t.shards||[]).map(_w),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var x=pu(m),w=n.current,b="deltaX"in m?m.deltaX:w[0]-x[0],S="deltaY"in m?m.deltaY:w[1]-x[1],k,T=m.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&T.type==="range")return!1;var N=Iw(C,T);if(!N)return!0;if(N?k=C:(k=C==="v"?"h":"v",N=Iw(C,T)),!N)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=k),!k)return!0;var A=r.current||k;return A4(A,v,m,A==="h"?b:S,!0)},[]),l=y.useCallback(function(m){var v=m;if(!(!li.length||li[li.length-1]!==s)){var x="deltaY"in v?Lw(v):pu(v),w=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&O4(k.delta,x)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(_w).filter(Boolean).filter(function(k){return k.contains(v.target)}),S=b.length>0?a(v,b[0]):!i.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=y.useCallback(function(m,v,x,w){var b={name:m,delta:v,target:x,should:w,shadowParent:I4(x)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),d=y.useCallback(function(m){n.current=pu(m),r.current=void 0},[]),f=y.useCallback(function(m){c(m.type,Lw(m),m.target,a(m,t.lockRef.current))},[]),h=y.useCallback(function(m){c(m.type,pu(m),m.target,a(m,t.lockRef.current))},[]);y.useEffect(function(){return li.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ai),document.addEventListener("touchmove",l,ai),document.addEventListener("touchstart",d,ai),function(){li=li.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,ai),document.removeEventListener("touchmove",l,ai),document.removeEventListener("touchstart",d,ai)}},[]);var p=t.removeScrollBar,g=t.inert;return y.createElement(y.Fragment,null,g?y.createElement(s,{styles:j4(o)}):null,p?y.createElement(k4,{gapMode:t.gapMode}):null)}function I4(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const L4=u4(iN,D4);var jc=y.forwardRef(function(t,e){return y.createElement(hh,ur({},t,{ref:e,sideCar:L4}))});jc.classNames=hh.classNames;var wg=["Enter"," "],_4=["ArrowDown","PageUp","Home"],dN=["ArrowUp","PageDown","End"],F4=[..._4,...dN],z4={ltr:[...wg,"ArrowRight"],rtl:[...wg,"ArrowLeft"]},$4={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rc="Menu",[nc,B4,H4]=Jf(Rc),[ni,fN]=mn(Rc,[H4,ns,dh]),ph=ns(),hN=dh(),[V4,ri]=ni(Rc),[W4,Dc]=ni(Rc),pN=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=ph(e),[l,c]=y.useState(null),d=y.useRef(!1),f=vt(s),h=lh(o);return y.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),u.jsx(bv,{...a,children:u.jsx(V4,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:c,children:u.jsx(W4,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:i,children:r})})})};pN.displayName=Rc;var U4="MenuAnchor",Cv=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=ph(n);return u.jsx(Ac,{...o,...r,ref:e})});Cv.displayName=U4;var Ev="MenuPortal",[K4,mN]=ni(Ev,{forceMount:void 0}),gN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=ri(Ev,e);return u.jsx(K4,{scope:e,forceMount:n,children:u.jsx(gn,{present:n||s.open,children:u.jsx(Na,{asChild:!0,container:o,children:r})})})};gN.displayName=Ev;var An="MenuContent",[q4,Nv]=ni(An),yN=y.forwardRef((t,e)=>{const n=mN(An,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ri(An,t.__scopeMenu),i=Dc(An,t.__scopeMenu);return u.jsx(nc.Provider,{scope:t.__scopeMenu,children:u.jsx(gn,{present:r||s.open,children:u.jsx(nc.Slot,{scope:t.__scopeMenu,children:i.modal?u.jsx(G4,{...o,ref:e}):u.jsx(Q4,{...o,ref:e})})})})}),G4=y.forwardRef((t,e)=>{const n=ri(An,t.__scopeMenu),r=y.useRef(null),o=de(e,r);return y.useEffect(()=>{const s=r.current;if(s)return fh(s)},[]),u.jsx(Tv,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:z(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Q4=y.forwardRef((t,e)=>{const n=ri(An,t.__scopeMenu);return u.jsx(Tv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Y4=Ho("MenuContent.ScrollLock"),Tv=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...m}=t,v=ri(An,n),x=Dc(An,n),w=ph(n),b=hN(n),S=B4(n),[k,T]=y.useState(null),C=y.useRef(null),N=de(e,C,v.onContentChange),A=y.useRef(0),P=y.useRef(""),R=y.useRef(0),j=y.useRef(null),V=y.useRef("right"),D=y.useRef(0),K=g?jc:y.Fragment,B=g?{as:Y4,allowPinchZoom:!0}:void 0,$=O=>{var Q,we;const F=P.current+O,G=S().filter(Me=>!Me.disabled),re=document.activeElement,Be=(Q=G.find(Me=>Me.ref.current===re))==null?void 0:Q.textValue,se=G.map(Me=>Me.textValue),xt=l3(se,F,Be),De=(we=G.find(Me=>Me.textValue===xt))==null?void 0:we.ref.current;(function Me(ge){P.current=ge,window.clearTimeout(A.current),ge!==""&&(A.current=window.setTimeout(()=>Me(""),1e3))})(F),De&&setTimeout(()=>De.focus())};y.useEffect(()=>()=>window.clearTimeout(A.current),[]),ch();const M=y.useCallback(O=>{var G,re;return V.current===((G=j.current)==null?void 0:G.side)&&u3(O,(re=j.current)==null?void 0:re.area)},[]);return u.jsx(q4,{scope:n,searchRef:P,onItemEnter:y.useCallback(O=>{M(O)&&O.preventDefault()},[M]),onItemLeave:y.useCallback(O=>{var F;M(O)||((F=C.current)==null||F.focus(),T(null))},[M]),onTriggerLeave:y.useCallback(O=>{M(O)&&O.preventDefault()},[M]),pointerGraceTimerRef:R,onPointerGraceIntentChange:y.useCallback(O=>{j.current=O},[]),children:u.jsx(K,{...B,children:u.jsx(Oc,{asChild:!0,trapped:o,onMountAutoFocus:z(s,O=>{var F;O.preventDefault(),(F=C.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:u.jsx(ei,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:u.jsx(tN,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:T,onEntryFocus:z(l,O=>{x.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(oh,{role:"menu","aria-orientation":"vertical","data-state":RN(v.open),"data-radix-menu-content":"",dir:x.dir,...w,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:z(m.onKeyDown,O=>{const G=O.target.closest("[data-radix-menu-content]")===O.currentTarget,re=O.ctrlKey||O.altKey||O.metaKey,Be=O.key.length===1;G&&(O.key==="Tab"&&O.preventDefault(),!re&&Be&&$(O.key));const se=C.current;if(O.target!==se||!F4.includes(O.key))return;O.preventDefault();const De=S().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);dN.includes(O.key)&&De.reverse(),i3(De)}),onBlur:z(t.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(A.current),P.current="")}),onPointerMove:z(t.onPointerMove,rc(O=>{const F=O.target,G=D.current!==O.clientX;if(O.currentTarget.contains(F)&&G){const re=O.clientX>D.current?"right":"left";V.current=re,D.current=O.clientX}}))})})})})})})});yN.displayName=An;var J4="MenuGroup",Mv=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(te.div,{role:"group",...r,ref:e})});Mv.displayName=J4;var X4="MenuLabel",vN=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(te.div,{...r,ref:e})});vN.displayName=X4;var Id="MenuItem",Fw="menu.itemSelect",mh=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=y.useRef(null),i=Dc(Id,t.__scopeMenu),a=Nv(Id,t.__scopeMenu),l=de(e,s),c=y.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const h=new CustomEvent(Fw,{bubbles:!0,cancelable:!0});f.addEventListener(Fw,p=>r==null?void 0:r(p),{once:!0}),rv(f,h),h.defaultPrevented?c.current=!1:i.onClose()}};return u.jsx(xN,{...o,ref:l,disabled:n,onClick:z(t.onClick,d),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),c.current=!0},onPointerUp:z(t.onPointerUp,f=>{var h;c.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:z(t.onKeyDown,f=>{const h=a.searchRef.current!=="";n||h&&f.key===" "||wg.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});mh.displayName=Id;var xN=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=Nv(Id,n),a=hN(n),l=y.useRef(null),c=de(e,l),[d,f]=y.useState(!1),[h,p]=y.useState("");return y.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),u.jsx(nc.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:u.jsx(nN,{asChild:!0,...a,focusable:!r,children:u.jsx(te.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:z(t.onPointerMove,rc(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:z(t.onPointerLeave,rc(g=>i.onItemLeave(g))),onFocus:z(t.onFocus,()=>f(!0)),onBlur:z(t.onBlur,()=>f(!1))})})})}),Z4="MenuCheckboxItem",wN=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return u.jsx(EN,{scope:t.__scopeMenu,checked:n,children:u.jsx(mh,{role:"menuitemcheckbox","aria-checked":Ld(n)?"mixed":n,...o,ref:e,"data-state":Av(n),onSelect:z(o.onSelect,()=>r==null?void 0:r(Ld(n)?!0:!n),{checkForDefaultPrevented:!1})})})});wN.displayName=Z4;var bN="MenuRadioGroup",[e3,t3]=ni(bN,{value:void 0,onValueChange:()=>{}}),SN=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=vt(r);return u.jsx(e3,{scope:t.__scopeMenu,value:n,onValueChange:s,children:u.jsx(Mv,{...o,ref:e})})});SN.displayName=bN;var kN="MenuRadioItem",CN=y.forwardRef((t,e)=>{const{value:n,...r}=t,o=t3(kN,t.__scopeMenu),s=n===o.value;return u.jsx(EN,{scope:t.__scopeMenu,checked:s,children:u.jsx(mh,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Av(s),onSelect:z(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});CN.displayName=kN;var Pv="MenuItemIndicator",[EN,n3]=ni(Pv,{checked:!1}),NN=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=n3(Pv,n);return u.jsx(gn,{present:r||Ld(s.checked)||s.checked===!0,children:u.jsx(te.span,{...o,ref:e,"data-state":Av(s.checked)})})});NN.displayName=Pv;var r3="MenuSeparator",TN=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(te.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});TN.displayName=r3;var o3="MenuArrow",MN=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=ph(n);return u.jsx(sh,{...o,...r,ref:e})});MN.displayName=o3;var s3="MenuSub",[CK,PN]=ni(s3),ol="MenuSubTrigger",AN=y.forwardRef((t,e)=>{const n=ri(ol,t.__scopeMenu),r=Dc(ol,t.__scopeMenu),o=PN(ol,t.__scopeMenu),s=Nv(ol,t.__scopeMenu),i=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},d=y.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),u.jsx(Cv,{asChild:!0,...c,children:u.jsx(xN,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":RN(n.open),...t,ref:Yf(e,o.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:z(t.onPointerMove,rc(f=>{s.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:z(t.onPointerLeave,rc(f=>{var p,g;d();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",x=v?-5:5,w=h[v?"left":"right"],b=h[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:z(t.onKeyDown,f=>{var p;const h=s.searchRef.current!=="";t.disabled||h&&f.key===" "||z4[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});AN.displayName=ol;var ON="MenuSubContent",jN=y.forwardRef((t,e)=>{const n=mN(An,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ri(An,t.__scopeMenu),i=Dc(An,t.__scopeMenu),a=PN(ON,t.__scopeMenu),l=y.useRef(null),c=de(e,l);return u.jsx(nc.Provider,{scope:t.__scopeMenu,children:u.jsx(gn,{present:r||s.open,children:u.jsx(nc.Slot,{scope:t.__scopeMenu,children:u.jsx(Tv,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:z(t.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:z(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:z(t.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),h=$4[i.dir].includes(d.key);f&&h&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});jN.displayName=ON;function RN(t){return t?"open":"closed"}function Ld(t){return t==="indeterminate"}function Av(t){return Ld(t)?"indeterminate":t?"checked":"unchecked"}function i3(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function a3(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function l3(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=a3(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function c3(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,d=e[i].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(o=!o)}return o}function u3(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return c3(n,e)}function rc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var d3=pN,f3=Cv,h3=gN,p3=yN,m3=Mv,g3=vN,y3=mh,v3=wN,x3=SN,w3=CN,b3=NN,S3=TN,k3=MN,C3=AN,E3=jN,Ov="DropdownMenu",[N3,EK]=mn(Ov,[fN]),$t=fN(),[T3,DN]=N3(Ov),IN=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=$t(e),c=y.useRef(null),[d=!1,f]=Vo({prop:o,defaultProp:s,onChange:i});return u.jsx(T3,{scope:e,triggerId:Qn(),triggerRef:c,contentId:Qn(),open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(h=>!h),[f]),modal:a,children:u.jsx(d3,{...l,open:d,onOpenChange:f,dir:r,modal:a,children:n})})};IN.displayName=Ov;var LN="DropdownMenuTrigger",_N=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,s=DN(LN,n),i=$t(n);return u.jsx(f3,{asChild:!0,...i,children:u.jsx(te.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Yf(e,s.triggerRef),onPointerDown:z(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:z(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});_N.displayName=LN;var M3="DropdownMenuPortal",FN=t=>{const{__scopeDropdownMenu:e,...n}=t,r=$t(e);return u.jsx(h3,{...r,...n})};FN.displayName=M3;var zN="DropdownMenuContent",$N=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=DN(zN,n),s=$t(n),i=y.useRef(!1);return u.jsx(p3,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:e,onCloseAutoFocus:z(t.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:z(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!o.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$N.displayName=zN;var P3="DropdownMenuGroup",A3=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(m3,{...o,...r,ref:e})});A3.displayName=P3;var O3="DropdownMenuLabel",BN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(g3,{...o,...r,ref:e})});BN.displayName=O3;var j3="DropdownMenuItem",HN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(y3,{...o,...r,ref:e})});HN.displayName=j3;var R3="DropdownMenuCheckboxItem",VN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(v3,{...o,...r,ref:e})});VN.displayName=R3;var D3="DropdownMenuRadioGroup",I3=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(x3,{...o,...r,ref:e})});I3.displayName=D3;var L3="DropdownMenuRadioItem",WN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(w3,{...o,...r,ref:e})});WN.displayName=L3;var _3="DropdownMenuItemIndicator",UN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(b3,{...o,...r,ref:e})});UN.displayName=_3;var F3="DropdownMenuSeparator",KN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(S3,{...o,...r,ref:e})});KN.displayName=F3;var z3="DropdownMenuArrow",$3=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(k3,{...o,...r,ref:e})});$3.displayName=z3;var B3="DropdownMenuSubTrigger",qN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(C3,{...o,...r,ref:e})});qN.displayName=B3;var H3="DropdownMenuSubContent",GN=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$t(n);return u.jsx(E3,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GN.displayName=H3;var V3=IN,W3=_N,U3=FN,QN=$N,YN=BN,JN=HN,XN=VN,ZN=WN,eT=UN,tT=KN,nT=qN,rT=GN;const qo=V3,Go=W3,K3=y.forwardRef(({className:t,inset:e,children:n,...r},o)=>u.jsxs(nT,{ref:o,className:X("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,u.jsx(cv,{className:"ml-auto"})]}));K3.displayName=nT.displayName;const q3=y.forwardRef(({className:t,...e},n)=>u.jsx(rT,{ref:n,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));q3.displayName=rT.displayName;const Hr=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>u.jsx(U3,{children:u.jsx(QN,{ref:r,sideOffset:e,className:X("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Hr.displayName=QN.displayName;const st=y.forwardRef(({className:t,inset:e,...n},r)=>u.jsx(JN,{ref:r,className:X("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));st.displayName=JN.displayName;const G3=y.forwardRef(({className:t,children:e,checked:n,...r},o)=>u.jsxs(XN,{ref:o,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(eT,{children:u.jsx(av,{className:"h-4 w-4"})})}),e]}));G3.displayName=XN.displayName;const Q3=y.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(ZN,{ref:r,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(eT,{children:u.jsx(YI,{className:"h-2 w-2 fill-current"})})}),e]}));Q3.displayName=ZN.displayName;const Y3=y.forwardRef(({className:t,inset:e,...n},r)=>u.jsx(YN,{ref:r,className:X("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Y3.displayName=YN.displayName;const oc=y.forwardRef(({className:t,...e},n)=>u.jsx(tT,{ref:n,className:X("-mx-1 my-1 h-px bg-muted",t),...e}));oc.displayName=tT.displayName;function J3({id:t,title:e,preview:n,lastEdited:r,wordCount:o,onClick:s,onRename:i,onDelete:a}){return u.jsxs(pe,{className:"p-4 hover-elevate cursor-pointer transition-all",onClick:s,"data-testid":`card-document-${t}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsx(Ta,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),u.jsx("h3",{className:"font-semibold truncate","data-testid":`text-title-${t}`,children:e})]}),u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,onClick:l=>l.stopPropagation(),children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0","data-testid":`button-menu-${t}`,children:u.jsx(Yl,{className:"h-4 w-4"})})}),u.jsxs(Hr,{align:"end",children:[u.jsxs(st,{onClick:l=>{l.stopPropagation(),i()},"data-testid":`button-rename-${t}`,children:[u.jsx(nE,{className:"h-4 w-4 mr-2"}),"Rename"]}),u.jsxs(st,{onClick:l=>{l.stopPropagation(),a()},className:"text-destructive","data-testid":`button-delete-${t}`,children:[u.jsx(eh,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),u.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-3",children:n}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[u.jsx("span",{children:r}),u.jsxs(Fe,{variant:"secondary",className:"text-xs",children:[o," words"]})]})]})}function jv(){const{theme:t,toggleTheme:e}=WE();return u.jsx(H,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-theme-toggle",children:t==="light"?u.jsx(tE,{className:"h-5 w-5"}):u.jsx(rE,{className:"h-5 w-5"})})}var Rv="Avatar",[X3,NK]=mn(Rv),[Z3,oT]=X3(Rv),sT=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[o,s]=y.useState("idle");return u.jsx(Z3,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:u.jsx(te.span,{...r,ref:e})})});sT.displayName=Rv;var iT="AvatarImage",aT=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=t,i=oT(iT,n),a=ez(r,s),l=vt(c=>{o(c),i.onImageLoadingStatusChange(c)});return rt(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?u.jsx(te.img,{...s,ref:e,src:r}):null});aT.displayName=iT;var lT="AvatarFallback",cT=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=t,s=oT(lT,n),[i,a]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?u.jsx(te.span,{...o,ref:e}):null});cT.displayName=lT;function zw(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ez(t,{referrerPolicy:e,crossOrigin:n}){const r=nz(),o=y.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[i,a]=y.useState(()=>zw(s,t));return rt(()=>{a(zw(s,t))},[s,t]),rt(()=>{const l=f=>()=>{a(f)};if(!s)return;const c=l("loaded"),d=l("error");return s.addEventListener("load",c),s.addEventListener("error",d),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",c),s.removeEventListener("error",d)}},[s,n,e]),i}function tz(){return()=>{}}function nz(){return y.useSyncExternalStore(tz,()=>!0,()=>!1)}var uT=sT,dT=aT,fT=cT;const Dv=y.forwardRef(({className:t,...e},n)=>u.jsx(uT,{ref:n,className:X(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));Dv.displayName=uT.displayName;const rz=y.forwardRef(({className:t,...e},n)=>u.jsx(dT,{ref:n,className:X("aspect-square h-full w-full",t),...e}));rz.displayName=dT.displayName;const Iv=y.forwardRef(({className:t,...e},n)=>u.jsx(fT,{ref:n,className:X("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Iv.displayName=fT.displayName;var Lv="Tabs",[oz,TK]=mn(Lv,[dh]),hT=dh(),[sz,_v]=oz(Lv),pT=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=lh(a),[f,h]=Vo({prop:r,onChange:o,defaultProp:s});return u.jsx(sz,{scope:n,baseId:Qn(),value:f,onValueChange:h,orientation:i,dir:d,activationMode:l,children:u.jsx(te.div,{dir:d,"data-orientation":i,...c,ref:e})})});pT.displayName=Lv;var mT="TabsList",gT=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,s=_v(mT,n),i=hT(n);return u.jsx(tN,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:u.jsx(te.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:e})})});gT.displayName=mT;var yT="TabsTrigger",vT=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...s}=t,i=_v(yT,n),a=hT(n),l=bT(i.baseId,r),c=ST(i.baseId,r),d=r===i.value;return u.jsx(nN,{asChild:!0,...a,focusable:!o,active:d,children:u.jsx(te.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...s,ref:e,onMouseDown:z(t.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:z(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:z(t.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!o&&f&&i.onValueChange(r)})})})});vT.displayName=yT;var xT="TabsContent",wT=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:o,children:s,...i}=t,a=_v(xT,n),l=bT(a.baseId,r),c=ST(a.baseId,r),d=r===a.value,f=y.useRef(d);return y.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),u.jsx(gn,{present:o||d,children:({present:h})=>u.jsx(te.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&s})})});wT.displayName=xT;function bT(t,e){return`${t}-trigger-${e}`}function ST(t,e){return`${t}-content-${e}`}var iz=pT,kT=gT,CT=vT,ET=wT;const NT=iz,Fv=y.forwardRef(({className:t,...e},n)=>u.jsx(kT,{ref:n,className:X("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Fv.displayName=kT.displayName;const zi=y.forwardRef(({className:t,...e},n)=>u.jsx(CT,{ref:n,className:X("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));zi.displayName=CT.displayName;const $i=y.forwardRef(({className:t,...e},n)=>u.jsx(ET,{ref:n,className:X("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));$i.displayName=ET.displayName;function az({documents:t,projects:e,userEmail:n,userRole:r,onCreateDocument:o,onCreateProject:s,onOpenDocument:i,onOpenProject:a,onRenameDocument:l,onDeleteDocument:c,onRenameProject:d,onDeleteProject:f,onLogout:h,onImportFile:p}){const[g,m]=y.useState("projects"),v=y.useRef(null),x=n.split("@")[0].split(".").map(S=>S[0]).join("").toUpperCase().slice(0,2),w=()=>{var S;(S=v.current)==null||S.click()},b=S=>{var T;const k=(T=S.target.files)==null?void 0:T[0];k&&p&&p(k),v.current&&(v.current.value="")};return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("input",{ref:v,type:"file",accept:".docx,.pdf,.txt",onChange:b,className:"hidden","data-testid":"input-file-upload"}),u.jsx("div",{className:"border-b bg-background/95 backdrop-blur",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between",children:[u.jsx(jt,{href:"/dashboard",children:u.jsxs("div",{className:"cursor-pointer hover:opacity-80 transition-opacity","data-testid":"link-logo-dashboard",children:[u.jsx("h1",{className:"text-xl font-bold text-primary",children:"NovaWriter"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"For Writers, By Writers."})]})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(jv,{}),u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,children:u.jsx(H,{variant:"ghost",className:"h-9 w-9 rounded-full p-0","data-testid":"button-user-menu",children:u.jsx(Dv,{className:"h-9 w-9",children:u.jsx(Iv,{children:x})})})}),u.jsxs(Hr,{align:"end",children:[u.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:n}),u.jsx(oc,{}),u.jsx(st,{asChild:!0,children:u.jsx(jt,{href:"/account","data-testid":"link-account",children:"Account"})}),u.jsx(st,{asChild:!0,children:u.jsx(jt,{href:"/writing-style","data-testid":"link-writing-style",children:"Writing Style"})}),r==="admin"&&u.jsx(st,{asChild:!0,children:u.jsx(jt,{href:"/admin","data-testid":"link-admin",children:"Admin Panel"})}),u.jsx(st,{asChild:!0,children:u.jsx(jt,{href:"/contact","data-testid":"link-contact",children:"Contact Us"})}),u.jsx(st,{asChild:!0,children:u.jsx(jt,{href:"/about","data-testid":"link-about",children:"About"})}),u.jsx(oc,{}),u.jsx(st,{onClick:h,"data-testid":"button-logout",children:"Log out"})]})]})]})]})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Your Workspace"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage your documents and projects"})]}),u.jsxs(NT,{value:g,onValueChange:m,className:"w-full",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[u.jsxs(Fv,{children:[u.jsx(zi,{value:"projects","data-testid":"tab-projects",children:"Projects"}),u.jsx(zi,{value:"documents","data-testid":"tab-documents",children:"Documents"})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsxs(H,{onClick:w,variant:"outline",className:"whitespace-nowrap","data-testid":"button-import-document",children:[u.jsx(Ad,{className:"h-4 w-4 mr-2"}),"Import File"]}),u.jsxs(H,{onClick:o,className:"whitespace-nowrap","data-testid":"button-create-document",children:[u.jsx(Jl,{className:"h-4 w-4 mr-2"}),"New Document"]}),u.jsxs(H,{onClick:s,variant:"outline",className:"whitespace-nowrap","data-testid":"button-create-project",children:[u.jsx(mp,{className:"h-4 w-4 mr-2"}),"New Project"]})]})]}),u.jsx($i,{value:"projects",className:"mt-0",children:e.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-muted-foreground mb-4",children:"No projects yet. Create a project to organize your chapters!"}),u.jsxs(H,{onClick:s,children:[u.jsx(mp,{className:"h-4 w-4 mr-2"}),"Create Project"]})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(S=>u.jsxs(pe,{className:"p-4 hover-elevate cursor-pointer transition-all",onClick:()=>a(S.id),"data-testid":`card-project-${S.id}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsx(mp,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),u.jsx("h3",{className:"font-semibold truncate","data-testid":`text-title-${S.id}`,children:S.title})]}),u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,onClick:k=>k.stopPropagation(),children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0","data-testid":`button-menu-${S.id}`,children:u.jsx(Yl,{className:"h-4 w-4"})})}),u.jsxs(Hr,{align:"end",children:[u.jsxs(st,{onClick:k=>{k.stopPropagation(),d(S.id)},"data-testid":`button-rename-${S.id}`,children:[u.jsx(nE,{className:"h-4 w-4 mr-2"}),"Rename"]}),u.jsxs(st,{onClick:k=>{k.stopPropagation(),f(S.id)},className:"text-destructive","data-testid":`button-delete-${S.id}`,children:[u.jsx(eh,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.documentCount," chapters  Last edited ",S.lastEdited]})]},S.id))})}),u.jsx($i,{value:"documents",className:"mt-0",children:t.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-muted-foreground mb-4",children:"No documents yet. Create your first document to get started!"}),u.jsxs(H,{onClick:o,children:[u.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Create Document"]})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(S=>u.jsx(J3,{...S,onClick:()=>i(S.id),onRename:()=>l(S.id),onDelete:()=>c(S.id)},S.id))})})]})]}),u.jsx(KE,{})]})}function TT(){return Mn({queryKey:["/api/documents"]})}function lz(t){return Mn({queryKey:["/api/documents",t],enabled:!!t})}function MT(){const t=Ln();return lt({mutationFn:async e=>await(await Ye("POST","/api/documents",e)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/documents"]})}})}function cz(t){const e=Ln();return lt({mutationFn:async n=>await(await Ye("PATCH",`/api/documents/${t}`,n)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/documents"]}),e.invalidateQueries({queryKey:["/api/documents",t]})}})}function PT(){const t=Ln();return lt({mutationFn:async e=>{await Ye("DELETE",`/api/documents/${e}`)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/documents"]})}})}function uz(){return Mn({queryKey:["/api/projects"]})}function dz(t){return Mn({queryKey:["/api/projects",t],enabled:!!t})}function AT(){const t=Ln();return lt({mutationFn:async e=>await(await Ye("POST","/api/projects",e)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/projects"]})}})}function fz(){const t=Ln();return lt({mutationFn:async e=>{await Ye("DELETE",`/api/projects/${e}`)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/projects"]})}})}function hz(t){return Mn({queryKey:["/api/chapters",t],enabled:!!t})}function pz(){const t=Ln();return lt({mutationFn:async e=>await(await Ye("POST","/api/chapters",e)).json(),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["/api/projects",n.projectId,"chapters"]}),t.invalidateQueries({queryKey:["/api/projects",n.projectId]})}})}function mz(t){const e=Ln();return lt({mutationFn:async n=>await(await Ye("PATCH",`/api/chapters/${t}`,n)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/chapters",t]})}})}function gz(){const t=Ln();return lt({mutationFn:async e=>{await Ye("DELETE",`/api/chapters/${e}`)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/projects"]})}})}function yz(){return lt({mutationFn:async t=>(await(await Ye("POST","/api/ai/suggest",t)).json()).suggestion})}async function OT(t){const e=new FormData;e.append("file",t);const n=await fetch(Ea("/api/import"),{method:"POST",body:e,credentials:"include"});if(!n.ok){const o=await n.text();throw new Error(`Failed to import file: ${o}`)}return(await n.json()).content}async function vz(t,e){const n=await fetch(Ea("/api/export/docx"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,content:e}),credentials:"include"});if(!n.ok){const i=await n.text();throw new Error(`Failed to export document: ${i}`)}const r=await n.blob(),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`${t}.docx`,s.click(),window.URL.revokeObjectURL(o)}async function xz(t,e){const n=await fetch(Ea("/api/export/pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,content:e}),credentials:"include"});if(!n.ok){const i=await n.text();throw new Error(`Failed to export document: ${i}`)}const r=await n.blob(),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`${t}.pdf`,s.click(),window.URL.revokeObjectURL(o)}function Te(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Qo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const jT=6048e5,wz=864e5,mu=43200,$w=1440;let bz={};function Ic(){return bz}function sc(t,e){var a,l,c,d;const n=Ic(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,o=Te(t),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function _d(t){return sc(t,{weekStartsOn:1})}function RT(t){const e=Te(t),n=e.getFullYear(),r=Qo(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=_d(r),s=Qo(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=_d(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function Bw(t){const e=Te(t);return e.setHours(0,0,0,0),e}function Fd(t){const e=Te(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Sz(t,e){const n=Bw(t),r=Bw(e),o=+n-Fd(n),s=+r-Fd(r);return Math.round((o-s)/wz)}function kz(t){const e=RT(t),n=Qo(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),_d(n)}function Gu(t,e){const n=Te(t),r=Te(e),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}function Cz(t){return Qo(t,Date.now())}function Ez(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Nz(t){if(!Ez(t)&&typeof t!="number")return!1;const e=Te(t);return!isNaN(Number(e))}function Tz(t,e){const n=Te(t),r=Te(e),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function Mz(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Pz(t,e){return+Te(t)-+Te(e)}function Az(t){const e=Te(t);return e.setHours(23,59,59,999),e}function Oz(t){const e=Te(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function jz(t){const e=Te(t);return+Az(e)==+Oz(e)}function Rz(t,e){const n=Te(t),r=Te(e),o=Gu(n,r),s=Math.abs(Tz(n,r));let i;if(s<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*s);let a=Gu(n,r)===-o;jz(Te(t))&&s===1&&Gu(t,r)===1&&(a=!1),i=o*(s-Number(a))}return i===0?0:i}function Dz(t,e,n){const r=Pz(t,e)/1e3;return Mz(n==null?void 0:n.roundingMethod)(r)}function Iz(t){const e=Te(t),n=Qo(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Lz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_z=(t,e,n)=>{let r;const o=Lz[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Tp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Fz={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zz={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$z={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bz={date:Tp({formats:Fz,defaultWidth:"full"}),time:Tp({formats:zz,defaultWidth:"full"}),dateTime:Tp({formats:$z,defaultWidth:"full"})},Hz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vz=(t,e,n,r)=>Hz[t];function Ka(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const Wz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Gz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yz=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Jz={ordinalNumber:Yz,era:Ka({values:Wz,defaultWidth:"wide"}),quarter:Ka({values:Uz,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ka({values:Kz,defaultWidth:"wide"}),day:Ka({values:qz,defaultWidth:"wide"}),dayPeriod:Ka({values:Gz,defaultWidth:"wide",formattingValues:Qz,defaultFormattingWidth:"wide"})};function qa(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Zz(a,f=>f.test(i)):Xz(a,f=>f.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}function Xz(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Zz(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function e$(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const t$=/^(\d+)(th|st|nd|rd)?/i,n$=/\d+/i,r$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},o$={any:[/^b/i,/^(a|c)/i]},s$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},i$={any:[/1/i,/2/i,/3/i,/4/i]},a$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},l$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},c$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},u$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},d$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},f$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},h$={ordinalNumber:e$({matchPattern:t$,parsePattern:n$,valueCallback:t=>parseInt(t,10)}),era:qa({matchPatterns:r$,defaultMatchWidth:"wide",parsePatterns:o$,defaultParseWidth:"any"}),quarter:qa({matchPatterns:s$,defaultMatchWidth:"wide",parsePatterns:i$,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qa({matchPatterns:a$,defaultMatchWidth:"wide",parsePatterns:l$,defaultParseWidth:"any"}),day:qa({matchPatterns:c$,defaultMatchWidth:"wide",parsePatterns:u$,defaultParseWidth:"any"}),dayPeriod:qa({matchPatterns:d$,defaultMatchWidth:"any",parsePatterns:f$,defaultParseWidth:"any"})},DT={code:"en-US",formatDistance:_z,formatLong:Bz,formatRelative:Vz,localize:Jz,match:h$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function p$(t){const e=Te(t);return Sz(e,Iz(e))+1}function m$(t){const e=Te(t),n=+_d(e)-+kz(e);return Math.round(n/jT)+1}function IT(t,e){var d,f,h,p;const n=Te(t),r=n.getFullYear(),o=Ic(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((p=(h=o.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=Qo(t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=sc(i,e),l=Qo(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=sc(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function g$(t,e){var a,l,c,d;const n=Ic(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,o=IT(t,e),s=Qo(t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),sc(s,e)}function y$(t,e){const n=Te(t),r=+sc(n,e)-+g$(n,e);return Math.round(r/jT)+1}function ve(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Jr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ve(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ve(n+1,2)},d(t,e){return ve(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ve(t.getHours()%12||12,e.length)},H(t,e){return ve(t.getHours(),e.length)},m(t,e){return ve(t.getMinutes(),e.length)},s(t,e){return ve(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return ve(o,e.length)}},ci={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hw={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Jr.y(t,e)},Y:function(t,e,n,r){const o=IT(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return ve(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ve(s,e.length)},R:function(t,e){const n=RT(t);return ve(n,e.length)},u:function(t,e){const n=t.getFullYear();return ve(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ve(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ve(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Jr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ve(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=y$(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):ve(o,e.length)},I:function(t,e,n){const r=m$(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ve(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Jr.d(t,e)},D:function(t,e,n){const r=p$(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ve(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ve(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ve(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return ve(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=ci.noon:r===0?o=ci.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=ci.evening:r>=12?o=ci.afternoon:r>=4?o=ci.morning:o=ci.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Jr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Jr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ve(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ve(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Jr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Jr.s(t,e)},S:function(t,e){return Jr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Ww(r);case"XXXX":case"XX":return fs(r);case"XXXXX":case"XXX":default:return fs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Ww(r);case"xxxx":case"xx":return fs(r);case"xxxxx":case"xxx":default:return fs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Vw(r,":");case"OOOO":default:return"GMT"+fs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Vw(r,":");case"zzzz":default:return"GMT"+fs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ve(r,e.length)},T:function(t,e,n){const r=t.getTime();return ve(r,e.length)}};function Vw(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+ve(s,2)}function Ww(t,e){return t%60===0?(t>0?"-":"+")+ve(Math.abs(t)/60,2):fs(t,e)}function fs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=ve(Math.trunc(r/60),2),s=ve(r%60,2);return n+o+e+s}const Uw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LT=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},v$=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return Uw(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Uw(r,e)).replace("{{time}}",LT(o,e))},x$={p:LT,P:v$},w$=/^D+$/,b$=/^Y+$/,S$=["D","DD","YY","YYYY"];function k$(t){return w$.test(t)}function C$(t){return b$.test(t)}function E$(t,e,n){const r=N$(t,e,n);if(console.warn(r),S$.includes(t))throw new RangeError(r)}function N$(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const T$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P$=/^'([^]*?)'?$/,A$=/''/g,O$=/[a-zA-Z]/;function Kw(t,e,n){var d,f,h,p;const r=Ic(),o=r.locale??DT,s=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=r.weekStartsOn??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,a=Te(t);if(!Nz(a))throw new RangeError("Invalid time value");let l=e.match(M$).map(g=>{const m=g[0];if(m==="p"||m==="P"){const v=x$[m];return v(g,o.formatLong)}return g}).join("").match(T$).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const m=g[0];if(m==="'")return{isToken:!1,value:j$(g)};if(Hw[m])return{isToken:!0,value:g};if(m.match(O$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:g}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(g=>{if(!g.isToken)return g.value;const m=g.value;(C$(m)||k$(m))&&E$(m,e,String(t));const v=Hw[m[0]];return v(a,m,o.localize,c)}).join("")}function j$(t){const e=t.match(P$);return e?e[1].replace(A$,"'"):t}function R$(t,e,n){const r=Ic(),o=(n==null?void 0:n.locale)??r.locale??DT,s=2520,i=Gu(t,e);if(isNaN(i))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let l,c;i>0?(l=Te(e),c=Te(t)):(l=Te(t),c=Te(e));const d=Dz(c,l),f=(Fd(c)-Fd(l))/1e3,h=Math.round((d-f)/60);let p;if(h<2)return n!=null&&n.includeSeconds?d<5?o.formatDistance("lessThanXSeconds",5,a):d<10?o.formatDistance("lessThanXSeconds",10,a):d<20?o.formatDistance("lessThanXSeconds",20,a):d<40?o.formatDistance("halfAMinute",0,a):d<60?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",1,a):h===0?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",h,a);if(h<45)return o.formatDistance("xMinutes",h,a);if(h<90)return o.formatDistance("aboutXHours",1,a);if(h<$w){const g=Math.round(h/60);return o.formatDistance("aboutXHours",g,a)}else{if(h<s)return o.formatDistance("xDays",1,a);if(h<mu){const g=Math.round(h/$w);return o.formatDistance("xDays",g,a)}else if(h<mu*2)return p=Math.round(h/mu),o.formatDistance("aboutXMonths",p,a)}if(p=Rz(c,l),p<12){const g=Math.round(h/mu);return o.formatDistance("xMonths",g,a)}else{const g=p%12,m=Math.trunc(p/12);return g<3?o.formatDistance("aboutXYears",m,a):g<9?o.formatDistance("overXYears",m,a):o.formatDistance("almostXYears",m+1,a)}}function qw(t,e){return R$(t,Cz(t),e)}function D$(){const[,t]=yr(),{user:e,logout:n,isLoading:r}=ti(),{toast:o}=Wr(),s=Ln(),{data:i,isLoading:a}=TT(),{data:l,isLoading:c}=uz(),d=MT(),f=AT(),h=PT(),p=fz();y.useEffect(()=>{!r&&!e&&t("/auth")},[e,r,t]);const g=async()=>{try{const P=await d.mutateAsync({title:"Untitled Document",content:"<p>Start writing...</p>"});t(`/editor/${P.id}`)}catch(P){o({variant:"destructive",title:"Failed to create document",description:P instanceof Error?P.message:"An error occurred"})}},m=async()=>{try{await f.mutateAsync({title:"New Project"}),o({title:"Project created",description:"Your new project has been created successfully"})}catch(P){o({variant:"destructive",title:"Failed to create project",description:P instanceof Error?P.message:"An error occurred"})}},v=P=>{t(`/editor/${P}`)},x=P=>{t(`/project/${P}`)},w=async P=>{const R=prompt("Enter new title:");if(R)try{await Ye("PATCH",`/api/documents/${P}`,{title:R}),s.invalidateQueries({queryKey:["/api/documents"]}),o({title:"Document renamed",description:"Document has been renamed successfully"})}catch(j){o({variant:"destructive",title:"Failed to rename document",description:j instanceof Error?j.message:"An error occurred"})}},b=async P=>{if(confirm("Are you sure you want to delete this document?"))try{await h.mutateAsync(P),o({title:"Document deleted",description:"Document has been deleted successfully"})}catch(R){o({variant:"destructive",title:"Failed to delete document",description:R instanceof Error?R.message:"An error occurred"})}},S=async P=>{try{const R=await OT(P),j=await d.mutateAsync({title:P.name.replace(/\.[^/.]+$/,""),content:R});o({title:"File imported",description:"Your file has been imported successfully"}),t(`/editor/${j.id}`)}catch(R){o({variant:"destructive",title:"Import failed",description:R instanceof Error?R.message:"Failed to import file"})}},k=async P=>{const R=prompt("Enter new title:");if(R)try{await Ye("PATCH",`/api/projects/${P}`,{title:R}),s.invalidateQueries({queryKey:["/api/projects"]}),o({title:"Project renamed",description:"Project has been renamed successfully"})}catch(j){o({variant:"destructive",title:"Failed to rename project",description:j instanceof Error?j.message:"An error occurred"})}},T=async P=>{if(confirm("Are you sure you want to delete this project? All chapters will be deleted."))try{await p.mutateAsync(P),o({title:"Project deleted",description:"Project and all chapters have been deleted successfully"})}catch(R){o({variant:"destructive",title:"Failed to delete project",description:R instanceof Error?R.message:"An error occurred"})}},C=async()=>{try{await n(),t("/")}catch(P){o({variant:"destructive",title:"Logout failed",description:P instanceof Error?P.message:"An error occurred"})}};if(r||a||c)return null;const N=(i||[]).map(P=>({id:P.id,title:P.title,preview:P.content.replace(/<[^>]*>/g,"").substring(0,100)+"...",lastEdited:qw(new Date(P.updatedAt),{addSuffix:!0}),wordCount:P.content.split(/\s+/).length})),A=(l||[]).map(P=>{var R;return{id:P.id,title:P.title,documentCount:((R=P.chapters)==null?void 0:R.length)||0,lastEdited:qw(new Date(P.updatedAt),{addSuffix:!0})}});return u.jsx(az,{documents:N,projects:A,userEmail:(e==null?void 0:e.email)||"",userRole:e==null?void 0:e.role,onCreateDocument:g,onCreateProject:m,onOpenDocument:v,onOpenProject:x,onRenameDocument:w,onDeleteDocument:b,onRenameProject:k,onDeleteProject:T,onLogout:C,onImportFile:S})}function ht(t){this.content=t}ht.prototype={constructor:ht,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new ht(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ht(n)},addToStart:function(t,e){return new ht([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ht(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new ht(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ht.from(t),t.size?new ht(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ht.from(t),t.size?new ht(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ht.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ht.from=function(t){if(t instanceof ht)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ht(e)};function _T(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=_T(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function FT(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,d=Math.min(i.text.length,a.text.length);for(;c<d&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=FT(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class I{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new I(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new I(r,o)}cutByIndex(e,n){return e==n?I.empty:e==0&&n==this.content.length?this:new I(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new I(o,s)}addToStart(e){return new I([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new I(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return _T(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return FT(this,e,n,r)}findIndex(e){if(e==0)return gu(0,e);if(e==this.size)return gu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),s=r+o.nodeSize;if(s>=e)return s==e?gu(n+1,s):gu(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return I.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new I(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return I.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new I(n||e,r)}static from(e){if(!e)return I.empty;if(e instanceof I)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new I([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}I.empty=new I([],0);const Mp={index:0,offset:0};function gu(t,e){return Mp.index=t,Mp.offset=e,Mp}function zd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!zd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!zd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ne=class bg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return bg.none;if(e instanceof bg)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Ne.none=[];class $d extends Error{}class W{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=$T(this.content,e+this.openStart,n);return r&&new W(r,this.openStart,this.openEnd)}removeBetween(e,n){return new W(zT(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return W.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new W(I.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new W(e,r,o)}}W.empty=new W(I.empty,0,0);function zT(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(zT(s.content,e-o-1,n-o-1)))}function $T(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=$T(i.content,e-s-1,n,i);return a&&t.replaceChild(o,i.copy(a))}function I$(t,e,n){if(n.openStart>t.depth)throw new $d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new $d("Inconsistent open depths");return BT(t,e,n,0)}function BT(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=BT(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return js(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=L$(n,t);return js(s,VT(t,i,a,e,r))}else return js(s,Bd(t,e,r))}function HT(t,e){if(!e.type.compatibleContent(t.type))throw new $d("Cannot join "+e.type.name+" onto "+t.type.name)}function Sg(t,e,n){let r=t.node(n);return HT(r,e.node(n)),r}function Os(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function wl(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Os(t.nodeAfter,r),s++));for(let a=s;a<i;a++)Os(o.child(a),r);e&&e.depth==n&&e.textOffset&&Os(e.nodeBefore,r)}function js(t,e){return t.type.checkContent(e),t.copy(e)}function VT(t,e,n,r,o){let s=t.depth>o&&Sg(t,e,o+1),i=r.depth>o&&Sg(n,r,o+1),a=[];return wl(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(HT(s,i),Os(js(s,VT(t,e,n,r,o+1)),a)):(s&&Os(js(s,Bd(t,e,o+1)),a),wl(e,n,o,a),i&&Os(js(i,Bd(n,r,o+1)),a)),wl(r,null,o,a),new I(a)}function Bd(t,e,n){let r=[];if(wl(null,t,n,r),t.depth>n){let o=Sg(t,e,n+1);Os(js(o,Bd(t,e,n+1)),r)}return wl(e,null,n,r),new I(r)}function L$(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(I.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class ic{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ne.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Hd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new ic(n,r,s)}static resolveCached(e,n){let r=Gw.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else Gw.set(e,r=new _$);let o=r.elts[r.i]=ic.resolve(e,n);return r.i=(r.i+1)%F$,o}}class _${constructor(){this.elts=[],this.i=0}}const F$=12,Gw=new WeakMap;class Hd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const z$=Object.create(null);let Io=class kg{constructor(e,n,r,o=Ne.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||I.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&zd(this.attrs,n||e.defaultAttrs||z$)&&Ne.sameSet(this.marks,r||Ne.none)}copy(e=null){return e==this.content?this:new kg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new kg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return W.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new W(c,o.depth-i,s.depth-i)}replace(e,n,r){return I$(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return ic.resolveCached(this,e)}resolveNoCache(e){return ic.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),WT(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=I.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ne.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ne.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=I.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Io.prototype.text=void 0;class Vd extends Io{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):WT(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function WT(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ws{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new $$(e,n);if(r.next==null)return Ws.empty;let o=UT(r);r.next&&r.err("Unexpected trailing text");let s=q$(K$(o));return G$(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return I.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:d,next:f}=i.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let h=s(f,a.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Ws.empty=new Ws(!0);class $${constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function UT(t){let e=[];do e.push(B$(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function B$(t){let e=[];do e.push(H$(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function H$(t){let e=U$(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=V$(t,e);else break;return e}function Qw(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function V$(t,e){let n=Qw(t),r=n;return t.eat(",")&&(t.next!="}"?r=Qw(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function W$(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function U$(t){if(t.eat("(")){let e=UT(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=W$(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function K$(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let d=n();o(s(i.expr,l),d),l=d}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let d=n();r(l,d),o(s(i.expr,l),d),l=d}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function KT(t,e){return e-t}function Yw(t,e){let n=[];return r(e),n.sort(KT);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function q$(t){let e=Object.create(null);return n(Yw(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);Yw(t,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new Ws(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(KT);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function G$(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function qT(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function GT(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function QT(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function YT(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Y$(t,r,e[r]);return n}let Jw=class JT{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=YT(e,r.attrs),this.defaultAttrs=qT(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ws.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:GT(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Io(this,this.computeAttrs(e),I.from(n),Ne.setFrom(r))}createChecked(e=null,n,r){return n=I.from(n),this.checkContent(n),new Io(this,this.computeAttrs(e),n,Ne.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=I.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(I.empty,!0);return s?new Io(this,e,n.append(s),Ne.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){QT(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ne.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new JT(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Q$(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class Y${constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Q$(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class gh{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=YT(e,o.attrs),this.excluded=null;let s=qT(this.attrs);this.instance=s?new Ne(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ne(this,GT(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new gh(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){QT(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class XT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=ht.from(e.nodes),n.marks=ht.from(e.marks||{}),this.nodes=Jw.compile(this.spec.nodes,this),this.marks=gh.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=Ws.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Xw(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:Xw(this,i.split(" "))}this.nodeFromJSON=o=>Io.fromJSON(this,o),this.markFromJSON=o=>Ne.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Jw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Vd(r,r.defaultAttrs,e,Ne.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Xw(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function J$(t){return t.tag!=null}function X$(t){return t.style!=null}class Lo{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(J$(o))this.tags.push(o);else if(X$(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new e1(this,n,!1);return r.addAll(e,Ne.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new e1(this,n,!0);return r.addAll(e,Ne.none,n.from,n.to),W.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(tB(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=t1(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=t1(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Lo(e,Lo.schemaRules(e)))}}const ZT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Z$={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},eM={ol:!0,ul:!0},ac=1,Cg=2,bl=4;function Zw(t,e,n){return e!=null?(e?ac:0)|(e==="full"?Cg:0):t&&t.whitespace=="pre"?ac|Cg:n&~bl}class yu{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=Ne.none,this.match=s||(i&bl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(I.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ac)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=I.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(I.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ZT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class e1{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=Zw(null,n.preserveWhitespace,0)|(r?bl:0);o?s=new yu(o.type,o.attrs,Ne.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new yu(null,null,Ne.none,!0,null,i):s=new yu(e.schema.topNodeType,null,Ne.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&Cg?"full":this.localPreserveWS||(o.options&ac)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;eM.hasOwnProperty(i)&&this.parser.normalizeLists&&eB(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Z$.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(ZT.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n,r){let o,s;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(s);for(let i=0;i<o.length;i++)n=this.enterInner(o[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=Ne.none;for(let a of o.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):n1(a.type,e.type))&&(i=a.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=Zw(e,s,i.options);i.options&bl&&i.content.length==0&&(a|=bl);let l=Ne.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):n1(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new yu(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=ac)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function eB(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&eM.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function tB(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function t1(t){let e={};for(let n in t)e[n]=t[n];return e}function n1(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&i(d))return!0}};if(i(o.contentMatch))return!0}}class oi{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Pp(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],d=this.serializeMark(c,i.isInline,n);d&&(s.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Qu(Pp(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Qu(Pp(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return Qu(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new oi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=r1(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return r1(e.marks)}}function r1(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Pp(t){return t.document||window.document}const o1=new WeakMap;function nB(t){let e=o1.get(t);return e===void 0&&o1.set(t,e=rB(t)),e}function rB(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function Qu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=nB(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=d;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:g}=Qu(t,h,n,r);if(l.appendChild(p),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const tM=65535,nM=Math.pow(2,16);function oB(t,e){return t+e*nM}function s1(t){return t&tM}function sB(t){return(t-(t&tM))/nM}const rM=1,oM=2,Yu=4,sM=8;class Eg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&sM)>0}get deletedBefore(){return(this.delInfo&(rM|Yu))>0}get deletedAfter(){return(this.delInfo&(oM|Yu))>0}get deletedAcross(){return(this.delInfo&Yu)>0}}class sn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&sn.empty)return sn.empty}recover(e){let n=0,r=s1(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+sB(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+i],f=l+c;if(e<=f){let h=c?e==l?-1:e==f?1:n:n,p=l+o+(h<0?0:d);if(r)return p;let g=e==(n<0?l:f)?null:oB(a/3,e-l),m=e==l?oM:e==f?rM:Yu;return(n<0?e!=l:e!=f)&&(m|=sM),new Eg(p,m,g)}o+=d-c}return r?e+o:new Eg(e+o,0,null)}touches(e,n){let r=0,o=s1(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],d=this.ranges[o+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new sn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?sn.empty:new sn(e<0?[0,-e,0]:[0,0,e])}}sn.empty=new sn([]);class lc{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new lc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new lc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this._maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Eg(e,o,null)}}const Ap=Object.create(null);class Tt{getMap(){return sn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ap[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ap)throw new RangeError("Duplicate use of step JSON ID "+e);return Ap[e]=n,n.prototype.jsonID=e,n}}class Xe{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Xe(e,null)}static fail(e){return new Xe(null,e)}static fromReplace(e,n,r,o){try{return Xe.ok(e.replace(n,r,o))}catch(s){if(s instanceof $d)return Xe.fail(s.message);throw s}}}function zv(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(zv(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return I.fromArray(r)}class Co extends Tt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new W(zv(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return Xe.fromReplace(e,this.from,this.to,s)}invert(){return new Kn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Co(n.pos,r.pos,this.mark)}merge(e){return e instanceof Co&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Co(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Co(n.from,n.to,e.markFromJSON(n.mark))}}Tt.jsonID("addMark",Co);class Kn extends Tt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new W(zv(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return Xe.fromReplace(e,this.from,this.to,r)}invert(){return new Co(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Kn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Kn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Kn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Kn(n.from,n.to,e.markFromJSON(n.mark))}}Tt.jsonID("removeMark",Kn);class Eo extends Tt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Xe.fromReplace(e,this.pos,this.pos+1,new W(I.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Eo(this.pos,n.marks[o]);return new Eo(this.pos,this.mark)}}return new Us(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Eo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Eo(n.pos,e.markFromJSON(n.mark))}}Tt.jsonID("addNodeMark",Eo);class Us extends Tt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Xe.fromReplace(e,this.pos,this.pos+1,new W(I.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Eo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Us(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Us(n.pos,e.markFromJSON(n.mark))}}Tt.jsonID("removeNodeMark",Us);class it extends Tt{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Ng(e,this.from,this.to)?Xe.fail("Structure replace would overwrite content"):Xe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new sn([this.from,this.to-this.from,this.slice.size])}invert(e){return new it(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new it(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof it)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?W.empty:new W(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new it(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?W.empty:new W(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new it(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new it(n.from,n.to,W.fromJSON(e,n.slice),!!n.structure)}}Tt.jsonID("replace",it);class ct extends Tt{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Ng(e,this.from,this.gapFrom)||Ng(e,this.gapTo,this.to)))return Xe.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Xe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Xe.fromReplace(e,this.from,this.to,r):Xe.fail("Content does not fit in gap")}getMap(){return new sn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ct(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new ct(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ct(n.from,n.to,n.gapFrom,n.gapTo,W.fromJSON(e,n.slice),n.insert,!!n.structure)}}Tt.jsonID("replaceAround",ct);function Ng(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function iB(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),g=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(g)||(i&&i.to==h&&i.mark.eq(f[m])?i.to=p:o.push(i=new Kn(h,p,f[m])));a&&a.to==h?a.to=p:s.push(a=new Co(h,p,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function aB(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof gh){let c=i.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let d=0;d<l.length;d++){let f=l[d],h;for(let p=0;p<o.length;p++){let g=o[p];g.step==s-1&&f.eq(o[p].style)&&(h=g)}h?(h.to=c,h.step=s):o.push({style:f,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new Kn(i.from,i.to,i.style)))}function $v(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,f=r.matchType(c.type);if(!f)i.push(new it(a,d,W.empty));else{r=f;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Kn(a,d,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,g;for(;h=p.exec(c.text);)g||(g=new W(I.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new it(a+h.index,a+h.index+h[0].length,g))}}a=d}if(!r.validEnd){let l=r.fillBefore(I.empty,!0);t.replace(a,a,new W(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function lB(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Oa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!lB(o,s,i))break}return null}function cB(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,d=I.empty,f=0;for(let g=s,m=!1;g>n;g--)m||r.index(g)>0?(m=!0,d=I.from(r.node(g).copy(d)),f++):l--;let h=I.empty,p=0;for(let g=s,m=!1;g>n;g--)m||o.after(g+1)<o.end(g)?(m=!0,h=I.from(o.node(g).copy(h)),p++):c++;t.step(new ct(l,c,i,a,new W(d.append(h),f,p),d.size-f,!0))}function Bv(t,e,n=null,r=t){let o=uB(t,e),s=o&&dB(r,e);return s?o.map(i1).concat({type:e,attrs:n}).concat(s.map(i1)):null}function i1(t){return{type:t,attrs:null}}function uB(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function dB(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function fB(t,e,n){let r=I.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=I.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new ct(o,s,o,s,new W(r,0,0),n.length,!0))}function hB(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&pB(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!g?c=!1:!p&&g&&(c=!0)}c===!1&&aM(t,i,a,s),$v(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let d=t.mapping.slice(s),f=d.map(a,1),h=d.map(a+i.nodeSize,1);return t.step(new ct(f,h,f+1,h-1,new W(I.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&iM(t,i,a,s),!1}})}function iM(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function aM(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function pB(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function mB(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ct(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new W(I.from(i),0,0),1,!0))}function Bi(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>s;c--,d--){let f=o.node(c),h=o.index(c);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),g=r&&r[d+1];g&&(p=p.replaceChild(0,g.type.create(g.attrs)));let m=r&&r[d]||f;if(!f.canReplace(h+1,f.childCount)||!m.type.validContent(p))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function gB(t,e,n=1,r){let o=t.doc.resolve(e),s=I.empty,i=I.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=I.from(o.node(a).copy(s));let d=r&&r[c];i=I.from(d?d.type.create(d.attrs,i):o.node(a).copy(i))}t.step(new it(e,e,new W(s.append(i),n,n),!0))}function rs(t,e){let n=t.resolve(e),r=n.index();return lM(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function yB(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function lM(t,e){return!!(t&&e&&!t.isLeaf&&yB(t,e))}function yh(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&lM(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function vB(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let d=i.whitespace=="pre",f=!!i.contentMatch.matchType(o);d&&!f?r=!1:!d&&f&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);aM(t,d.node(),d.before(),a)}i.inlineContent&&$v(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new it(c,l.map(e+n,-1),W.empty,!0)),r===!0){let d=t.doc.resolve(c);iM(t,d.node(),d.before(),t.steps.length)}return t}function xB(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function cM(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),d=!1;if(s==1)d=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function vh(t,e,n=e,r=W.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return uM(o,s,r)?new it(e,n,r):new wB(o,s,r).fit()}function uM(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class wB{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=I.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=I.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new W(s,i,a);return e>-1?new ct(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new it(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=Op(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,f=null;if(n==1&&(i?c.matchType(i.type)||(f=c.fillBefore(I.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:f};if(n==2&&i&&(d=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Op(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new W(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Op(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new W(sl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new W(sl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,d=[],{match:f,type:h}=this.frontier[n];if(o){for(let m=0;m<o.childCount;m++)d.push(o.child(m));f=f.matchFragment(o)}let p=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let m=a.child(c),v=f.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(f=v,d.push(dM(m.mark(h.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?p:-1)))}let g=c==a.childCount;g||(p=-1),this.placed=il(this.placed,n,I.from(d)),this.frontier[n].match=f,g&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<p;m++){let x=v.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),v=x.content}this.unplaced=g?e==0?W.empty:new W(sl(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new W(sl(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!jp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=jp(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=jp(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=il(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=il(this.placed,this.depth,I.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(I.empty,!0);n.childCount&&(this.placed=il(this.placed,this.frontier.length,n))}}function sl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(sl(t.firstChild.content,e-1,n)))}function il(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(il(t.lastChild.content,e-1,n)))}function Op(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function dM(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,dM(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(I.empty,!0)))),t.copy(r)}function jp(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!bB(n,s.content,i)?a:null}function bB(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function SB(t){return t.spec.defining||t.spec.definingForContent}function kB(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(uM(o,s,r))return t.step(new it(e,n,r));let i=hM(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,p=o.pos-1;h>0;h--,p--){let g=o.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==p&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],d=r.openStart;for(let h=r.content,p=0;;p++){let g=h.firstChild;if(c.push(g),p==r.openStart)break;h=g.content}for(let h=d-1;h>=0;h--){let p=c[h],g=SB(p.type);if(g&&!p.sameMarkup(o.node(Math.abs(a)-1)))d=h;else if(g||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+d+1)%(r.openStart+1),g=c[p];if(g)for(let m=0;m<i.length;m++){let v=i[(m+l)%i.length],x=!0;v<0&&(x=!1,v=-v);let w=o.node(v-1),b=o.index(v-1);if(w.canReplaceWith(b,b,g.type,g.marks))return t.replace(o.before(v),x?s.after(v):n,new W(fM(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>f));h--){let p=i[h];p<0||(e=o.before(p),n=s.after(p))}}function fM(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(fM(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(I.empty,!0))}return t}function CB(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=xB(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new W(I.from(r),0,0))}function EB(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=hM(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function hM(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Hi extends Tt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xe.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Xe.fromReplace(e,this.pos,this.pos+1,new W(I.from(o),0,n.isLeaf?0:1))}getMap(){return sn.empty}invert(e){return new Hi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hi(n.pos,n.attr,n.value)}}Tt.jsonID("attr",Hi);class cc extends Tt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Xe.ok(r)}getMap(){return sn.empty}invert(e){return new cc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new cc(n.attr,n.value)}}Tt.jsonID("docAttr",cc);let ma=class extends Error{};ma=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ma.prototype=Object.create(Error.prototype);ma.prototype.constructor=ma;ma.prototype.name="TransformError";class pM{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new lc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ma(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=W.empty){let o=vh(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new W(I.from(r),0,0))}delete(e,n){return this.replace(e,n,W.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return kB(this,e,n,r),this}replaceRangeWith(e,n,r){return CB(this,e,n,r),this}deleteRange(e,n){return EB(this,e,n),this}lift(e,n){return cB(this,e,n),this}join(e,n=1){return vB(this,e,n),this}wrap(e,n){return fB(this,e,n),this}setBlockType(e,n=e,r,o=null){return hB(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return mB(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Hi(e,n,r)),this}setDocAttribute(e,n){return this.step(new cc(e,n)),this}addNodeMark(e,n){return this.step(new Eo(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ne)n.isInSet(r.marks)&&this.step(new Us(e,n));else{let o=r.marks,s,i=[];for(;s=n.isInSet(o);)i.push(new Us(e,s)),o=s.removeFromSet(o);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(e,n=1,r){return gB(this,e,n,r),this}addMark(e,n,r){return iB(this,e,n,r),this}removeMark(e,n,r){return aB(this,e,n,r),this}clearIncompatible(e,n,r){return $v(this,e,n,r),this}}const Rp=Object.create(null);class le{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new NB(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=W.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?W.empty:n),a==0&&c1(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),c1(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ne(e):fi(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?fi(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):fi(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new On(e.node(0))}static atStart(e){return fi(e,e,0,0,1)||new On(e)}static atEnd(e){return fi(e,e,e.content.size,e.childCount,-1)||new On(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Rp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Rp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Rp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ne.between(this.$anchor,this.$head).getBookmark()}}le.prototype.visible=!0;class NB{constructor(e,n){this.$from=e,this.$to=n}}let a1=!1;function l1(t){!a1&&!t.parent.inlineContent&&(a1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ne extends le{constructor(e,n=e){l1(e),l1(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return le.near(r);let o=e.resolve(n.map(this.anchor));return new ne(o.parent.inlineContent?o:r,r)}replace(e,n=W.empty){if(super.replace(e,n),n==W.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ne&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ne(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=le.findFrom(n,r,!0)||le.findFrom(n,-r,!0);if(s)n=s.$head;else return le.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(le.findFrom(e,-r,!0)||le.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ne(e,n)}}le.jsonID("text",ne);class xh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new xh(e.map(this.anchor),e.map(this.head))}resolve(e){return ne.between(e.resolve(this.anchor),e.resolve(this.head))}}class J extends le{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?le.near(s):new J(s)}content(){return new W(I.from(this.node),0,0)}eq(e){return e instanceof J&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Hv(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new J(e.resolve(n.anchor))}static create(e,n){return new J(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}J.prototype.visible=!1;le.jsonID("node",J);class Hv{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new xh(r,r):new Hv(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&J.isSelectable(r)?new J(n):le.near(n)}}class On extends le{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=W.empty){if(n==W.empty){e.delete(0,e.doc.content.size);let r=le.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new On(e)}map(e){return new On(e)}eq(e){return e instanceof On}getBookmark(){return TB}}le.jsonID("all",On);const TB={map(){return this},resolve(t){return new On(t)}};function fi(t,e,n,r,o,s=!1){if(e.inlineContent)return ne.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&J.isSelectable(a))return J.create(t,n-(o<0?a.nodeSize:0))}else{let l=fi(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function c1(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof it||o instanceof ct))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,d)=>{i==null&&(i=d)}),t.setSelection(le.near(t.doc.resolve(i),n))}const u1=1,vu=2,d1=4;class MB extends pM{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|u1)&~vu,this.storedMarks=null,this}get selectionSet(){return(this.updated&u1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vu,this}ensureMarks(e){return Ne.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~vu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ne.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(le.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=d1,this}get scrolledIntoView(){return(this.updated&d1)>0}}function f1(t,e){return!e||!t?t:t.bind(e)}class al{constructor(e,n,r){this.name=e,this.init=f1(n.init,r),this.apply=f1(n.apply,r)}}const PB=[new al("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new al("selection",{init(t,e){return t.selection||le.atStart(e.doc)},apply(t){return t.selection}}),new al("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new al("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Dp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=PB.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new al(r.key,r.spec.state,r))})}}class Mi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,i)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<i?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Mi(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new MB(this)}static create(e){let n=new Dp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Mi(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Dp(this.schema,e.plugins),r=n.fields,o=new Mi(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Dp(e.schema,e.plugins),s=new Mi(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=Io.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=le.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function mM(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=mM(o,e,{})),n[r]=o}return n}class qe{constructor(e){this.spec=e,this.props={},e.props&&mM(e.props,this,this.props),this.key=e.key?e.key.key:gM("plugin")}getState(e){return e[this.key]}}const Ip=Object.create(null);function gM(t){return t in Ip?t+"$"+ ++Ip[t]:(Ip[t]=0,t+"$")}class dt{constructor(e="key"){this.key=gM(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const pt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ga=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Tg=null;const Nr=function(t,e,n){let r=Tg||(Tg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},AB=function(){Tg=null},Ks=function(t,e,n,r){return n&&(h1(t,e,n,r,-1)||h1(t,e,n,r,1))},OB=/^(img|br|input|textarea|hr)$/i;function h1(t,e,n,r,o){for(var s;;){if(t==n&&e==r)return!0;if(e==(o<0?0:En(t))){let i=t.parentNode;if(!i||i.nodeType!=1||Lc(t)||OB.test(t.nodeName)||t.contentEditable=="false")return!1;e=pt(t)+(o<0?0:1),t=i}else if(t.nodeType==1){let i=t.childNodes[e+(o<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((s=i.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=o;else return!1;else t=i,e=o<0?En(t):0}else return!1}}function En(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jB(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=En(t)}else if(t.parentNode&&!Lc(t))e=pt(t),t=t.parentNode;else return null}}function RB(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Lc(t))e=pt(t)+1,t=t.parentNode;else return null}}function DB(t,e,n){for(let r=e==0,o=e==En(t);r||o;){if(t==n)return!0;let s=pt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==En(t)}}function Lc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const wh=function(t){return t.focusNode&&Ks(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function hs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function IB(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function LB(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(En(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(En(r.startContainer),r.startOffset)}}}const mr=typeof navigator<"u"?navigator:null,p1=typeof document<"u"?document:null,ss=mr&&mr.userAgent||"",Mg=/Edge\/(\d+)/.exec(ss),yM=/MSIE \d/.exec(ss),Pg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ss),Jt=!!(yM||Pg||Mg),_o=yM?document.documentMode:Pg?+Pg[1]:Mg?+Mg[1]:0,jn=!Jt&&/gecko\/(\d+)/i.test(ss);jn&&+(/Firefox\/(\d+)/.exec(ss)||[0,0])[1];const Ag=!Jt&&/Chrome\/(\d+)/.exec(ss),Et=!!Ag,vM=Ag?+Ag[1]:0,It=!Jt&&!!mr&&/Apple Computer/.test(mr.vendor),ya=It&&(/Mobile\/\w+/.test(ss)||!!mr&&mr.maxTouchPoints>2),Sn=ya||(mr?/Mac/.test(mr.platform):!1),_B=mr?/Win/.test(mr.platform):!1,Or=/Android \d/.test(ss),_c=!!p1&&"webkitFontSmoothing"in p1.documentElement.style,FB=_c?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zB(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function wr(t,e){return typeof t=="number"?t:t[e]}function $B(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function m1(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=ga(i);continue}let a=i,l=a==s.body,c=l?zB(s):$B(a),d=0,f=0;if(e.top<c.top+wr(r,"top")?f=-(c.top-e.top+wr(o,"top")):e.bottom>c.bottom-wr(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+wr(o,"top")-c.top:e.bottom-c.bottom+wr(o,"bottom")),e.left<c.left+wr(r,"left")?d=-(c.left-e.left+wr(o,"left")):e.right>c.right-wr(r,"right")&&(d=e.right-c.right+wr(o,"right")),d||f)if(l)s.defaultView.scrollBy(d,f);else{let p=a.scrollLeft,g=a.scrollTop;f&&(a.scrollTop+=f),d&&(a.scrollLeft+=d);let m=a.scrollLeft-p,v=a.scrollTop-g;e={left:e.left-m,top:e.top-v,right:e.right-m,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(h))break;i=h=="absolute"?i.offsetParent:ga(i)}}function BB(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:xM(t.dom)}}function xM(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ga(r));return e}function HB({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;wM(n,r==0?0:r-e)}function wM(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ui=null;function VB(t){if(t.setActive)return t.setActive();if(ui)return t.focus(ui);let e=xM(t);t.focus(ui==null?{get preventScroll(){return ui={preventScroll:!0},!0}}:void 0),ui||(ui=!1,wM(e,0))}function bM(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=Nr(d).getClientRects();else continue;for(let p=0;p<h.length;p++){let g=h[p];if(g.top<=i&&g.bottom>=a){i=Math.max(g.bottom,i),a=Math.min(g.top,a);let m=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(m<r){n=d,r=m,o=m&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,d.nodeType==1&&m&&(s=f+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!l&&g.left<=e.left&&g.right>=e.left&&(l=d,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=f+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?WB(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:bM(n,o)}function WB(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=no(r,1);if(s.top!=s.bottom&&Vv(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Vv(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function UB(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function KB(t,e,n){let{node:r,offset:o}=bM(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function qB(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function SM(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Vv(e,c))return SM(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function GB(t,e){let n=t.dom.ownerDocument,r,o=0,s=LB(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!Vv(e,c)||(i=SM(t.dom,e,c),!i))return null}if(It)for(let c=i;r&&c;c=ga(c))c.draggable&&(r=void 0);if(i=UB(i,e),r){if(jn&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&o++}let c;_c&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=qB(t,r,o,e))}a==null&&(a=KB(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function g1(t){return t.top<t.bottom||t.left<t.right}function no(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(g1(r))return r}return Array.prototype.find.call(n,g1)||t.getBoundingClientRect()}const QB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function kM(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=_c||jn;if(r.nodeType==3)if(i&&(QB.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=no(Nr(r,o,o),n);if(jn&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=no(Nr(r,o-1,o-1),-1);if(c.top==l.top){let d=no(Nr(r,o,o+1),-1);if(d.top!=l.top)return Ga(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Ga(no(Nr(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==En(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Lp(l.getBoundingClientRect(),!1)}if(s==null&&o<En(r)){let l=r.childNodes[o];if(l.nodeType==1)return Lp(l.getBoundingClientRect(),!0)}return Lp(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==En(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Nr(l,En(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ga(no(c,1),!1)}if(s==null&&o<En(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Nr(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Ga(no(c,-1),!0)}return Ga(no(r.nodeType==3?Nr(r):r,-n),n>=0)}function Ga(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Lp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function CM(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function YB(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return CM(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=kM(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Nr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?i.top-d.top>(d.bottom-i.top)*2:d.bottom-i.bottom>(i.bottom-d.top)*2))return!1}}return!0})}const JB=/[\u0590-\u08ac]/;function XB(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!JB.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:CM(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:m}=t.domSelectionRange(),v=g&&!p.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==m;try{a.collapse(d,f),l&&(l!=d||c!=f)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let y1=null,v1=null,x1=!1;function ZB(t,e,n){return y1==e&&v1==n?x1:(y1=e,v1=n,x1=n=="up"||n=="down"?YB(t,e,n):XB(t,e,n))}const Rn=0,w1=1,vs=2,gr=3;class Fc{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Rn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>pt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof NM){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof EM&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?pt(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?pt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let d=i+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=i;for(let f=a;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=pt(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=pt(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let p=0,g=0;p<this.children.length;p++){let m=this.children[p],v=g+m.size;if(s>g&&i<v)return m.setSelection(e-g-m.border,n-g-m.border,r,o);g=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((jn||It)&&e==n){let{node:p,offset:g}=a;if(p.nodeType==3){if(f=!!(g&&p.nodeValue[g-1]==`
`),f&&g==p.nodeValue.length)for(let m=p,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:pt(v)+1});break}let x=m.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let m=p.childNodes[g-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(jn&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(o=!0)}if(!(o||f&&It)&&Ks(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Ks(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((c.extend||e==n)&&!(f&&jn)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let g=a;a=l,l=g}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?vs:w1,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=gr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?vs:gr}r=i}this.dirty=vs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?vs:w1;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class EM extends Fc{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Rn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class e5 extends Fc{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class qs extends Fc{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=oi.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new qs(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&gr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=gr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Rn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Rn}}slice(e,n,r){let o=qs.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=jg(s,n,i,r)),e>0&&(s=jg(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Fo extends Fc{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=oi.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=PM(d,r,n),c?l=new t5(e,n,r,o,d,f||null,h,c,s,i+1):n.isText?new bh(e,n,r,o,d,h,s):new Fo(e,n,r,o,d,f||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>I.empty)}return e}matchesNode(e,n,r){return this.dirty==Rn&&e.eq(this.node)&&Wd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new r5(this,i&&i.node,e);i5(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?Ne.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,f,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,d,f,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,f,p,e)||l.updateNextNode(c,d,f,e,h,o)||l.addNode(c,d,f,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==vs)&&(i&&this.protectLocalComposition(e,i),TM(this.contentDOM,this.children,e),ya&&a5(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ne)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=l5(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new e5(this,s,n,o);e.input.compositionNodes.push(i),this.children=jg(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==gr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Rn}updateOuterDeco(e){if(Wd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=MM(this.dom,this.nodeDOM,Og(this.outerDeco,this.node,n),Og(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function b1(t,e,n,r,o){PM(r,e,t);let s=new Fo(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class bh extends Fo{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==gr||this.dirty!=Rn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Rn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Rn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new bh(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=gr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class NM extends Fc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Rn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class t5 extends Fo{constructor(e,n,r,o,s,i,a,l,c,d){super(e,n,r,o,s,i,a,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==gr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function TM(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=S1(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof qs){let l=r?r.previousSibling:t.lastChild;TM(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=S1(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Sl=function(t){t&&(this.nodeName=t)};Sl.prototype=Object.create(null);const xs=[new Sl];function Og(t,e,n){if(t.length==0)return xs;let r=n?xs[0]:new Sl,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new Sl(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new Sl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function MM(t,e,n,r){if(n==xs&&r==xs)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=xs[0]),o=l}n5(o,a||xs[0],i)}return o}function n5(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function PM(t,e,n){return MM(t,t,xs,Og(e,n,t.nodeType!=1))}function Wd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function S1(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class r5{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=o5(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Rn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=qs.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==gr&&i.dom==i.contentDOM&&(i.dirty=vs),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Fo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,f,h=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=gr&&Wd(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=vs,f.updateChildren(o,i+1),f.dirty=Rn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Wd(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=Fo.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=Fo.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new EM(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof qs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof bh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((It||Et)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new NM(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function o5(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof qs)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function s5(t,e){return t.type.side-e.type.side}function i5(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(s,d),c),s+=d.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let d,f;for(;i<o.length&&o[i].to==s;){let v=o[i++];v.widget&&(d?(f||(f=[d])).push(v):d=v)}if(d)if(f){f.sort(s5);for(let v=0;v<f.length;v++)n(f[v],c,!!l)}else n(d,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<t.childCount)p=c,h=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let g=s+h.nodeSize;if(h.isText){let v=g;i<o.length&&o[i].from<v&&(v=o[i].from);for(let x=0;x<a.length;x++)a[x].to<v&&(v=a[x].to);v<g&&(l=h.cut(v-s),h=h.cut(0,v-s),g=v,p=-1)}else for(;i<o.length&&o[i].to<g;)i++;let m=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,m,e.forChild(s,h),p),s=g}}function a5(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function l5(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function jg(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Wv(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(wh(n)){for(l=i;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&J.isSelectable(f)&&o.parent&&!(f.isInline&&DB(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new J(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=i,h=i;for(let p=0;p<n.rangeCount;p++){let g=n.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(f<0)return null;[l,i]=h==t.state.selection.anchor?[h,f]:[f,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let f=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Uv(t,d,a,f)}return c}function AM(t){return t.editable?t.hasFocus():jM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Dr(t,e=!1){let n=t.state.selection;if(OM(t,n),!!AM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Et){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Ks(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)u5(t);else{let{anchor:r,head:o}=n,s,i;k1&&!(n instanceof ne)&&(n.$from.parent.inlineContent||(s=C1(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=C1(t,n.to))),t.docView.setSelection(r,o,t,e),k1&&(s&&E1(s),i&&E1(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&c5(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const k1=It||Et&&vM<63;function C1(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(It&&o&&o.contentEditable=="false")return _p(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return _p(o);if(s)return _p(s)}}function _p(t){return t.contentEditable="true",It&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function E1(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function c5(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!AM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function u5(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,pt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Jt&&_o<=11&&(n.disabled=!0,n.disabled=!1)}function OM(t,e){if(e instanceof J){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(N1(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else N1(t)}function N1(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Uv(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ne.between(e,n,r)}function T1(t){return t.editable&&!t.hasFocus()?!1:jM(t)}function jM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function d5(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ks(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Rg(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&le.findFrom(s,e)}function so(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function M1(t,e,n){let r=t.state.selection;if(r instanceof ne)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return so(t,new ne(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=Rg(t.state,e);return o&&o instanceof J?so(t,o):!1}else if(!(Sn&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?J.isSelectable(s)?so(t,new J(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):_c?so(t,new ne(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof J&&r.node.isInline)return so(t,new ne(e>0?r.$to:r.$from));{let o=Rg(t.state,e);return o?so(t,o):!1}}}function Ud(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function kl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function di(t,e){return e<0?f5(t):h5(t)}function f5(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(jn&&n.nodeType==1&&r<Ud(n)&&kl(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(kl(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(RM(n))break;{let a=n.previousSibling;for(;a&&kl(a,-1);)o=n.parentNode,s=pt(a),a=a.previousSibling;if(a)n=a,r=Ud(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?Dg(t,n,r):o&&Dg(t,o,s)}function h5(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Ud(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(kl(a,1))s=n,i=++r;else break}else{if(RM(n))break;{let a=n.nextSibling;for(;a&&kl(a,1);)s=a.parentNode,i=pt(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Ud(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&Dg(t,s,i)}function RM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function p5(t,e){for(;t&&e==t.childNodes.length&&!Lc(t);)e=pt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function m5(t,e){for(;t&&!e&&!Lc(t);)e=pt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Dg(t,e,n){if(e.nodeType!=3){let s,i;(i=p5(e,n))?(e=i,n=0):(s=m5(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(wh(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Dr(t)},50)}function P1(t,e){let n=t.state.doc.resolve(e);if(!(Et||_B)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function A1(t,e,n){let r=t.state.selection;if(r instanceof ne&&!r.empty||n.indexOf("s")>-1||Sn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=Rg(t.state,e);if(i&&i instanceof J)return so(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof On?le.near(i,e):le.findFrom(i,e);return a?so(t,a):!1}return!1}function O1(t,e){if(!(t.state.selection instanceof ne))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function j1(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function g5(t){if(!It||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;j1(t,r,"true"),setTimeout(()=>j1(t,r,"false"),20)}return!1}function y5(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function v5(t,e){let n=e.keyCode,r=y5(e);if(n==8||Sn&&n==72&&r=="c")return O1(t,-1)||di(t,-1);if(n==46&&!e.shiftKey||Sn&&n==68&&r=="c")return O1(t,1)||di(t,1);if(n==13||n==27)return!0;if(n==37||Sn&&n==66&&r=="c"){let o=n==37?P1(t,t.state.selection.from)=="ltr"?-1:1:-1;return M1(t,o,r)||di(t,o)}else if(n==39||Sn&&n==70&&r=="c"){let o=n==39?P1(t,t.state.selection.from)=="ltr"?1:-1:1;return M1(t,o,r)||di(t,o)}else{if(n==38||Sn&&n==80&&r=="c")return A1(t,-1,r)||di(t,-1);if(n==40||Sn&&n==78&&r=="c")return g5(t)||A1(t,1,r)||di(t,1);if(r==(Sn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Kv(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=t.someProp("clipboardSerializer")||oi.fromSchema(t.state.schema),a=zM(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=FM[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let g=a.createElement(d[p]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function DM(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=!!e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return a=new W(I.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let f=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(f)a=f;else{let h=o.marks(),{schema:p}=t.state,g=oi.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=i.appendChild(document.createElement("p"));m&&v.appendChild(g.serializeNode(p.text(m,h)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),i=S5(n),_c&&k5(i);let c=i&&i.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Lo.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!x5.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=C5(R1(a,+d[1],+d[2]),d[4]);else if(a=W.maxOpen(w5(a.content,o),!0),a.openStart||a.openEnd){let f=0,h=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=R1(a,f,h)}return t.someProp("transformPasted",f=>{a=f(a,t,l)}),a}const x5=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function w5(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&LM(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=_M(i[i.length-1],s.length));let d=IM(a,l);i.push(d),o=o.matchType(d.type),s=l}}),i)return I.from(i)}return t}function IM(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,I.from(t));return t}function LM(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=LM(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(I.from(IM(n,t,o+1))))}}function _M(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,_M(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(I.empty,!0);return t.copy(n.append(r))}function Ig(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=Ig(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(I.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function R1(t,e,n){return e<t.openStart&&(t=new W(Ig(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new W(Ig(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const FM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let D1=null;function zM(){return D1||(D1=document.implementation.createHTMLDocument("title"))}let Fp=null;function b5(t){let e=window.trustedTypes;return e?(Fp||(Fp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Fp.createHTML(t)):t}function S5(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=zM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&FM[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=b5(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function k5(t){let e=t.querySelectorAll(Et?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function C5(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=I.from(l.create(r[a+1],o)),s++,i++}return new W(o,s,i)}const Lt={},_t={},E5={touchstart:!0,touchmove:!0};class N5{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function T5(t){for(let e in Lt){let n=Lt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{P5(t,r)&&!qv(t,r)&&(t.editable||!(r.type in _t))&&n(t,r)},E5[e]?{passive:!0}:void 0)}It&&t.dom.addEventListener("input",()=>null),Lg(t)}function No(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function M5(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Lg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>qv(t,r))})}function qv(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function P5(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function A5(t,e){!qv(t,e)&&Lt[e.type]&&(t.editable||!(e.type in _t))&&Lt[e.type](t,e)}_t.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!BM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Or&&Et&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ya&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,hs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||v5(t,n)?n.preventDefault():No(t,"key")};_t.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};_t.keypress=(t,e)=>{let n=e;if(BM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Sn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ne)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,o,s))&&t.dispatch(s()),n.preventDefault()}};function Sh(t){return{left:t.clientX,top:t.clientY}}function O5(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Gv(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Vi(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function j5(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&J.isSelectable(r)?(Vi(t,new J(n)),!0):!1}function R5(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof J&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(J.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Vi(t,J.create(t.state.doc,o)),!0):!1}function D5(t,e,n,r,o){return Gv(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?R5(t,n):j5(t,n))}function I5(t,e,n,r){return Gv(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function L5(t,e,n,r){return Gv(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||_5(t,n,r)}function _5(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Vi(t,ne.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Vi(t,ne.create(r,a+1,a+1+i.content.size));else if(J.isSelectable(i))Vi(t,J.create(r,a));else continue;return!0}}function Qv(t){return Kd(t)}const $M=Sn?"metaKey":"ctrlKey";Lt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Qv(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&O5(n,t.input.lastClick)&&!n[$M]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let i=t.posAtCoords(Sh(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new F5(t,i,n,!!r)):(s=="doubleClick"?I5:L5)(t,i.pos,i.inside,n)?n.preventDefault():No(t,"pointer"))};class F5{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[$M],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,i=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof J&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&jn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),No(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Dr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Sh(e))),this.updateAllowDefault(e),this.allowDefault||!n?No(this.view,"pointer"):D5(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||It&&this.mightDrag&&!this.mightDrag.node.isAtom||Et&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Vi(this.view,le.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):No(this.view,"pointer")}move(e){this.updateAllowDefault(e),No(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Lt.touchstart=t=>{t.input.lastTouch=Date.now(),Qv(t),No(t,"pointer")};Lt.touchmove=t=>{t.input.lastTouch=Date.now(),No(t,"pointer")};Lt.contextmenu=t=>Qv(t);function BM(t,e){return t.composing?!0:It&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const z5=Or?5e3:-1;_t.compositionstart=_t.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ne&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Kd(t,!0),t.markCursor=null;else if(Kd(t,!e.selection.empty),jn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}HM(t,z5)};_t.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,HM(t,20))};function HM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Kd(t),e))}function VM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=B5());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function $5(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=jB(e.focusNode,e.focusOffset),r=RB(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function B5(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Kd(t,e=!1){if(!(Or&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),VM(t),e||t.docView&&t.docView.dirty){let n=Wv(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function H5(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const uc=Jt&&_o<15||ya&&FB<604;Lt.copy=_t.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=uc?null:n.clipboardData,i=r.content(),{dom:a,text:l}=Kv(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):H5(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function V5(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function W5(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?dc(t,r.value,null,o,e):dc(t,r.textContent,r.innerHTML,o,e)},50)}function dc(t,e,n,r,o){let s=DM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||W.empty)))return!0;if(!s)return!1;let i=V5(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function WM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}_t.paste=(t,e)=>{let n=e;if(t.composing&&!Or)return;let r=uc?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&dc(t,WM(r),r.getData("text/html"),o,n)?n.preventDefault():W5(t,n)};class UM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const U5=Sn?"altKey":"ctrlKey";function KM(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[U5]}Lt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Sh(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof J?o.to-1:o.to))){if(r&&r.mightDrag)i=J.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(i=J.create(t.state.doc,f.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:d}=Kv(t,a);(!n.dataTransfer.files.length||!Et||vM>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(uc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",uc||n.dataTransfer.setData("text/plain",c),t.dragging=new UM(d,KM(t,n),i)};Lt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};_t.dragover=_t.dragenter=(t,e)=>e.preventDefault();_t.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Sh(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",g=>{i=g(i,t,!1)}):i=DM(t,WM(n.dataTransfer),uc?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&KM(t,n));if(t.someProp("handleDrop",g=>g(t,n,i||W.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?cM(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let d=c.mapping.map(l),f=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(f?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(h))return;let p=c.doc.resolve(d);if(f&&J.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new J(p));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,x,w)=>g=w),c.setSelection(Uv(t,p,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Lt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Dr(t)},20))};Lt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Lt.beforeinput=(t,e)=>{if(Et&&Or&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,hs(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in _t)Lt[t]=_t[t];function fc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class qd{constructor(e,n){this.toDOM=e,this.spec=n||Rs,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new Rt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&fc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class zo{constructor(e,n){this.attrs=e,this.spec=n||Rs}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new Rt(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof zo&&fc(this.attrs,e.attrs)&&fc(this.spec,e.spec)}static is(e){return e.type instanceof zo}destroy(){}}class Yv{constructor(e,n){this.attrs=e,this.spec=n||Rs}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new Rt(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof Yv&&fc(this.attrs,e.attrs)&&fc(this.spec,e.spec)}destroy(){}}class Rt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Rt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Rt(e,e,new qd(n,r))}static inline(e,n,r,o){return new Rt(e,n,new zo(r,o))}static node(e,n,r,o){return new Rt(e,n,new Yv(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof zo}get widget(){return this.type instanceof qd}}const hi=[],Rs={};class _e{constructor(e,n){this.local=e.length?e:hi,this.children=n.length?n:hi}static create(e,n){return n.length?Gd(n,e,0,Rs):kt}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==kt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Rs)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?K5(this.children,i||[],e,n,r,o,s):i?new _e(i.sort(Ds),hi):kt}add(e,n){return n.length?this==kt?_e.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=GM(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,d,c+1):o.splice(s,0,l,l+a.nodeSize,Gd(d,a,c+1,Rs)),s+=3}});let i=qM(s?QM(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new _e(i.length?this.local.concat(i).sort(Ds):this.local,o||this.children)}remove(e){return e.length==0||this==kt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>a&&f.to<l&&(e[d]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=kt?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new _e(o,r):kt}forChild(e,n){if(this==kt)return this;if(n.isLeaf)return _e.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof zo){let c=Math.max(s,l.from)-s,d=Math.min(i,l.to)-s;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new _e(o.sort(Ds),hi);return r?new uo([a,r]):a}return r||kt}eq(e){if(this==e)return!0;if(!(e instanceof _e)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Jv(this.localsInner(e))}localsInner(e){if(this==kt)return hi;if(e.inlineContent||!this.local.some(zo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof zo||n.push(this.local[r]);return n}forEachSet(e){e(this)}}_e.empty=new _e([],[]);_e.removeOverlap=Jv;const kt=_e.empty;class uo{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Rs));return uo.from(r)}forChild(e,n){if(n.isLeaf)return _e.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=kt&&(s instanceof uo?r=r.concat(s.members):r.push(s))}return uo.from(r)}eq(e){if(!(e instanceof uo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?Jv(r?n:n.sort(Ds)):hi}static from(e){switch(e.length){case 0:return kt;case 1:return e[0];default:return new uo(e.every(n=>n instanceof _e)?e:e.reduce((n,r)=>n.concat(r instanceof _e?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function K5(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((h,p,g,m)=>{let v=m-g-(p-h);for(let x=0;x<a.length;x+=3){let w=a[x+1];if(w<0||h>w+d-f)continue;let b=a[x]+d-f;p>=b?a[x+1]=h<=b?-2:-1:h>=d&&v&&(a[x]+=v,a[x+1]+=v)}f+=v}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),f=d-o;if(f<0||f>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),p=h-o,{index:g,offset:m}=r.content.findIndex(f),v=r.maybeChild(g);if(v&&m==f&&m+v.nodeSize==p){let x=a[c+2].mapInner(n,v,d+1,t[c]+s+1,i);x!=kt?(a[c]=f,a[c+1]=p,a[c+2]=x):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=q5(a,t,e,n,o,s,i),d=Gd(c,r,0,i);e=d.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<d.children.length;f+=3){let p=d.children[f];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,d.children[f],d.children[f+1],d.children[f+2])}}return new _e(e.sort(Ds),a)}function qM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Rt(o.from+e,o.to+e,o.type))}return n}function q5(t,e,n,r,o,s,i){function a(l,c){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(r,o,c);f?n.push(f):i.onRemove&&i.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function GM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function QM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Gd(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=GM(t,a,l+n);if(c){s=!0;let d=Gd(c,a,n+l+1,r);d!=kt&&o.push(l,l+a.nodeSize,d)}});let i=qM(s?QM(t):t,-n).sort(Ds);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new _e(i,o):kt}function Ds(t,e){return t.from-e.from||t.to-e.to}function Jv(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),I1(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),I1(e,o,r.copy(s.from,r.to)));break}}}return e}function I1(t,e,n){for(;e<t.length&&Ds(n,t[e])>0;)e++;t.splice(e,0,n)}function zp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=kt&&e.push(r)}),t.cursorWrapper&&e.push(_e.create(t.state.doc,[t.cursorWrapper.deco])),uo.from(e)}const G5={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Q5=Jt&&_o<=11;class Y5{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class J5{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Y5,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Jt&&_o<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Q5&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,G5)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(T1(this.view)){if(this.suppressingSelectionUpdates)return Dr(this.view);if(Jt&&_o<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ks(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=ga(s))n.add(s);for(let s=e.anchorNode;s;s=ga(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&T1(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],l);f&&(s=s<0?f.from:Math.min(f.from,s),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(jn&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,h]=d;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of d){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||eH(e,f)!=p)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&wh(r)&&(c=Wv(e))&&c.eq(le.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Dr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),X5(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Dr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(Jt&&_o<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:h}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?pt(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?pt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let L1=new WeakMap,_1=!1;function X5(t){if(!L1.has(t)&&(L1.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=jn,_1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),_1=!0}}function F1(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return Ks(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function Z5(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return F1(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?F1(t,n):null}function eH(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function tH(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],wh(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Et&&t.input.lastKeyCode===8)for(let v=s;v>o;v--){let x=r.childNodes[v-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){s=v;break}if(!w||w.size)break}let f=t.state.doc,h=t.someProp("domParser")||Lo.fromSchema(t.state.schema),p=f.resolve(i),g=null,m=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:nH,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,x=c[1]&&c[1].pos;x==null&&(x=v),g={anchor:v+i,head:x+i}}return{doc:m,sel:g,from:i,to:a}}function nH(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(It&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||It&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const rH=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oH(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=Wv(t,C);if(N&&!t.state.selection.eq(N)){if(Et&&Or&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",P=>P(t,hs(13,"Enter"))))return;let A=t.state.tr.setSelection(N);C=="pointer"?A.setMeta("pointer",!0):C=="key"&&A.scrollIntoView(),s&&A.setMeta("composition",s),t.dispatch(A)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=tH(t,e,n),d=t.state.doc,f=d.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let g=aH(f.content,c.doc.content,c.from,h,p);if(g&&t.input.domChangeCount++,(ya&&t.input.lastIOSEnter>Date.now()-225||Or)&&o.some(C=>C.nodeType==1&&!rH.test(C.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",C=>C(t,hs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof ne&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let C=z1(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let N=t.state.tr.setSelection(C);s&&N.setMeta("composition",s),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof ne&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Jt&&_o<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let m=c.doc.resolveNoCache(g.start-c.from),v=c.doc.resolveNoCache(g.endB-c.from),x=d.resolve(g.start),w=m.sameParent(v)&&m.parent.inlineContent&&x.end()>=g.endA;if((ya&&t.input.lastIOSEnter>Date.now()-225&&(!w||o.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(v)||!m.parent.inlineContent)&&m.pos<v.pos&&!/\S/.test(c.doc.textBetween(m.pos,v.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,hs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&iH(d,g.start,g.endA,m,v)&&t.someProp("handleKeyDown",C=>C(t,hs(8,"Backspace")))){Or&&Et&&t.domObserver.suppressSelectionUpdates();return}Et&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Or&&!w&&m.start()!=v.start()&&v.parentOffset==0&&m.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,v=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,hs(13,"Enter"))})},20));let b=g.start,S=g.endA,k=C=>{let N=C||t.state.tr.replace(b,S,c.doc.slice(g.start-c.from,g.endB-c.from));if(c.sel){let A=z1(t,N.doc,c.sel);A&&!(Et&&t.composing&&A.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==b||A.head==N.mapping.map(S)-1)||Jt&&A.empty&&A.head==b)&&N.setSelection(A)}return s&&N.setMeta("composition",s),N.scrollIntoView()},T;if(w){if(m.pos==v.pos){Jt&&_o<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Dr(t),20));let C=k(t.state.tr.delete(b,S)),N=d.resolve(g.start).marksAcross(d.resolve(g.endA));N&&C.ensureMarks(N),t.dispatch(C)}else if(g.endA==g.endB&&(T=sH(m.parent.content.cut(m.parentOffset,v.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start())))){let C=k(t.state.tr);T.type=="add"?C.addMark(b,S,T.mark):C.removeMark(b,S,T.mark),t.dispatch(C)}else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,v.parentOffset),N=()=>k(t.state.tr.insertText(C,b,S));t.someProp("handleTextInput",A=>A(t,b,S,C,N))||t.dispatch(N())}}else t.dispatch(k())}function z1(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Uv(t,e.resolve(n.anchor),e.resolve(n.head))}function sH(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(I.from(c).eq(t))return{mark:a,type:i}}function iH(t,e,n,r,o){if(n-e<=o.pos-r.pos||$p(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve($p(s,!0,!0));return!i.parent.isTextblock||i.pos>n||$p(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function $p(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function aH(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&$1(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&$1(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function $1(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class YM{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new N5,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(U1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=V1(this),H1(this),this.nodeViews=W1(this),this.docView=b1(this.state.doc,B1(this),zp(this),this.dom,this),this.domObserver=new J5(this,(r,o,s,i)=>oH(this,r,o,s,i)),this.domObserver.start(),T5(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Lg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(U1),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(VM(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=W1(this);cH(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Lg(this),this.editable=V1(this),H1(this);let l=zp(this),c=B1(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(o.selection))&&(i=!0);let h=d=="preserve"&&i&&this.dom.style.overflowAnchor==null&&BB(this);if(i){this.domObserver.stop();let p=f&&(Jt||Et)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&lH(o.selection,e.selection);if(f){let g=Et?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=$5(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=b1(e.doc,c,l,this.dom,this)),g&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&d5(this))?Dr(this,p):(OM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&HB(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof J){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&m1(this,n.getBoundingClientRect(),e)}else m1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new UM(e.slice,e.move,o<0?void 0:J.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Jt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&VB(this.dom),Dr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return GB(this,e)}coordsAtPos(e,n=1){return kM(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return ZB(this,n||this.state,e)}pasteHTML(e,n){return dc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return dc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Kv(this,e)}destroy(){this.docView&&(M5(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,AB())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return A5(this,e)}domSelectionRange(){let e=this.domSelection();return e?It&&this.root.nodeType===11&&IB(this.dom.ownerDocument)==this.dom&&Z5(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}YM.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function B1(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Rt.node(0,t.state.doc.content.size,e)]}function H1(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Rt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function V1(t){return!t.someProp("editable",e=>e(t.state)===!1)}function lH(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function W1(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function cH(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function U1(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Yo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uH=typeof navigator<"u"&&/Mac/.test(navigator.platform),dH=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var mt=0;mt<10;mt++)Yo[48+mt]=Yo[96+mt]=String(mt);for(var mt=1;mt<=24;mt++)Yo[mt+111]="F"+mt;for(var mt=65;mt<=90;mt++)Yo[mt]=String.fromCharCode(mt+32),Qd[mt]=String.fromCharCode(mt);for(var Bp in Yo)Qd.hasOwnProperty(Bp)||(Qd[Bp]=Yo[Bp]);function fH(t){var e=uH&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dH&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Qd:Yo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const hH=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),pH=typeof navigator<"u"&&/Win/.test(navigator.platform);function mH(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))hH?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function gH(t){let e=Object.create(null);for(let n in t)e[mH(n)]=t[n];return e}function Hp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function yH(t){return new qe({props:{handleKeyDown:JM(t)}})}function JM(t){let e=gH(t);return function(n,r){let o=fH(r),s,i=e[Hp(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Hp(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(pH&&r.ctrlKey&&r.altKey)&&(s=Yo[r.keyCode])&&s!=o){let a=e[Hp(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const vH=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function XM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const xH=(t,e,n)=>{let r=XM(t,n);if(!r)return!1;let o=Xv(r);if(!o){let i=r.blockRange(),a=i&&Oa(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(nP(t,o,e,-1))return!0;if(r.parent.content.size==0&&(va(s,"end")||J.isSelectable(s)))for(let i=r.depth;;i--){let a=vh(t.doc,r.before(i),r.after(i),W.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(va(s,"end")?le.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):J.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},wH=(t,e,n)=>{let r=XM(t,n);if(!r)return!1;let o=Xv(r);return o?ZM(t,o,e):!1},bH=(t,e,n)=>{let r=eP(t,n);if(!r)return!1;let o=Zv(r);return o?ZM(t,o,e):!1};function ZM(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=vh(t.doc,s,l,W.empty);if(!c||c.from!=s||c instanceof it&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(ne.create(d.doc,s)),n(d.scrollIntoView())}return!0}function va(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const SH=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Xv(r)}let i=s&&s.nodeBefore;return!i||!J.isSelectable(i)?!1:(e&&e(t.tr.setSelection(J.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function Xv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function eP(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const kH=(t,e,n)=>{let r=eP(t,n);if(!r)return!1;let o=Zv(r);if(!o)return!1;let s=o.nodeAfter;if(nP(t,o,e,1))return!0;if(r.parent.content.size==0&&(va(s,"start")||J.isSelectable(s))){let i=vh(t.doc,r.before(),r.after(),W.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(va(s,"start")?le.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):J.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},CH=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Zv(r)}let i=s&&s.nodeAfter;return!i||!J.isSelectable(i)?!1:(e&&e(t.tr.setSelection(J.create(t.doc,s.pos)).scrollIntoView()),!0)};function Zv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const EH=(t,e)=>{let n=t.selection,r=n instanceof J,o;if(r){if(n.node.isTextblock||!rs(t.doc,n.from))return!1;o=n.from}else if(o=yh(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(J.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},NH=(t,e)=>{let n=t.selection,r;if(n instanceof J){if(n.node.isTextblock||!rs(t.doc,n.to))return!1;r=n.to}else if(r=yh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},TH=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Oa(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},MH=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function tP(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const PH=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=tP(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(le.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},AH=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof On||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=tP(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(ne.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},OH=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Bi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Oa(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},jH=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(J.create(t.doc,o))),!0)};function RH(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||rs(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function nP(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&RH(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,g=I.empty;for(let x=i.length-1;x>=0;x--)g=I.from(i[x].create(null,g));g=I.from(o.copy(g));let m=t.tr.step(new ct(e.pos-1,p,e.pos,p,new W(g,1,0),i.length,!0)),v=m.doc.resolve(p+2*i.length);v.nodeAfter&&v.nodeAfter.type==o.type&&rs(m.doc,v.pos)&&m.join(v.pos),n(m.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:le.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),h=f&&Oa(f);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(f,h).scrollIntoView()),!0;if(c&&va(s,"start",!0)&&va(o,"end")){let p=o,g=[];for(;g.push(p),!p.isTextblock;)p=p.lastChild;let m=s,v=1;for(;!m.isTextblock;m=m.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(n){let x=I.empty;for(let b=g.length-1;b>=0;b--)x=I.from(g[b].copy(x));let w=t.tr.step(new ct(e.pos-g.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new W(x,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function rP(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(ne.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const DH=rP(-1),IH=rP(1);function LH(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&Bv(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function K1(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),f=d.index();o=d.parent.canReplaceWith(f,f+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function _H(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return FH(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function FH(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new Hd(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Hd(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=Bv(s,n,r,e);return a?(t&&zH(t,e,a,o,n),!0):!1}function zH(t,e,n,r,o){let s=I.empty;for(let d=n.length-1;d>=0;d--)s=I.from(n[d].type.create(n[d].attrs,s));t.step(new ct(e.start-(r?2:0),e.end,e.start,e.end,new W(s,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==o&&(i=d+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,f=e.endIndex,h=!0;d<f;d++,h=!1)!h&&Bi(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function $H(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?BH(e,n,t,s):HH(e,n,s):!0:!1}}function BH(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new ct(s-1,i,s,i,new W(I.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Hd(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Oa(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return rs(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function HH(t,e,n){let r=t.tr,o=n.parent;for(let p=n.end,g=n.endIndex-1,m=n.startIndex;g>m;g--)p-=o.child(g).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,i.content.append(l?I.empty:I.from(o))))return!1;let f=s.pos,h=f+i.nodeSize;return r.step(new ct(f-(a?1:0),h+(l?1:0),f+1,h-1,new W((a?I.empty:I.from(o.copy(I.empty))).append(l?I.empty:I.from(o.copy(I.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function VH(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=I.from(c?t.create():null),f=new W(I.from(t.create(null,I.from(a.type.create(null,d)))),c?3:1,0),h=s.start,p=s.end;n(e.tr.step(new ct(h-(c?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}var WH=Object.defineProperty,oP=(t,e)=>{for(var n in e)WH(t,n,{get:e[n],enumerable:!0})};function kh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}var Ch=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:o}=n,s=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([i,a])=>[i,(...c)=>{const d=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:s}=r,i=[],a=!!t,l=t||o.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),i.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,h])=>[f,(...g)=>{const m=this.buildProps(l,e),v=h(...g)(m);return i.push(v),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,o=t||n.tr,s=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:s}=r,i={tr:t,editor:r,view:s,state:kh({state:o,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(i)]))}};return i}},UH=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function sP(t,e){const n=new pM(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}var iP=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&iP(r)}return t};function xu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return iP(n)}function hc(t,e,n){if(t instanceof Io||t instanceof I)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return I.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),hc("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new XT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Lo.fromSchema(l).parseSlice(xu(t),n.parseOptions):Lo.fromSchema(l).parse(xu(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Lo.fromSchema(e);return n.slice?s.parseSlice(xu(t),n.parseOptions).content:s.parse(xu(t),n.parseOptions)}return hc("",e,n)}function _g(t,e,n={},r={}){return hc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function KH(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function qH(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function GH(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Eh(t){return e=>GH(e.$from,t)}function Y(t,e,n){return t.config[e]===void 0&&t.parent?Y(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Y(t.parent,e,n):null}):t.config[e]}function ex(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Y(e,"addExtensions",n);return r?[e,...ex(r())]:e}).flat(10)}function tx(t,e){const n=oi.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function aP(t){return typeof t=="function"}function ye(t,e=void 0,...n){return aP(t)?e?t.bind(e)(...n):t(...n):t}function QH(t={}){return Object.keys(t).length===0&&t.constructor===Object}function pc(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function lP(t){const e=[],{nodeExtensions:n,markExtensions:r}=pc(t),o=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=Y(i,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...s,...p}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Y(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,f])=>{const h={...s,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:d,attribute:h})})}),e}function Ke(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());c.set(f,h)}),a.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());c.set(f,h)}),r[o]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[o]=s}),r},{})}function Yd(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ke(n,r),{})}function YH(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function q1(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):YH(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function G1(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&QH(n)?!1:n!=null))}function JH(t,e){var n;const r=lP(t),{nodeExtensions:o,markExtensions:s}=pc(t),i=(n=o.find(c=>Y(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(x=>x.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,w)=>{const b=Y(w,"extendNodeSchema",f);return{...x,...b?b(c):{}}},{}),p=G1({...h,content:ye(Y(c,"content",f)),marks:ye(Y(c,"marks",f)),group:ye(Y(c,"group",f)),inline:ye(Y(c,"inline",f)),atom:ye(Y(c,"atom",f)),selectable:ye(Y(c,"selectable",f)),draggable:ye(Y(c,"draggable",f)),code:ye(Y(c,"code",f)),whitespace:ye(Y(c,"whitespace",f)),linebreakReplacement:ye(Y(c,"linebreakReplacement",f)),defining:ye(Y(c,"defining",f)),isolating:ye(Y(c,"isolating",f)),attrs:Object.fromEntries(d.map(x=>{var w,b;return[x.name,{default:(w=x==null?void 0:x.attribute)==null?void 0:w.default,validate:(b=x==null?void 0:x.attribute)==null?void 0:b.validate}]}))}),g=ye(Y(c,"parseHTML",f));g&&(p.parseDOM=g.map(x=>q1(x,d)));const m=Y(c,"renderHTML",f);m&&(p.toDOM=x=>m({node:x,HTMLAttributes:Yd(x,d)}));const v=Y(c,"renderText",f);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(v=>v.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,x)=>{const w=Y(x,"extendMarkSchema",f);return{...v,...w?w(c):{}}},{}),p=G1({...h,inclusive:ye(Y(c,"inclusive",f)),excludes:ye(Y(c,"excludes",f)),group:ye(Y(c,"group",f)),spanning:ye(Y(c,"spanning",f)),code:ye(Y(c,"code",f)),attrs:Object.fromEntries(d.map(v=>{var x,w;return[v.name,{default:(x=v==null?void 0:v.attribute)==null?void 0:x.default,validate:(w=v==null?void 0:v.attribute)==null?void 0:w.validate}]}))}),g=ye(Y(c,"parseHTML",f));g&&(p.parseDOM=g.map(v=>q1(v,d)));const m=Y(c,"renderHTML",f);return m&&(p.toDOM=v=>m({mark:v,HTMLAttributes:Yd(v,d)})),[c.name,p]}));return new XT({topNode:i,nodes:a,marks:l})}function XH(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function nx(t){return t.sort((n,r)=>{const o=Y(n,"priority")||100,s=Y(r,"priority")||100;return o>s?-1:o<s?1:0})}function cP(t){const e=nx(ex(t)),n=XH(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function uP(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,d,f)=>{var h;l.isBlock&&c>r&&(a+=s);const p=i==null?void 0:i[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:f,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function ZH(t,e){const n={from:0,to:t.content.size};return uP(t,n,e)}function dP(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Ur(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function fP(t,e){const n=Ur(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Ze(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function e6(t,e){const n=Ze(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function Nh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function hP(t,e){const n=Nh(typeof e=="string"?e:e.name,t.schema);return n==="node"?e6(t,e):n==="mark"?fP(t,e):{}}function t6(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function n6(t){const e=t6(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function pP(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),f=e.invert().map(c,-1),h=e.invert().map(d);r.push({oldRange:{from:f,to:h},newRange:{from:c,to:d}})})}),n6(r)}function rx(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Jd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:rx(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function mP(t,e,n={}){return t.find(r=>r.type===e&&Jd(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function Q1(t,e,n={}){return!!mP(t,e,n)}function ox(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!mP([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&Q1([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&Q1([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function sx(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=ox(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}var r6=(t,e,n,r=20)=>{const o=t.doc.resolve(n);let s=r,i=null;for(;s>0&&i===null;){const a=o.node(s);(a==null?void 0:a.type.name)===e?i=a:s-=1}return[i,s]};function Vp(t,e){return e.nodes[t]||e.marks[t]||null}function Ju(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}var o6=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)==null?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-s))}),n};function Fg(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Ur(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Jd(f.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:f,$to:h})=>{const p=f.pos,g=h.pos;t.doc.nodesBetween(p,g,(m,v)=>{if(!m.isText&&!m.marks.length)return;const x=Math.max(p,v),w=Math.min(g,v+m.nodeSize),b=w-x;i+=b,a.push(...m.marks.map(S=>({mark:S,from:x,to:w})))})}),i===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Jd(f.mark.attrs,n,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),c=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,h)=>f+h.to-h.from,0);return(l>0?l+c:l)>=i}function Jo(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?Ze(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),g=Math.min(o,h+f.nodeSize);a.push({node:f,from:p,to:g})});const l=o-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>Jd(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,h)=>f+h.to-h.from,0)>=l}function s6(t,e,n={}){if(!e)return Jo(t,null,n)||Fg(t,null,n);const r=Nh(e,t.schema);return r==="node"?Jo(t,e,n):r==="mark"?Fg(t,e,n):!1}var i6=(t,e)=>{const{$from:n,$to:r,$anchor:o}=t.selection;if(e){const s=Eh(a=>a.type.name===e)(t.selection);if(!s)return!1;const i=t.doc.resolve(s.pos+1);return o.pos+1===i.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},a6=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Y1(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function J1(t,e){const{nodeExtensions:n}=pc(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=ye(Y(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Th(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(Th(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function gP(t){return t instanceof J}function yP(t){return t instanceof ne}function ws(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function vP(t,e=null){if(!e)return null;const n=le.atStart(t),r=le.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?ne.create(t,ws(0,o,s),ws(t.content.size,o,s)):ne.create(t,ws(e,o,s),ws(e,o,s))}function l6(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof it||o instanceof ct))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,d)=>{i===0&&(i=d)}),t.setSelection(le.near(t.doc.resolve(i),n))}var Mh=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},c6=(t,e)=>{if(rx(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function wu(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const f=o6(c)+s;return i.forEach(h=>{if(d)return;const p=c6(f,h.find);if(!p)return;const g=l.state.tr,m=kh({state:l.state,transaction:g}),v={from:r-(p[0].length-s.length),to:o},{commands:x,chain:w,can:b}=new Ch({editor:n,state:m});h.handler({state:m,range:v,match:p,commands:x,chain:w,can:b})===null||!g.steps.length||(h.undoable&&g.setMeta(a,{transform:g,from:r,to:o,text:s}),l.dispatch(g),d=!0)}),d}function u6(t){const{editor:e,rules:n}=t,r=new qe({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=tx(I.from(d),i.schema);const{from:f}=l,h=f+d.length;wu({editor:e,from:f,to:h,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return wu({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&wu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?wu({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function d6(t){return Object.prototype.toString.call(t).slice(8,-1)}function bu(t){return d6(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function xP(t,e){const n={...t};return bu(t)&&bu(e)&&Object.keys(e).forEach(r=>{bu(e[r])&&bu(t[r])?n[r]=xP(t[r],e[r]):n[r]=e[r]}),n}var ix=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ye(Y(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ye(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>xP(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Kr=class wP extends ix{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new wP(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function f6(t){return typeof t=="number"}var h6=class{constructor(t){this.find=t.find,this.handler=t.handler}},p6=(t,e,n)=>{if(rx(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function m6(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:d}=new Ch({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,o,(p,g)=>{var m,v,x,w,b;if((v=(m=p.type)==null?void 0:m.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(b=(w=(x=p.content)==null?void 0:x.size)!=null?w:p.nodeSize)!=null?b:0,k=Math.max(r,g),T=Math.min(o,g+S);if(k>=T)return;const C=p.isText?p.text||"":p.textBetween(k-g,T-g,void 0,"");p6(C,s.find,i).forEach(A=>{if(A.index===void 0)return;const P=k+A.index+1,R=P+A[0].length,j={from:n.tr.mapping.map(P),to:n.tr.mapping.map(R)},V=s.handler({state:n,range:j,match:A,commands:l,chain:c,can:d,pasteEvent:i,dropEvent:a});f.push(V)})}),f.every(p=>p!==null)}var Su=null,g6=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function y6(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:f,to:h,rule:p,pasteEvt:g})=>{const m=d.tr,v=kh({state:d,transaction:m});if(!(!m6({editor:e,state:v,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:g,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(d=>new qe({view(f){const h=g=>{var m;r=(m=f.dom.parentElement)!=null&&m.contains(g.target)?f.dom.parentElement:null,r&&(Su=e)},p=()=>{Su&&(Su=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(s=r===f.dom.parentElement,a=h,!s){const p=Su;p!=null&&p.isEditable&&setTimeout(()=>{const g=p.state.selection;g&&p.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(f,h)=>{var p;const g=(p=h.clipboardData)==null?void 0:p.getData("text/html");return i=h,o=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const g=f[0],m=g.getMeta("uiEvent")==="paste"&&!o,v=g.getMeta("uiEvent")==="drop"&&!s,x=g.getMeta("applyPasteRules"),w=!!x;if(!m&&!v&&!w)return;if(w){let{text:k}=x;typeof k=="string"?k=k:k=tx(I.from(k),p.schema);const{from:T}=x,C=T+k.length,N=g6(k);return l({rule:d,state:p,from:T,to:{b:C},pasteEvt:N})}const b=h.doc.content.findDiffStart(p.doc.content),S=h.doc.content.findDiffEnd(p.doc.content);if(!(!f6(b)||!S||b===S.b))return l({rule:d,state:p,from:b,to:S,pasteEvt:i})}}))}var Ph=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=cP(t),this.schema=JH(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Vp(e.name,this.schema)},r=Y(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return nx([...this.extensions].reverse()).flatMap(r=>{const o={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Vp(r.name,this.schema)},s=[],i=Y(r,"addKeyboardShortcuts",o);let a={};if(r.type==="mark"&&Y(r,"exitable",o)&&(a.ArrowRight=()=>Kr.handleExit({editor:t,mark:r})),i){const h=Object.fromEntries(Object.entries(i()).map(([p,g])=>[p,()=>g({editor:t})]));a={...a,...h}}const l=yH(a);s.push(l);const c=Y(r,"addInputRules",o);if(Y1(r,t.options.enableInputRules)&&c){const h=c();if(h&&h.length){const p=u6({editor:t,rules:h}),g=Array.isArray(p)?p:[p];s.push(...g)}}const d=Y(r,"addPasteRules",o);if(Y1(r,t.options.enablePasteRules)&&d){const h=d();if(h&&h.length){const p=y6({editor:t,rules:h});s.push(...p)}}const f=Y(r,"addProseMirrorPlugins",o);if(f){const h=f();s.push(...h)}return s})}get attributes(){return lP(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=pc(this.extensions);return Object.fromEntries(e.filter(n=>!!Y(n,"addNodeView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ze(n.name,this.schema)},s=Y(n,"addNodeView",o);if(!s)return[];const i=(a,l,c,d,f)=>{const h=Yd(a,r);return s()({node:a,view:l,getPos:c,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:h})};return[n.name,i]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=pc(this.extensions);return Object.fromEntries(e.filter(n=>!!Y(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ur(n.name,this.schema)},s=Y(n,"addMarkView",o);if(!s)return[];const i=(a,l,c)=>{const d=Yd(a,r);return s()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:d,updateAttributes:f=>{RV(a,t,f)}})};return[n.name,i]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Vp(e.name,this.schema)};e.type==="mark"&&((n=ye(Y(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const o=Y(e,"onBeforeCreate",r),s=Y(e,"onCreate",r),i=Y(e,"onUpdate",r),a=Y(e,"onSelectionUpdate",r),l=Y(e,"onTransaction",r),c=Y(e,"onFocus",r),d=Y(e,"onBlur",r),f=Y(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};Ph.resolve=cP;Ph.sort=nx;Ph.flatten=ex;var v6={};oP(v6,{ClipboardTextSerializer:()=>SP,Commands:()=>EP,Delete:()=>NP,Drop:()=>TP,Editable:()=>MP,FocusEvents:()=>AP,Keymap:()=>OP,Paste:()=>jP,Tabindex:()=>RP,focusEventsPluginKey:()=>PP});var ke=class bP extends ix{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new bP(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},SP=ke.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qe({key:new dt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=dP(n);return uP(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),kP={};oP(kP,{blur:()=>x6,clearContent:()=>w6,clearNodes:()=>b6,command:()=>S6,createParagraphNear:()=>k6,cut:()=>C6,deleteCurrentNode:()=>E6,deleteNode:()=>N6,deleteRange:()=>T6,deleteSelection:()=>M6,enter:()=>P6,exitCode:()=>A6,extendMarkRange:()=>O6,first:()=>j6,focus:()=>D6,forEach:()=>I6,insertContent:()=>L6,insertContentAt:()=>F6,joinBackward:()=>B6,joinDown:()=>$6,joinForward:()=>H6,joinItemBackward:()=>V6,joinItemForward:()=>W6,joinTextblockBackward:()=>U6,joinTextblockForward:()=>K6,joinUp:()=>z6,keyboardShortcut:()=>G6,lift:()=>Q6,liftEmptyBlock:()=>Y6,liftListItem:()=>J6,newlineInCode:()=>X6,resetAttributes:()=>Z6,scrollIntoView:()=>eV,selectAll:()=>tV,selectNodeBackward:()=>nV,selectNodeForward:()=>rV,selectParentNode:()=>oV,selectTextblockEnd:()=>sV,selectTextblockStart:()=>iV,setContent:()=>aV,setMark:()=>cV,setMeta:()=>uV,setNode:()=>dV,setNodeSelection:()=>fV,setTextSelection:()=>hV,sinkListItem:()=>pV,splitBlock:()=>mV,splitListItem:()=>gV,toggleList:()=>yV,toggleMark:()=>vV,toggleNode:()=>xV,toggleWrap:()=>wV,undoInputRule:()=>bV,unsetAllMarks:()=>SV,unsetMark:()=>kV,updateAttributes:()=>CV,wrapIn:()=>EV,wrapInList:()=>NV});var x6=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),w6=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),b6=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,f=c.resolve(d.map(l)),h=c.resolve(d.map(l+a.nodeSize)),p=f.blockRange(h);if(!p)return;const g=Oa(p);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,m)}(g||g===0)&&e.lift(p,g)})}),!0},S6=t=>e=>t(e),k6=()=>({state:t,dispatch:e})=>AH(t,e),C6=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new ne(r.doc.resolve(Math.max(i-1,0)))),!0},E6=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},N6=t=>({tr:e,state:n,dispatch:r})=>{const o=Ze(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},T6=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},M6=()=>({state:t,dispatch:e})=>vH(t,e),P6=()=>({commands:t})=>t.keyboardShortcut("Enter"),A6=()=>({state:t,dispatch:e})=>PH(t,e),O6=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Ur(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:d}=a;if(o){const f=ox(l,s,e);if(f&&f.from<=c&&f.to>=d){const h=ne.create(i,f.from,f.to);n.setSelection(h)}}return!0},j6=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function R6(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ax(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var D6=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(ax()||R6())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!yP(n.state.selection))return i(),!0;const a=vP(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},I6=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),L6=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),_6=t=>!("type"in t),F6=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{hc(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=hc(e,s.schema,{parseOptions:c,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((_6(a)?a:[a]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),d===f&&p){const{parent:v}=r.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,f+=1)}let m;if(h){if(Array.isArray(e))m=e.map(v=>v.text||"").join("");else if(e instanceof I){let v="";e.forEach(x=>{x.text&&(v+=x.text)}),m=v}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,d,f)}else{m=a;const v=r.doc.resolve(d),x=v.node(),w=v.parentOffset===0,b=x.isText||x.isTextblock,S=x.content.size>0;w&&b&&S&&(d=Math.max(0,d-1)),r.replaceWith(d,f,m)}n.updateSelection&&l6(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:m})}return!0},z6=()=>({state:t,dispatch:e})=>EH(t,e),$6=()=>({state:t,dispatch:e})=>NH(t,e),B6=()=>({state:t,dispatch:e})=>xH(t,e),H6=()=>({state:t,dispatch:e})=>kH(t,e),V6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=yh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},W6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=yh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},U6=()=>({state:t,dispatch:e})=>wH(t,e),K6=()=>({state:t,dispatch:e})=>bH(t,e);function CP(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function q6(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))ax()||CP()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var G6=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=q6(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0},Q6=(t,e={})=>({state:n,dispatch:r})=>{const o=Ze(t,n.schema);return Jo(n,o,e)?TH(n,r):!1},Y6=()=>({state:t,dispatch:e})=>OH(t,e),J6=t=>({state:e,dispatch:n})=>{const r=Ze(t,e.schema);return $H(r)(e,n)},X6=()=>({state:t,dispatch:e})=>MH(t,e);function X1(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}var Z6=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Nh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Ze(t,r.schema)),a==="mark"&&(i=Ur(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,X1(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(f=>{i===f.type&&n.addMark(d,d+c.nodeSize,i.create(X1(f.attrs,e)))})})}),!0):!1},eV=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),tV=()=>({tr:t,dispatch:e})=>{if(e){const n=new On(t.doc);t.setSelection(n)}return!0},nV=()=>({state:t,dispatch:e})=>SH(t,e),rV=()=>({state:t,dispatch:e})=>CH(t,e),oV=()=>({state:t,dispatch:e})=>jH(t,e),sV=()=>({state:t,dispatch:e})=>IH(t,e),iV=()=>({state:t,dispatch:e})=>DH(t,e),aV=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const c=_g(t,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return i&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return i&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function lV(t,e,n){var r;const{selection:o}=e;let s=null;if(yP(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,f,h)=>{if(c)return!1;if(d.isInline){const p=!h||h.type.allowsMarkType(n),g=!!n.isInSet(d.marks)||!d.marks.some(m=>m.type.excludes(n));c=p&&g}return!c}),c})}var cV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Ur(t,r.schema);if(o)if(i){const c=fP(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(d,f,(h,p)=>{const g=Math.max(p,d),m=Math.min(p+h.nodeSize,f);h.marks.find(x=>x.type===l)?h.marks.forEach(x=>{l===x.type&&n.addMark(g,m,l.create({...x.attrs,...e}))}):n.addMark(g,m,l.create(e))})});return lV(r,n,l)},uV=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),dV=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=Ze(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>K1(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>K1(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=ws(t,0,r.content.size),s=J.create(r,o);e.setSelection(s)}return!0},hV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=ne.atStart(r).from,a=ne.atEnd(r).to,l=ws(o,i,a),c=ws(s,i,a),d=ne.create(r,l,c);e.setSelection(d)}return!0},pV=t=>({state:e,dispatch:n})=>{const r=Ze(t,e.schema);return VH(r)(e,n)};function Z1(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}var mV=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,d=Ju(c,a.node().type.name,a.node().attrs);if(s instanceof J&&s.node.isBlock)return!a.parentOffset||!Bi(i,a.pos)?!1:(r&&(t&&Z1(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:KH(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=f&&h?[{type:h,attrs:d}]:void 0,g=Bi(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!g&&Bi(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(g=!0,p=h?[{type:h,attrs:d}]:void 0),r){if(g&&(s instanceof ne&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!f&&!a.parentOffset&&a.parent.type!==h)){const m=e.mapping.map(a.before()),v=e.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&Z1(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return g},gV=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=Ze(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let x=I.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-w;N>=l.depth-3;N-=1)x=I.from(l.node(N).copy(x));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...Ju(h,l.node().type.name,l.node().attrs),...e},k=((i=a.contentMatch.defaultType)==null?void 0:i.createAndFill(S))||void 0;x=x.append(I.from(a.createAndFill(null,k)||void 0));const T=l.before(l.depth-(w-1));n.replace(T,l.after(-b),new W(x,4-w,0));let C=-1;n.doc.nodesBetween(T,n.doc.content.size,(N,A)=>{if(C>-1)return!1;N.isTextblock&&N.content.size===0&&(C=A+1)}),C>-1&&n.setSelection(ne.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,g={...Ju(h,f.type.name,f.attrs),...e},m={...Ju(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=p?[{type:a,attrs:g},{type:p,attrs:m}]:[{type:a,attrs:g}];if(!Bi(n.doc,l.pos,2))return!1;if(o){const{selection:x,storedMarks:w}=r,{splittableMarks:b}=s.extensionManager,S=w||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!S||!o)return!0;const k=S.filter(T=>b.includes(T.type.name));n.ensureMarks(k)}return!0},Wp=(t,e)=>{const n=Eh(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&rs(t.doc,n.pos)&&t.join(n.pos),!0},Up=(t,e)=>{const n=Eh(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&rs(t.doc,r)&&t.join(r),!0},yV=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:f,splittableMarks:h}=o.extensionManager,p=Ze(t,i.schema),g=Ze(e,i.schema),{selection:m,storedMarks:v}=i,{$from:x,$to:w}=m,b=x.blockRange(w),S=v||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const k=Eh(T=>J1(T.type.name,f))(m);if(b.depth>=1&&k&&b.depth-k.depth<=1){if(k.node.type===p)return c.liftListItem(g);if(J1(k.node.type.name,f)&&p.validContent(k.node.content)&&a)return l().command(()=>(s.setNodeMarkup(k.pos,p),!0)).command(()=>Wp(s,p)).command(()=>Up(s,p)).run()}return!n||!S||!a?l().command(()=>d().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Wp(s,p)).command(()=>Up(s,p)).run():l().command(()=>{const T=d().wrapInList(p,r),C=S.filter(N=>h.includes(N.type.name));return s.ensureMarks(C),T?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Wp(s,p)).command(()=>Up(s,p)).run()},vV=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Ur(t,r.schema);return Fg(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},xV=(t,e,n={})=>({state:r,commands:o})=>{const s=Ze(t,r.schema),i=Ze(e,r.schema),a=Jo(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},wV=(t,e={})=>({state:n,commands:r})=>{const o=Ze(t,n.schema);return Jo(n,o,e)?r.lift(o):r.wrapIn(o,e)},bV=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},SV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},kV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Ur(t,r.schema),{$from:c,empty:d,ranges:f}=a;if(!o)return!0;if(d&&i){let{from:h,to:p}=a;const g=(s=c.marks().find(v=>v.type===l))==null?void 0:s.attrs,m=ox(c,l,g);m&&(h=m.from,p=m.to),n.removeMark(h,p,l)}else f.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},CV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Nh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Ze(t,r.schema)),a==="mark"&&(i=Ur(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let f,h,p,g;n.selection.empty?r.doc.nodesBetween(c,d,(m,v)=>{s&&s===m.type&&(p=Math.max(v,c),g=Math.min(v+m.nodeSize,d),f=v,h=m)}):r.doc.nodesBetween(c,d,(m,v)=>{v<c&&s&&s===m.type&&(p=Math.max(v,c),g=Math.min(v+m.nodeSize,d),f=v,h=m),v>=c&&v<=d&&(s&&s===m.type&&n.setNodeMarkup(v,void 0,{...m.attrs,...e}),i&&m.marks.length&&m.marks.forEach(x=>{if(i===x.type){const w=Math.max(v,c),b=Math.min(v+m.nodeSize,d);n.addMark(w,b,i.create({...x.attrs,...e}))}}))}),h&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(m=>{i===m.type&&n.addMark(p,g,i.create({...m.attrs,...e}))}))}),!0):!1},EV=(t,e={})=>({state:n,dispatch:r})=>{const o=Ze(t,n.schema);return LH(o,e)(n,r)},NV=(t,e={})=>({state:n,dispatch:r})=>{const o=Ze(t,n.schema);return _H(o,e)(n,r)},EP=ke.create({name:"commands",addCommands(){return{...kP}}}),NP=ke.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,o;const s=()=>{var i,a,l,c;if((c=(l=(a=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=sP(t.before,[t,...e]);pP(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(g,m)=>{const v=m+g.nodeSize-2,x=p.oldRange.from<=m&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:m,to:v,newFrom:d.mapping.map(m),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!x,editor:this.editor,transaction:t,combinedTransform:d})})});const h=d.mapping;d.steps.forEach((p,g)=>{var m,v;if(p instanceof Kn){const x=h.slice(g).map(p.from,-1),w=h.slice(g).map(p.to),b=h.invert().map(x,-1),S=h.invert().map(w),k=(m=d.doc.nodeAt(x-1))==null?void 0:m.marks.some(C=>C.eq(p.mark)),T=(v=d.doc.nodeAt(w))==null?void 0:v.marks.some(C=>C.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:b,to:S},newRange:{from:x,to:w},partial:!!(T||k),editor:this.editor,transaction:t,combinedTransform:d})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(s,0):s()}}),TP=ke.create({name:"drop",addProseMirrorPlugins(){return[new qe({key:new dt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),MP=ke.create({name:"editable",addProseMirrorPlugins(){return[new qe({key:new dt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),PP=new dt("focusEvents"),AP=ke.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qe({key:PP,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),OP=ke.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:f}=l,{pos:h,parent:p}=f,g=f.parent.isTextblock&&h>0?a.doc.resolve(h-1):f,m=g.parent.type.spec.isolating,v=f.pos-f.parentOffset,x=m&&g.parent.childCount===1?v===f.pos:le.atStart(c).from===h;return!d||!p.type.isTextblock||p.textContent.length||!x||x&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ax()||CP()?s:o},addProseMirrorPlugins(){return[new qe({key:new dt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),o=t.some(m=>m.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=le.atStart(e.doc).from,c=le.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!Th(n.doc))return;const h=n.tr,p=kh({state:n,transaction:h}),{commands:g}=new Ch({editor:this.editor,state:p});if(g.clearNodes(),!!h.steps.length)return h}})]}}),jP=ke.create({name:"paste",addProseMirrorPlugins(){return[new qe({key:new dt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),RP=ke.create({name:"tabindex",addProseMirrorPlugins(){return[new qe({key:new dt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TV=class pi{constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new pi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new pi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new pi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new pi(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new pi(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},MV=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function PV(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}var AV=class extends UH{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:o,moved:s})=>this.options.onDrop(r,o,s)),this.on("paste",({event:r,slice:o})=>this.options.onPaste(r,o)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=vP(e,this.options.autofocus);this.editorState=Mi.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=PV(MV,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=aP(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;n=n.filter(i=>!i.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[MP,SP.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),EP,AP,OP,RP,TP,jP,NP].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Ph(r,this)}createCommandManager(){this.commandManager=new Ch({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=_g(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=_g(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new YM(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),o=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!o)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=i==null?void 0:i.getMeta("focus"),l=i==null?void 0:i.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:i}),l&&this.emit("blur",{editor:this,event:l.event,transaction:i}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return hP(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return s6(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return tx(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return ZH(this.state.doc,{blockSeparator:e,textSerializers:{...dP(this.schema),...n}})}get isEmpty(){return Th(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new TV(e,this)}get $doc(){return this.$pos(0)}};function Gs(t){return new Mh({find:t.find,handler:({state:e,range:n,match:r})=>{const o=ye(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),d=c+i.length;if(sx(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function OV(t){return new Mh({find:t.find,handler:({state:e,range:n,match:r})=>{const o=ye(t.getAttributes,void 0,r)||{},{tr:s}=e,i=n.from;let a=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=i+c;d>a?d=a:a=d+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,i+r[0].length-1),s.replaceWith(d,a,l)}else if(r[0]){const c=t.type.isInline?i:i-1;s.insert(c,t.type.create(o)).delete(s.mapping.map(i),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function zg(t){return new Mh({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=ye(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function xa(t){return new Mh({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=ye(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&Bv(l,t.type,s);if(!c)return null;if(i.wrap(l,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,g=h||f.$to.parentOffset&&f.$from.marks();if(g){const m=g.filter(v=>p.includes(v.type.name));i.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(f,s).run()}const d=i.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&rs(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&i.join(n.from-1)},undoable:t.undoable})}function jV(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof J){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let o=r.depth;for(;o>=0;){const s=r.index(o);if(r.node(o).contentMatchAt(s).matchType(e))return!0;o-=1}return!1}function RV(t,e,n={}){const{state:r}=e,{doc:o,tr:s}=r,i=t;o.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let f=null;if(a.marks.forEach(p=>{if(p!==i)return!1;f=p}),!f)return;let h=!1;if(Object.keys(n).forEach(p=>{n[p]!==f.attrs[p]&&(h=!0)}),h){const p=t.type.create({...t.attrs,...n});s.removeMark(c,d,t.type),s.addMark(c,d,p)}}),s.docChanged&&e.view.dispatch(s)}var Xt=class DP extends ix{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new DP(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Xo(t){return new h6({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=ye(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),f=n.from+l.indexOf(a),h=f+a.length;if(sx(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(v=>v===t.type&&v!==g.mark.type)).filter(g=>g.to>f).length)return null;h<n.to&&i.delete(h,n.to),f>n.from&&i.delete(n.from+d,f),c=n.from+d+a.length,i.addMark(n.from+d,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}var DV=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;for(o of e.entries())if(!t(o[1],n.get(o[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(e[o]!==n[o])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!(i==="_owner"&&e.$$typeof)&&!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n};const IV=Of(DV);var IP={exports:{}},LP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah=y,LV=Gf;function _V(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var FV=typeof Object.is=="function"?Object.is:_V,zV=LV.useSyncExternalStore,$V=Ah.useRef,BV=Ah.useEffect,HV=Ah.useMemo,VV=Ah.useDebugValue;LP.useSyncExternalStoreWithSelector=function(t,e,n,r,o){var s=$V(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=HV(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),o!==void 0&&i.hasValue){var g=i.value;if(o(g,p))return f=g}return f=p}if(g=f,FV(d,p))return g;var m=r(p);return o!==void 0&&o(g,m)?(d=p,g):(d=p,f=m)}var c=!1,d,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,o]);var a=zV(t,s[0],s[1]);return BV(function(){i.hasValue=!0,i.value=a},[a]),VV(a),a};IP.exports=LP;var WV=IP.exports,UV=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},KV=({contentComponent:t})=>{const e=Gf.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})};function qV(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Kk.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}var GV=class extends fe.Component{constructor(t){var e;super(t),this.editorContentRef=fe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=qV(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:UV(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&u.jsx(KV,{contentComponent:t.contentComponent})]})}},QV=y.forwardRef((t,e)=>{const n=fe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return fe.createElement(GV,{key:n,innerRef:e,...t})}),YV=fe.memo(QV),JV=typeof window<"u"?y.useLayoutEffect:y.useEffect,XV=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function ZV(t){var e;const[n]=y.useState(()=>new XV(t.editor)),r=WV.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:IV);return JV(()=>n.watch(t.editor),[t.editor,n]),y.useDebugValue(r),r}var eW=!1,$g=typeof window>"u",tW=$g||!!(typeof window<"u"&&window.next),nW=class _P{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return $g||tW?null:this.createEditor();if(this.options.current.immediatelyRender&&$g&&eW)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onBeforeCreate)==null?void 0:s.call(o,...r)},onBlur:(...r)=>{var o,s;return(s=(o=this.options.current).onBlur)==null?void 0:s.call(o,...r)},onCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onCreate)==null?void 0:s.call(o,...r)},onDestroy:(...r)=>{var o,s;return(s=(o=this.options.current).onDestroy)==null?void 0:s.call(o,...r)},onFocus:(...r)=>{var o,s;return(s=(o=this.options.current).onFocus)==null?void 0:s.call(o,...r)},onSelectionUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onSelectionUpdate)==null?void 0:s.call(o,...r)},onTransaction:(...r)=>{var o,s;return(s=(o=this.options.current).onTransaction)==null?void 0:s.call(o,...r)},onUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onUpdate)==null?void 0:s.call(o,...r)},onContentError:(...r)=>{var o,s;return(s=(o=this.options.current).onContentError)==null?void 0:s.call(o,...r)},onDrop:(...r)=>{var o,s;return(s=(o=this.options.current).onDrop)==null?void 0:s.call(o,...r)},onPaste:(...r)=>{var o,s;return(s=(o=this.options.current).onPaste)==null?void 0:s.call(o,...r)},onDelete:(...r)=>{var o,s;return(s=(o=this.options.current).onDelete)==null?void 0:s.call(o,...r)}};return new AV(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((o,s)=>{var i;return o===((i=n.extensions)==null?void 0:i[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?_P.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function rW(t={},e=[]){const n=y.useRef(t);n.current=t;const[r]=y.useState(()=>new nW(n)),o=Gf.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return y.useDebugValue(o),y.useEffect(r.onRender(e)),ZV({editor:o,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),o}var oW=y.createContext({editor:null});oW.Consumer;var sW=y.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),iW=()=>y.useContext(sW);fe.forwardRef((t,e)=>{const{onDragStart:n}=iW(),r=t.as||"div";return u.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});fe.createContext({markViewContentRef:()=>{}});var Xd=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},aW=/^\s*>\s$/,lW=Xt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Xd("blockquote",{...Ke(this.options.HTMLAttributes,t),children:Xd("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xa({find:aW,type:this.type})]}}),cW=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,uW=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,dW=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,fW=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,hW=Kr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Xd("strong",{...Ke(this.options.HTMLAttributes,t),children:Xd("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gs({find:cW,type:this.type}),Gs({find:dW,type:this.type})]},addPasteRules(){return[Xo({find:uW,type:this.type}),Xo({find:fW,type:this.type})]}}),pW=/(^|[^`])`([^`]+)`(?!`)$/,mW=/(^|[^`])`([^`]+)`(?!`)/g,gW=Kr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gs({find:pW,type:this.type})]},addPasteRules(){return[Xo({find:mW,type:this.type})]}}),Kp=4,yW=/^```([a-z]+)?[\s\n]$/,vW=/^~~~([a-z]+)?[\s\n]$/,xW=Xt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Kp,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ke(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Kp,{state:r}=t,{selection:o}=r,{$from:s,empty:i}=o;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return i?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=o,p=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(g=>a+g).join(`
`);return l.replaceWith(c,d,r.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Kp,{state:r}=t,{selection:o}=r,{$from:s,empty:i}=o;return s.parent.type!==this.type?!1:i?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),f=s.end(),p=r.doc.textBetween(d,f,`
`,`
`).split(`
`);let g=0,m=0;const v=c-d;for(let T=0;T<p.length;T+=1){if(m+p[T].length>=v){g=T;break}m+=p[T].length+1}const w=((l=p[g].match(/^ */))==null?void 0:l[0])||"",b=Math.min(w.length,n);if(b===0)return!0;let S=d;for(let T=0;T<g;T+=1)S+=p[T].length+1;return a.delete(S,S+b),c-S<=b&&a.setSelection(ne.create(a.doc,S)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=o,h=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var g;const m=((g=p.match(/^ */))==null?void 0:g[0])||"",v=Math.min(m.length,n);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!s||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(le.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[zg({find:yW,type:this.type,getAttributes:t=>({language:t[1]})}),zg({find:vW,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new qe({key:new dt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:i,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:s},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(ne.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),wW=Xt.create({name:"doc",topNode:!0,content:"block+"}),bW=Xt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ke(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&i){const f=l.filter(h=>a.includes(h.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),SW=Xt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ke(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>zg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),kW=Xt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ke(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!jV(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,o=t();return gP(n)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({state:s,tr:i,dispatch:a})=>{if(a){const{$to:l}=i.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(ne.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(J.create(i.doc,l.pos)):i.setSelection(ne.create(i.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=d==null?void 0:d.create();f&&(i.insert(c,f),i.setSelection(ne.create(i.doc,c+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[OV({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),CW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,EW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,NW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,TW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,MW=Kr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gs({find:CW,type:this.type}),Gs({find:NW,type:this.type})]},addPasteRules(){return[Xo({find:EW,type:this.type}),Xo({find:TW,type:this.type})]}});const PW="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",AW="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Bg="numeric",Hg="ascii",Vg="alpha",Cl="asciinumeric",ll="alphanumeric",Wg="domain",FP="emoji",OW="scheme",jW="slashscheme",qp="whitespace";function RW(t,e){return t in e||(e[t]=[]),e[t]}function bs(t,e,n){e[Bg]&&(e[Cl]=!0,e[ll]=!0),e[Hg]&&(e[Cl]=!0,e[Vg]=!0),e[Cl]&&(e[ll]=!0),e[Vg]&&(e[ll]=!0),e[ll]&&(e[Wg]=!0),e[FP]&&(e[Wg]=!0);for(const r in e){const o=RW(r,n);o.indexOf(t)<0&&o.push(t)}}function DW(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Kt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Kt.groups={};Kt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||Kt.groups;let o;return e&&e.j?o=e:(o=new Kt(e),n&&r&&bs(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(t[i]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Kt.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let i,a=o.go(t);if(a?(i=new Kt,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new Kt,s){if(r)if(i.t&&typeof i.t=="string"){const l=Object.assign(DW(i.t,r),n);bs(s,l,r)}else n&&bs(s,n,r);i.t=s}return o.j[t]=i,i}};const ae=(t,e,n,r,o)=>t.ta(e,n,r,o),He=(t,e,n,r,o)=>t.tr(e,n,r,o),eb=(t,e,n,r,o)=>t.ts(e,n,r,o),L=(t,e,n,r,o)=>t.tt(e,n,r,o),Cr="WORD",Ug="UWORD",zP="ASCIINUMERICAL",$P="ALPHANUMERICAL",mc="LOCALHOST",Kg="TLD",qg="UTLD",Xu="SCHEME",mi="SLASH_SCHEME",lx="NUM",Gg="WS",cx="NL",El="OPENBRACE",Nl="CLOSEBRACE",Zd="OPENBRACKET",ef="CLOSEBRACKET",tf="OPENPAREN",nf="CLOSEPAREN",rf="OPENANGLEBRACKET",of="CLOSEANGLEBRACKET",sf="FULLWIDTHLEFTPAREN",af="FULLWIDTHRIGHTPAREN",lf="LEFTCORNERBRACKET",cf="RIGHTCORNERBRACKET",uf="LEFTWHITECORNERBRACKET",df="RIGHTWHITECORNERBRACKET",ff="FULLWIDTHLESSTHAN",hf="FULLWIDTHGREATERTHAN",pf="AMPERSAND",mf="APOSTROPHE",gf="ASTERISK",io="AT",yf="BACKSLASH",vf="BACKTICK",xf="CARET",fo="COLON",ux="COMMA",wf="DOLLAR",rr="DOT",bf="EQUALS",dx="EXCLAMATION",vn="HYPHEN",Tl="PERCENT",Sf="PIPE",kf="PLUS",Cf="POUND",Ml="QUERY",fx="QUOTE",BP="FULLWIDTHMIDDLEDOT",hx="SEMI",or="SLASH",Pl="TILDE",Ef="UNDERSCORE",HP="EMOJI",Nf="SYM";var VP=Object.freeze({__proto__:null,ALPHANUMERICAL:$P,AMPERSAND:pf,APOSTROPHE:mf,ASCIINUMERICAL:zP,ASTERISK:gf,AT:io,BACKSLASH:yf,BACKTICK:vf,CARET:xf,CLOSEANGLEBRACKET:of,CLOSEBRACE:Nl,CLOSEBRACKET:ef,CLOSEPAREN:nf,COLON:fo,COMMA:ux,DOLLAR:wf,DOT:rr,EMOJI:HP,EQUALS:bf,EXCLAMATION:dx,FULLWIDTHGREATERTHAN:hf,FULLWIDTHLEFTPAREN:sf,FULLWIDTHLESSTHAN:ff,FULLWIDTHMIDDLEDOT:BP,FULLWIDTHRIGHTPAREN:af,HYPHEN:vn,LEFTCORNERBRACKET:lf,LEFTWHITECORNERBRACKET:uf,LOCALHOST:mc,NL:cx,NUM:lx,OPENANGLEBRACKET:rf,OPENBRACE:El,OPENBRACKET:Zd,OPENPAREN:tf,PERCENT:Tl,PIPE:Sf,PLUS:kf,POUND:Cf,QUERY:Ml,QUOTE:fx,RIGHTCORNERBRACKET:cf,RIGHTWHITECORNERBRACKET:df,SCHEME:Xu,SEMI:hx,SLASH:or,SLASH_SCHEME:mi,SYM:Nf,TILDE:Pl,TLD:Kg,UNDERSCORE:Ef,UTLD:qg,UWORD:Ug,WORD:Cr,WS:Gg});const br=/[a-z]/,Qa=new RegExp("\\p{L}","u"),Gp=new RegExp("\\p{Emoji}","u"),Sr=/\d/,Qp=/\s/,tb="\r",Yp=`
`,IW="",LW="",Jp="";let ku=null,Cu=null;function _W(t=[]){const e={};Kt.groups=e;const n=new Kt;ku==null&&(ku=nb(PW)),Cu==null&&(Cu=nb(AW)),L(n,"'",mf),L(n,"{",El),L(n,"}",Nl),L(n,"[",Zd),L(n,"]",ef),L(n,"(",tf),L(n,")",nf),L(n,"<",rf),L(n,">",of),L(n,"",sf),L(n,"",af),L(n,"",lf),L(n,"",cf),L(n,"",uf),L(n,"",df),L(n,"",ff),L(n,"",hf),L(n,"&",pf),L(n,"*",gf),L(n,"@",io),L(n,"`",vf),L(n,"^",xf),L(n,":",fo),L(n,",",ux),L(n,"$",wf),L(n,".",rr),L(n,"=",bf),L(n,"!",dx),L(n,"-",vn),L(n,"%",Tl),L(n,"|",Sf),L(n,"+",kf),L(n,"#",Cf),L(n,"?",Ml),L(n,'"',fx),L(n,"/",or),L(n,";",hx),L(n,"~",Pl),L(n,"_",Ef),L(n,"\\",yf),L(n,"",BP);const r=He(n,Sr,lx,{[Bg]:!0});He(r,Sr,r);const o=He(r,br,zP,{[Cl]:!0}),s=He(r,Qa,$P,{[ll]:!0}),i=He(n,br,Cr,{[Hg]:!0});He(i,Sr,o),He(i,br,i),He(o,Sr,o),He(o,br,o);const a=He(n,Qa,Ug,{[Vg]:!0});He(a,br),He(a,Sr,s),He(a,Qa,a),He(s,Sr,s),He(s,br),He(s,Qa,s);const l=L(n,Yp,cx,{[qp]:!0}),c=L(n,tb,Gg,{[qp]:!0}),d=He(n,Qp,Gg,{[qp]:!0});L(n,Jp,d),L(c,Yp,l),L(c,Jp,d),He(c,Qp,d),L(d,tb),L(d,Yp),He(d,Qp,d),L(d,Jp,d);const f=He(n,Gp,HP,{[FP]:!0});L(f,"#"),He(f,Gp,f),L(f,IW,f);const h=L(f,LW);L(h,"#"),He(h,Gp,f);const p=[[br,i],[Sr,o]],g=[[br,null],[Qa,a],[Sr,s]];for(let m=0;m<ku.length;m++)Xr(n,ku[m],Kg,Cr,p);for(let m=0;m<Cu.length;m++)Xr(n,Cu[m],qg,Ug,g);bs(Kg,{tld:!0,ascii:!0},e),bs(qg,{utld:!0,alpha:!0},e),Xr(n,"file",Xu,Cr,p),Xr(n,"mailto",Xu,Cr,p),Xr(n,"http",mi,Cr,p),Xr(n,"https",mi,Cr,p),Xr(n,"ftp",mi,Cr,p),Xr(n,"ftps",mi,Cr,p),bs(Xu,{scheme:!0,ascii:!0},e),bs(mi,{slashscheme:!0,ascii:!0},e),t=t.sort((m,v)=>m[0]>v[0]?1:-1);for(let m=0;m<t.length;m++){const v=t[m][0],w=t[m][1]?{[OW]:!0}:{[jW]:!0};v.indexOf("-")>=0?w[Wg]=!0:br.test(v)?Sr.test(v)?w[Cl]=!0:w[Hg]=!0:w[Bg]=!0,eb(n,v,v,w)}return eb(n,"localhost",mc,{ascii:!0}),n.jd=new Kt(Nf),{start:n,tokens:Object.assign({groups:e},VP)}}function WP(t,e){const n=FW(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=t,l=null,c=0,d=null,f=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(f=0,h=0,d=a):f>=0&&(f+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=f,i-=h,c-=f,o.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return o}function FW(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function Xr(t,e,n,r,o){let s;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Kt(r),s.jr=o.slice(),t.j[l]=s),t=s}return s=new Kt(n),s.jr=o.slice(),t.j[e[i-1]]=s,s}function nb(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(t[r]),r++}return e}const gc={defaultProtocol:"http",events:null,format:rb,formatHref:rb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function px(t,e=null){let n=Object.assign({},gc);t&&(n=Object.assign(n,t instanceof px?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}px.prototype={o:gc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:gc[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function rb(t){return t}function UP(t,e){this.t="token",this.v=t,this.tk=e}UP.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=gc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),d&&Object.assign(i,d),{tagName:o,attributes:i,content:s,eventListeners:f}}};function Oh(t,e){class n extends UP{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const ob=Oh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),sb=Oh("text"),zW=Oh("nl"),Eu=Oh("url",{isLink:!0,toHref(t=gc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==mc&&t[1].t===fo}}),yn=t=>new Kt(t);function $W({groups:t}){const e=t.domain.concat([pf,gf,io,yf,vf,xf,wf,bf,vn,lx,Tl,Sf,kf,Cf,or,Nf,Pl,Ef]),n=[mf,fo,ux,rr,dx,Tl,Ml,fx,hx,rf,of,El,Nl,ef,Zd,tf,nf,sf,af,lf,cf,uf,df,ff,hf],r=[pf,mf,gf,yf,vf,xf,wf,bf,vn,El,Nl,Tl,Sf,kf,Cf,Ml,or,Nf,Pl,Ef],o=yn(),s=L(o,Pl);ae(s,r,s),ae(s,t.domain,s);const i=yn(),a=yn(),l=yn();ae(o,t.domain,i),ae(o,t.scheme,a),ae(o,t.slashscheme,l),ae(i,r,s),ae(i,t.domain,i);const c=L(i,io);L(s,io,c),L(a,io,c),L(l,io,c);const d=L(s,rr);ae(d,r,s),ae(d,t.domain,s);const f=yn();ae(c,t.domain,f),ae(f,t.domain,f);const h=L(f,rr);ae(h,t.domain,f);const p=yn(ob);ae(h,t.tld,p),ae(h,t.utld,p),L(c,mc,p);const g=L(f,vn);L(g,vn,g),ae(g,t.domain,f),ae(p,t.domain,f),L(p,rr,h),L(p,vn,g);const m=L(p,fo);ae(m,t.numeric,ob);const v=L(i,vn),x=L(i,rr);L(v,vn,v),ae(v,t.domain,i),ae(x,r,s),ae(x,t.domain,i);const w=yn(Eu);ae(x,t.tld,w),ae(x,t.utld,w),ae(w,t.domain,i),ae(w,r,s),L(w,rr,x),L(w,vn,v),L(w,io,c);const b=L(w,fo),S=yn(Eu);ae(b,t.numeric,S);const k=yn(Eu),T=yn();ae(k,e,k),ae(k,n,T),ae(T,e,k),ae(T,n,T),L(w,or,k),L(S,or,k);const C=L(a,fo),N=L(l,fo),A=L(N,or),P=L(A,or);ae(a,t.domain,i),L(a,rr,x),L(a,vn,v),ae(l,t.domain,i),L(l,rr,x),L(l,vn,v),ae(C,t.domain,k),L(C,or,k),L(C,Ml,k),ae(P,t.domain,k),ae(P,e,k),L(P,or,k);const R=[[El,Nl],[Zd,ef],[tf,nf],[rf,of],[sf,af],[lf,cf],[uf,df],[ff,hf]];for(let j=0;j<R.length;j++){const[V,D]=R[j],K=L(k,V);L(T,V,K),L(K,D,k);const B=yn(Eu);ae(K,e,B);const $=yn();ae(K,n),ae(B,e,B),ae(B,n,$),ae($,e,B),ae($,n,$),L(B,D,k),L($,D,k)}return L(o,mc,w),L(o,cx,zW),{start:o,tokens:VP}}function BW(t,e,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=t,l=null,c=null,d=0,f=null,h=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(h=0,f=a):h>=0&&h++,o++,d++;if(h<0)o-=d,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(Xp(sb,e,i)),i=[]),o-=h,d-=h;const p=f.t,g=n.slice(o-d,o);s.push(Xp(p,e,g))}}return i.length>0&&s.push(Xp(sb,e,i)),s}function Xp(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const HW=typeof console<"u"&&console&&console.warn||(()=>{}),VW="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",je={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function WW(){return Kt.groups={},je.scanner=null,je.parser=null,je.tokenQueue=[],je.pluginQueue=[],je.customSchemes=[],je.initialized=!1,je}function ib(t,e=!1){if(je.initialized&&HW(`linkifyjs: already initialized - will not register custom scheme "${t}" ${VW}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);je.customSchemes.push([t,e])}function UW(){je.scanner=_W(je.customSchemes);for(let t=0;t<je.tokenQueue.length;t++)je.tokenQueue[t][1]({scanner:je.scanner});je.parser=$W(je.scanner.tokens);for(let t=0;t<je.pluginQueue.length;t++)je.pluginQueue[t][1]({scanner:je.scanner,parser:je.parser});return je.initialized=!0,je}function mx(t){return je.initialized||UW(),BW(je.parser.start,t,WP(je.scanner.start,t))}mx.scan=WP;function KP(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new px(n),o=mx(t),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var gx="[\0- -\u2029]",KW=new RegExp(gx),qW=new RegExp(`${gx}$`),GW=new RegExp(gx,"g");function QW(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function YW(t){return new qe({key:new dt("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=sP(n.doc,[...e]);if(pP(a).forEach(({newRange:c})=>{const d=qH(r.doc,c,p=>p.isTextblock);let f,h;if(d.length>1)f=d[0],h=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const p=r.doc.textBetween(c.from,c.to," "," ");if(!qW.test(p))return;f=d[0],h=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&h){const p=h.split(KW).filter(Boolean);if(p.length<=0)return!1;const g=p[p.length-1],m=f.pos+h.lastIndexOf(g);if(!g)return!1;const v=mx(g).map(x=>x.toObject(t.defaultProtocol));if(!QW(v))return!1;v.filter(x=>x.isLink).map(x=>({...x,from:m+x.start+1,to:m+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{sx(x.from,x.to,r.doc).some(w=>w.mark.type===t.type)||i.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!i.steps.length)return i}})}function JW(t){return new qe({key:new dt("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let i=null;if(r.target instanceof HTMLAnchorElement)i=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;i=f.find(h=>h.nodeName==="A")}if(!i)return!1;const a=hP(e.state,t.type.name),l=(o=i==null?void 0:i.href)!=null?o:a.href,c=(s=i==null?void 0:i.target)!=null?s:a.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),i&&l?(window.open(l,c),!0):!1}}})}function XW(t){return new qe({key:new dt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=KP(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function cs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(GW,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var qP=Kr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){ib(t);return}ib(t.scheme,t.optionalSlashes)})},onDestroy(){WW()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!cs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!cs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!cs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ke(this.options.HTMLAttributes,t),0]:["a",Ke(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!cs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!cs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Xo({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=KP(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!cs(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(YW({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!cs(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(JW({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(XW({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),ZW=qP,eU=Object.defineProperty,tU=(t,e)=>{for(var n in e)eU(t,n,{get:e[n],enumerable:!0})},nU="listItem",ab="textStyle",lb=/^\s*([-+*])\s$/,GP=Xt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(nU,this.editor.getAttributes(ab)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=xa({find:lb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=xa({find:lb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ab),editor:this.editor})),[t]}}),QP=Xt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ke(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),rU={};tU(rU,{findListItemPos:()=>zc,getNextListDepth:()=>yx,handleBackspace:()=>Qg,handleDelete:()=>Yg,hasListBefore:()=>YP,hasListItemAfter:()=>oU,hasListItemBefore:()=>JP,listItemHasSubList:()=>XP,nextListIsDeeper:()=>ZP,nextListIsHigher:()=>eA});var zc=(t,e)=>{const{$from:n}=e.selection,r=Ze(t,e.schema);let o=null,s=n.depth,i=n.pos,a=null;for(;s>0&&a===null;)o=n.node(s),o.type===r?a=s:(s-=1,i-=1);return a===null?null:{$pos:e.doc.resolve(i),depth:a}},yx=(t,e)=>{const n=zc(t,e);if(!n)return!1;const[,r]=r6(e,t,n.$pos.pos+4);return r},YP=(t,e,n)=>{const{$anchor:r}=t.selection,o=Math.max(0,r.pos-2),s=t.doc.resolve(o).node();return!(!s||!n.includes(s.type.name))},JP=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-2);return!(o.index()===0||((n=o.nodeBefore)==null?void 0:n.type.name)!==t)},XP=(t,e,n)=>{if(!n)return!1;const r=Ze(t,e.schema);let o=!1;return n.descendants(s=>{s.type===r&&(o=!0)}),o},Qg=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Jo(t.state,e)&&YP(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((h,p)=>{h.type.name===e&&c.push({node:h,pos:p})});const d=c.at(-1);if(!d)return!1;const f=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},f.end()).joinForward().run()}if(!Jo(t.state,e)||!a6(t.state))return!1;const r=zc(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=XP(e,t.state,s);return JP(e,t.state)&&!i?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},ZP=(t,e)=>{const n=yx(t,e),r=zc(t,e);return!r||!n?!1:n>r.depth},eA=(t,e)=>{const n=yx(t,e),r=zc(t,e);return!r||!n?!1:n<r.depth},Yg=(t,e)=>{if(!Jo(t.state,e)||!i6(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:o}=n;return!n.empty&&r.sameParent(o)?!1:ZP(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():eA(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},oU=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-r.parentOffset-2);return!(o.index()===o.parent.childCount-1||((n=o.nodeAfter)==null?void 0:n.type.name)!==t)},tA=ke.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Yg(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Yg(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Qg(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Qg(t,n,r)&&(e=!0)}),e}}}}),sU="listItem",cb="textStyle",ub=/^(\d+)\.\s$/,nA=Xt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ke(this.options.HTMLAttributes,n),0]:["ol",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(sU,this.editor.getAttributes(cb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=xa({find:ub,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=xa({find:ub,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(cb)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),iU=/^\s*(\[([( |x])?\])\s$/,aU=Xt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ke(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const o=document.createElement("li"),s=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,h;a.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=n();if(typeof p!="number")return!1;const g=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{o.setAttribute(d,f)}),o.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,i),o.append(s,l),Object.entries(e).forEach(([d,f])=>{o.setAttribute(d,f)}),{dom:o,contentDOM:l,update:d=>d.type!==this.type?!1:(o.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,c(d),!0)}}},addInputRules(){return[xa({find:iU,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),lU=Xt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ke(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ke.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(GP.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(QP.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(tA.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(nA.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(aU.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(lU.configure(this.options.taskList)),t}});var cU=Xt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),uU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,dU=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,fU=Kr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gs({find:uU,type:this.type})]},addPasteRules(){return[Xo({find:dU,type:this.type})]}}),hU=Xt.create({name:"text",group:"inline"}),rA=Kr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),pU=rA;function mU(t={}){return new qe({view(e){return new gU(e,t)}})}class gU{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),i=s.width/o.offsetWidth,a=s.height/o.offsetHeight;if(n){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let g=p.getBoundingClientRect(),m=f?g.bottom:g.top;f&&h&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:g.left,right:g.right,top:m-v,bottom:m+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;r={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),h=f.width/l.offsetWidth,p=f.height/l.offsetHeight;c=f.left-l.scrollLeft*h,d=f.top-l.scrollTop*p}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=cM(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ue extends le{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ue.valid(r)?new Ue(r):le.near(r)}content(){return W.empty}eq(e){return e instanceof Ue&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ue(e.resolve(n.pos))}getBookmark(){return new vx(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!yU(e)||!vU(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ue.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(Ue.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!J.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(Ue.valid(a))return a}return null}}}Ue.prototype.visible=!1;Ue.findFrom=Ue.findGapCursorFrom;le.jsonID("gapcursor",Ue);class vx{constructor(e){this.pos=e}map(e){return new vx(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ue.valid(n)?new Ue(n):le.near(n)}}function yU(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function vU(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function xU(){return new qe({props:{decorations:kU,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ue.valid(n)?new Ue(n):null},handleClick:bU,handleKeyDown:wU,handleDOMEvents:{beforeinput:SU}}})}const wU=JM({ArrowLeft:Nu("horiz",-1),ArrowRight:Nu("horiz",1),ArrowUp:Nu("vert",-1),ArrowDown:Nu("vert",1)});function Nu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof ne){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Ue.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Ue(c))),!0):!1}}function bU(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ue.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&J.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ue(r))),!0)}function SU(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ue))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=I.empty;for(let i=r.length-1;i>=0;i--)o=I.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new W(o,0,0));return s.setSelection(ne.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function kU(t){if(!(t.selection instanceof Ue))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",_e.create(t.doc,[Rt.widget(t.selection.head,e,{key:"gapcursor"})])}var Tf=200,ut=function(){};ut.prototype.append=function(e){return e.length?(e=ut.from(e),!this.length&&e||e.length<Tf&&this.leafAppend(e)||this.length<Tf&&e.leafPrepend(this)||this.appendInner(e)):this};ut.prototype.prepend=function(e){return e.length?ut.from(e).append(this):this};ut.prototype.appendInner=function(e){return new CU(this,e)};ut.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ut.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ut.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};ut.from=function(e){return e instanceof ut?e:e&&e.length?new oA(e):ut.empty};var oA=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Tf)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Tf)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ut);ut.empty=new oA([]);var CU=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ut);const EU=500;class Un{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],d=[];return this.items.forEach((f,h)=>{if(!f.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,d.push(f);return}if(o){d.push(new Zr(f.map));let p=f.step.map(o.slice(s)),g;p&&i.maybeStep(p).doc&&(g=i.mapping.maps[i.mapping.maps.length-1],c.push(new Zr(g,void 0,void 0,c.length+d.length))),s--,g&&o.appendMap(g,s)}else i.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(s)):f.selection,l=new Un(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),h=new Zr(e.mapping.maps[d],f,n),p;(p=l&&l.merge(h))&&(h=p,d?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>TU&&(a=NU(a,c),i-=c),new Un(a.append(s),i)}remapping(e,n){let r=new lc;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Un(this.items.append(e.map(n=>new Zr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;i=Math.min(i,p);let g=s.maps[p];if(h.step){let m=e.steps[p].invert(e.docs[p]),v=h.selection&&h.selection.map(s.slice(l+1,p));v&&a++,r.push(new Zr(g,m,v))}else r.push(new Zr(g))},o);let c=[];for(let h=n;h<i;h++)c.push(new Zr(s.maps[h]));let d=this.items.slice(0,o).append(c).append(r),f=new Un(d,a);return f.emptyItemCount()>EU&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=i.selection&&i.selection.map(n.slice(r));d&&s++;let f=new Zr(c.invert(),l,d),h,p=o.length-1;(h=o.length&&o[p].merge(f))?o[p]=h:o.push(f)}}else i.map&&r--},this.items.length,0),new Un(ut.from(o.reverse()),s)}}Un.empty=new Un(ut.empty,0);function NU(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Zr=class sA{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new sA(n.getMap().invert(),n,this.selection)}}};class ao{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const TU=20;function MU(t,e,n,r){let o=n.getMeta(Is),s;if(o)return o.historyState;n.getMeta(OU)&&(t=new ao(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(Is))return i.getMeta(Is).redo?new ao(t.done.addTransform(n,void 0,r,Zu(e)),t.undone,db(n.mapping.maps),t.prevTime,t.prevComposition):new ao(t.done,t.undone.addTransform(n,void 0,r,Zu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!PU(n,t.prevRanges)),c=i?Zp(t.prevRanges,n.mapping):db(n.mapping.maps);return new ao(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Zu(e)),Un.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ao(t.done.rebased(n,s),t.undone.rebased(n,s),Zp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ao(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Zp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function PU(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function db(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function Zp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function AU(t,e,n){let r=Zu(e),o=Is.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new ao(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(Is,{redo:n,historyState:l})}let em=!1,fb=null;function Zu(t){let e=t.plugins;if(fb!=e){em=!1,fb=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){em=!0;break}}return em}const Is=new dt("history"),OU=new dt("closeHistory");function jU(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new qe({key:Is,state:{init(){return new ao(Un.empty,Un.empty,null,0,-1)},apply(e,n,r){return MU(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?aA:r=="historyRedo"?lA:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function iA(t,e){return(n,r)=>{let o=Is.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=AU(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const aA=iA(!1,!0),lA=iA(!0,!0);ke.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new qe({key:new dt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const o=this.options.limit;if(o==null||o===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>o){const i=s-o,a=0,l=i;console.warn(`[CharacterCount] Initial content exceeded limit of ${o} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const o=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||o>r&&s>r&&s<=o)return!0;if(o>r&&s>r&&s>o||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-r,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>r)}})]}});var RU=ke.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[mU(this.options)]}});ke.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new qe({key:new dt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=e,s=[];if(!n||!r)return _e.create(t,[]);let i=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(o>=c&&o<=c+l.nodeSize-1))return!1;i+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(o>=c&&o<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&i-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Rt.node(c,c+l.nodeSize,{class:this.options.className}))}),_e.create(t,s)}}})]}});var DU=ke.create({name:"gapCursor",addProseMirrorPlugins(){return[xU()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ye(Y(t,"allowGapCursor",n)))!=null?e:null}}}),IU=ke.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new qe({key:new dt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,o=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((i,a)=>{const l=r>=a&&r<=a+i.nodeSize,c=!i.isLeaf&&Th(i);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=Rt.node(a,a+i.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:a,hasAnchor:l}):this.options.placeholder});o.push(f)}return this.options.includeChildren}),_e.create(t,o)}}})]}});ke.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new qe({key:new dt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||gP(n.selection)||t.view.dragging?null:_e.create(n.doc,[Rt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function hb({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var LU=ke.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new dt(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new qe({key:t,appendTransaction:(n,r,o)=>{const{doc:s,tr:i,schema:a}=o,l=t.getState(o),c=s.content.size,d=a.nodes[this.options.node];if(l)return i.insert(c,d.create())},state:{init:(n,r)=>{const o=r.tr.doc.lastChild;return!hb({node:o,types:e})},apply:(n,r)=>{if(!n.docChanged)return r;const o=n.doc.lastChild;return!hb({node:o,types:e})}}})]}}),_U=ke.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>aA(t,e),redo:()=>({state:t,dispatch:e})=>lA(t,e)}},addProseMirrorPlugins(){return[jU(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),FU=ke.create({name:"starterKit",addExtensions(){var t,e,n,r;const o=[];return this.options.bold!==!1&&o.push(hW.configure(this.options.bold)),this.options.blockquote!==!1&&o.push(lW.configure(this.options.blockquote)),this.options.bulletList!==!1&&o.push(GP.configure(this.options.bulletList)),this.options.code!==!1&&o.push(gW.configure(this.options.code)),this.options.codeBlock!==!1&&o.push(xW.configure(this.options.codeBlock)),this.options.document!==!1&&o.push(wW.configure(this.options.document)),this.options.dropcursor!==!1&&o.push(RU.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&o.push(DU.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&o.push(bW.configure(this.options.hardBreak)),this.options.heading!==!1&&o.push(SW.configure(this.options.heading)),this.options.undoRedo!==!1&&o.push(_U.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&o.push(kW.configure(this.options.horizontalRule)),this.options.italic!==!1&&o.push(MW.configure(this.options.italic)),this.options.listItem!==!1&&o.push(QP.configure(this.options.listItem)),this.options.listKeymap!==!1&&o.push(tA.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&o.push(qP.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&o.push(nA.configure(this.options.orderedList)),this.options.paragraph!==!1&&o.push(cU.configure(this.options.paragraph)),this.options.strike!==!1&&o.push(fU.configure(this.options.strike)),this.options.text!==!1&&o.push(hU.configure(this.options.text)),this.options.underline!==!1&&o.push(rA.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&o.push(LU.configure((r=this.options)==null?void 0:r.trailingNode)),o}}),zU=FU,$U=IU,BU=ke.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),HU=BU,VU=20,cA=(t,e=0)=>{const n=[];return!t.children.length||e>VU||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...cA(r,e+1))}),n},WU=t=>{if(!t.children.length)return;const e=cA(t);e&&e.forEach(n=>{var r,o;const s=n.getAttribute("style"),i=(o=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:o.getAttribute("style");n.setAttribute("style",`${i};${s}`)})},uA=Kr.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&WU(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),UU=ke.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(o=>o.trim()).filter(Boolean);for(let o=r.length-1;o>=0;o-=1){const s=r[o].split(":");if(s.length>=2){const i=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(i==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),dA=ke.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(o=>o.trim()).filter(Boolean);for(let o=r.length-1;o>=0;o-=1){const s=r[o].split(":");if(s.length>=2){const i=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(i==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),fA=ke.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),KU=ke.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),qU=ke.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});ke.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(UU.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(dA.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(fA.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(KU.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(qU.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(uA.configure(this.options.textStyle)),t}});var GU=dA,QU=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,YU=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,JU=Kr.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ke(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Gs({find:QU,type:this.type})]},addPasteRules(){return[Xo({find:YU,type:this.type})]}}),XU=JU,ZU=fA,e8="Separator",pb="horizontal",t8=["horizontal","vertical"],hA=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=pb,...o}=t,s=n8(r)?r:pb,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return u.jsx(te.div,{"data-orientation":s,...a,...o,ref:e})});hA.displayName=e8;function n8(t){return t8.includes(t)}var pA=hA;const bn=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},o)=>u.jsx(pA,{ref:o,decorative:n,orientation:e,className:X("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));bn.displayName=pA.displayName;var xx="Popover",[mA,MK]=mn(xx,[ns]),$c=ns(),[r8,is]=mA(xx),gA=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=t,a=$c(e),l=y.useRef(null),[c,d]=y.useState(!1),[f=!1,h]=Vo({prop:r,defaultProp:o,onChange:s});return u.jsx(bv,{...a,children:u.jsx(r8,{scope:e,contentId:Qn(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:y.useCallback(()=>d(!0),[]),onCustomAnchorRemove:y.useCallback(()=>d(!1),[]),modal:i,children:n})})};gA.displayName=xx;var yA="PopoverAnchor",o8=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=is(yA,n),s=$c(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return y.useEffect(()=>(i(),()=>a()),[i,a]),u.jsx(Ac,{...s,...r,ref:e})});o8.displayName=yA;var vA="PopoverTrigger",xA=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=is(vA,n),s=$c(n),i=de(e,o.triggerRef),a=u.jsx(te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":CA(o.open),...r,ref:i,onClick:z(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:u.jsx(Ac,{asChild:!0,...s,children:a})});xA.displayName=vA;var wx="PopoverPortal",[s8,i8]=mA(wx,{forceMount:void 0}),wA=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,s=is(wx,e);return u.jsx(s8,{scope:e,forceMount:n,children:u.jsx(gn,{present:n||s.open,children:u.jsx(Na,{asChild:!0,container:o,children:r})})})};wA.displayName=wx;var wa="PopoverContent",bA=y.forwardRef((t,e)=>{const n=i8(wa,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,s=is(wa,t.__scopePopover);return u.jsx(gn,{present:r||s.open,children:s.modal?u.jsx(l8,{...o,ref:e}):u.jsx(c8,{...o,ref:e})})});bA.displayName=wa;var a8=Ho("PopoverContent.RemoveScroll"),l8=y.forwardRef((t,e)=>{const n=is(wa,t.__scopePopover),r=y.useRef(null),o=de(e,r),s=y.useRef(!1);return y.useEffect(()=>{const i=r.current;if(i)return fh(i)},[]),u.jsx(jc,{as:a8,allowPinchZoom:!0,children:u.jsx(SA,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:z(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:z(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:z(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),c8=y.forwardRef((t,e)=>{const n=is(wa,t.__scopePopover),r=y.useRef(!1),o=y.useRef(!1);return u.jsx(SA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),SA=y.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...f}=t,h=is(wa,n),p=$c(n);return ch(),u.jsx(Oc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:u.jsx(ei,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:u.jsx(oh,{"data-state":CA(h.open),role:"dialog",id:h.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kA="PopoverClose",u8=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=is(kA,n);return u.jsx(te.button,{type:"button",...r,ref:e,onClick:z(t.onClick,()=>o.onOpenChange(!1))})});u8.displayName=kA;var d8="PopoverArrow",f8=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=$c(n);return u.jsx(sh,{...o,...r,ref:e})});f8.displayName=d8;function CA(t){return t?"open":"closed"}var h8=gA,p8=xA,m8=wA,EA=bA;const tm=h8,nm=p8,ed=y.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>u.jsx(m8,{children:u.jsx(EA,{ref:o,align:e,sideOffset:n,className:X("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));ed.displayName=EA.displayName;function mb(t,[e,n]){return Math.min(n,Math.max(e,t))}function g8(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var y8=[" ","Enter","ArrowUp","ArrowDown"],v8=[" ","Enter"],Bc="Select",[jh,Rh,x8]=Jf(Bc),[ja,PK]=mn(Bc,[x8,ns]),Dh=ns(),[w8,as]=ja(Bc),[b8,S8]=ja(Bc),NA=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:f,disabled:h,required:p,form:g}=t,m=Dh(e),[v,x]=y.useState(null),[w,b]=y.useState(null),[S,k]=y.useState(!1),T=lh(c),[C=!1,N]=Vo({prop:r,defaultProp:o,onChange:s}),[A,P]=Vo({prop:i,defaultProp:a,onChange:l}),R=y.useRef(null),j=v?g||!!v.closest("form"):!0,[V,D]=y.useState(new Set),K=Array.from(V).map(B=>B.props.value).join(";");return u.jsx(bv,{...m,children:u.jsxs(w8,{required:p,scope:e,trigger:v,onTriggerChange:x,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:Qn(),value:A,onValueChange:P,open:C,onOpenChange:N,dir:T,triggerPointerDownPosRef:R,disabled:h,children:[u.jsx(jh.Provider,{scope:e,children:u.jsx(b8,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(B=>{D($=>new Set($).add(B))},[]),onNativeOptionRemove:y.useCallback(B=>{D($=>{const M=new Set($);return M.delete(B),M})},[]),children:n})}),j?u.jsxs(JA,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:B=>P(B.target.value),disabled:h,form:g,children:[A===void 0?u.jsx("option",{value:""}):null,Array.from(V)]},K):null]})})};NA.displayName=Bc;var TA="SelectTrigger",MA=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,s=Dh(n),i=as(TA,n),a=i.disabled||r,l=de(e,i.onTriggerChange),c=Rh(n),d=y.useRef("touch"),[f,h,p]=XA(m=>{const v=c().filter(b=>!b.disabled),x=v.find(b=>b.value===i.value),w=ZA(v,m,x);w!==void 0&&i.onValueChange(w.value)}),g=m=>{a||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return u.jsx(Ac,{asChild:!0,...s,children:u.jsx(te.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":YA(i.value)?"":void 0,...o,ref:l,onClick:z(o.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&g(m)}),onPointerDown:z(o.onPointerDown,m=>{d.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:z(o.onKeyDown,m=>{const v=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(v&&m.key===" ")&&y8.includes(m.key)&&(g(),m.preventDefault())})})})});MA.displayName=TA;var PA="SelectValue",AA=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=t,l=as(PA,n),{onValueNodeHasChildrenChange:c}=l,d=s!==void 0,f=de(e,l.onValueNodeChange);return rt(()=>{c(d)},[c,d]),u.jsx(te.span,{...a,ref:f,style:{pointerEvents:"none"},children:YA(l.value)?u.jsx(u.Fragment,{children:i}):s})});AA.displayName=PA;var k8="SelectIcon",OA=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return u.jsx(te.span,{"aria-hidden":!0,...o,ref:e,children:r||""})});OA.displayName=k8;var C8="SelectPortal",jA=t=>u.jsx(Na,{asChild:!0,...t});jA.displayName=C8;var Qs="SelectContent",RA=y.forwardRef((t,e)=>{const n=as(Qs,t.__scopeSelect),[r,o]=y.useState();if(rt(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?Zs.createPortal(u.jsx(DA,{scope:t.__scopeSelect,children:u.jsx(jh.Slot,{scope:t.__scopeSelect,children:u.jsx("div",{children:t.children})})}),s):null}return u.jsx(IA,{...t,ref:e})});RA.displayName=Qs;var Fn=10,[DA,ls]=ja(Qs),E8="SelectContentImpl",N8=Ho("SelectContent.RemoveScroll"),IA=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...x}=t,w=as(Qs,n),[b,S]=y.useState(null),[k,T]=y.useState(null),C=de(e,Q=>S(Q)),[N,A]=y.useState(null),[P,R]=y.useState(null),j=Rh(n),[V,D]=y.useState(!1),K=y.useRef(!1);y.useEffect(()=>{if(b)return fh(b)},[b]),ch();const B=y.useCallback(Q=>{const[we,...Me]=j().map(Se=>Se.ref.current),[ge]=Me.slice(-1),be=document.activeElement;for(const Se of Q)if(Se===be||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===we&&k&&(k.scrollTop=0),Se===ge&&k&&(k.scrollTop=k.scrollHeight),Se==null||Se.focus(),document.activeElement!==be))return},[j,k]),$=y.useCallback(()=>B([N,b]),[B,N,b]);y.useEffect(()=>{V&&$()},[V,$]);const{onOpenChange:M,triggerPointerDownPosRef:O}=w;y.useEffect(()=>{if(b){let Q={x:0,y:0};const we=ge=>{var be,Se;Q={x:Math.abs(Math.round(ge.pageX)-(((be=O.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((Se=O.current)==null?void 0:Se.y)??0))}},Me=ge=>{Q.x<=10&&Q.y<=10?ge.preventDefault():b.contains(ge.target)||M(!1),document.removeEventListener("pointermove",we),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Me,{capture:!0})}}},[b,M,O]),y.useEffect(()=>{const Q=()=>M(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[M]);const[F,G]=XA(Q=>{const we=j().filter(be=>!be.disabled),Me=we.find(be=>be.ref.current===document.activeElement),ge=ZA(we,Q,Me);ge&&setTimeout(()=>ge.ref.current.focus())}),re=y.useCallback((Q,we,Me)=>{const ge=!K.current&&!Me;(w.value!==void 0&&w.value===we||ge)&&(A(Q),ge&&(K.current=!0))},[w.value]),Be=y.useCallback(()=>b==null?void 0:b.focus(),[b]),se=y.useCallback((Q,we,Me)=>{const ge=!K.current&&!Me;(w.value!==void 0&&w.value===we||ge)&&R(Q)},[w.value]),xt=r==="popper"?Jg:LA,De=xt===Jg?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return u.jsx(DA,{scope:n,content:b,viewport:k,onViewportChange:T,itemRefCallback:re,selectedItem:N,onItemLeave:Be,itemTextRefCallback:se,focusSelectedItem:$,selectedItemText:P,position:r,isPositioned:V,searchRef:F,children:u.jsx(jc,{as:N8,allowPinchZoom:!0,children:u.jsx(Oc,{asChild:!0,trapped:w.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:z(o,Q=>{var we;(we=w.trigger)==null||we.focus({preventScroll:!0}),Q.preventDefault()}),children:u.jsx(ei,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:u.jsx(xt,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Q=>Q.preventDefault(),...x,...De,onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:z(x.onKeyDown,Q=>{const we=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!we&&Q.key.length===1&&G(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let ge=j().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const be=Q.target,Se=ge.indexOf(be);ge=ge.slice(Se+1)}setTimeout(()=>B(ge)),Q.preventDefault()}})})})})})})});IA.displayName=E8;var T8="SelectItemAlignedPosition",LA=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,s=as(Qs,n),i=ls(Qs,n),[a,l]=y.useState(null),[c,d]=y.useState(null),f=de(e,C=>d(C)),h=Rh(n),p=y.useRef(!1),g=y.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:x,focusSelectedItem:w}=i,b=y.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&x){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),A=s.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(s.dir!=="rtl"){const be=P.left-N.left,Se=A.left-be,tn=C.left-Se,er=C.width+tn,Ra=Math.max(er,N.width),Da=window.innerWidth-Fn,Ia=mb(Se,[Fn,Math.max(Fn,Da-Ra)]);a.style.minWidth=er+"px",a.style.left=Ia+"px"}else{const be=N.right-P.right,Se=window.innerWidth-A.right-be,tn=window.innerWidth-C.right-Se,er=C.width+tn,Ra=Math.max(er,N.width),Da=window.innerWidth-Fn,Ia=mb(Se,[Fn,Math.max(Fn,Da-Ra)]);a.style.minWidth=er+"px",a.style.right=Ia+"px"}const R=h(),j=window.innerHeight-Fn*2,V=m.scrollHeight,D=window.getComputedStyle(c),K=parseInt(D.borderTopWidth,10),B=parseInt(D.paddingTop,10),$=parseInt(D.borderBottomWidth,10),M=parseInt(D.paddingBottom,10),O=K+B+V+M+$,F=Math.min(v.offsetHeight*5,O),G=window.getComputedStyle(m),re=parseInt(G.paddingTop,10),Be=parseInt(G.paddingBottom,10),se=C.top+C.height/2-Fn,xt=j-se,De=v.offsetHeight/2,Q=v.offsetTop+De,we=K+B+Q,Me=O-we;if(we<=se){const be=R.length>0&&v===R[R.length-1].ref.current;a.style.bottom="0px";const Se=c.clientHeight-m.offsetTop-m.offsetHeight,tn=Math.max(xt,De+(be?Be:0)+Se+$),er=we+tn;a.style.height=er+"px"}else{const be=R.length>0&&v===R[0].ref.current;a.style.top="0px";const tn=Math.max(se,K+m.offsetTop+(be?re:0)+De)+Me;a.style.height=tn+"px",m.scrollTop=we-se+m.offsetTop}a.style.margin=`${Fn}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,a,c,m,v,x,s.dir,r]);rt(()=>b(),[b]);const[S,k]=y.useState();rt(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const T=y.useCallback(C=>{C&&g.current===!0&&(b(),w==null||w(),g.current=!1)},[b,w]);return u.jsx(P8,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:T,children:u.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:u.jsx(te.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});LA.displayName=T8;var M8="SelectPopperPosition",Jg=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Fn,...s}=t,i=Dh(n);return u.jsx(oh,{...i,...s,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jg.displayName=M8;var[P8,bx]=ja(Qs,{}),Xg="SelectViewport",_A=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,s=ls(Xg,n),i=bx(Xg,n),a=de(e,s.onViewportChange),l=y.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(jh.Slot,{scope:n,children:u.jsx(te.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:z(o.onScroll,c=>{const d=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&f){const p=Math.abs(l.current-d.scrollTop);if(p>0){const g=window.innerHeight-Fn*2,m=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),x=Math.max(m,v);if(x<g){const w=x+p,b=Math.min(g,w),S=w-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});_A.displayName=Xg;var FA="SelectGroup",[A8,O8]=ja(FA),j8=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Qn();return u.jsx(A8,{scope:n,id:o,children:u.jsx(te.div,{role:"group","aria-labelledby":o,...r,ref:e})})});j8.displayName=FA;var zA="SelectLabel",$A=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=O8(zA,n);return u.jsx(te.div,{id:o.id,...r,ref:e})});$A.displayName=zA;var Mf="SelectItem",[R8,BA]=ja(Mf),HA=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=t,a=as(Mf,n),l=ls(Mf,n),c=a.value===r,[d,f]=y.useState(s??""),[h,p]=y.useState(!1),g=de(e,w=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,w,r,o)}),m=Qn(),v=y.useRef("touch"),x=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(R8,{scope:n,value:r,disabled:o,textId:m,isSelected:c,onItemTextChange:y.useCallback(w=>{f(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:u.jsx(jh.ItemSlot,{scope:n,value:r,disabled:o,textValue:d,children:u.jsx(te.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:g,onFocus:z(i.onFocus,()=>p(!0)),onBlur:z(i.onBlur,()=>p(!1)),onClick:z(i.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:z(i.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:z(i.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:z(i.onPointerMove,w=>{var b;v.current=w.pointerType,o?(b=l.onItemLeave)==null||b.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(i.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:z(i.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(v8.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});HA.displayName=Mf;var cl="SelectItemText",VA=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...s}=t,i=as(cl,n),a=ls(cl,n),l=BA(cl,n),c=S8(cl,n),[d,f]=y.useState(null),h=de(e,x=>f(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,x,l.value,l.disabled)}),p=d==null?void 0:d.textContent,g=y.useMemo(()=>u.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return rt(()=>(m(g),()=>v(g)),[m,v,g]),u.jsxs(u.Fragment,{children:[u.jsx(te.span,{id:l.textId,...s,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Zs.createPortal(s.children,i.valueNode):null]})});VA.displayName=cl;var WA="SelectItemIndicator",UA=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return BA(WA,n).isSelected?u.jsx(te.span,{"aria-hidden":!0,...r,ref:e}):null});UA.displayName=WA;var Zg="SelectScrollUpButton",KA=y.forwardRef((t,e)=>{const n=ls(Zg,t.__scopeSelect),r=bx(Zg,t.__scopeSelect),[o,s]=y.useState(!1),i=de(e,r.onScrollButtonChange);return rt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?u.jsx(GA,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});KA.displayName=Zg;var ey="SelectScrollDownButton",qA=y.forwardRef((t,e)=>{const n=ls(ey,t.__scopeSelect),r=bx(ey,t.__scopeSelect),[o,s]=y.useState(!1),i=de(e,r.onScrollButtonChange);return rt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;s(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?u.jsx(GA,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});qA.displayName=ey;var GA=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,s=ls("SelectScrollButton",n),i=y.useRef(null),a=Rh(n),l=y.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),rt(()=>{var d;const c=a().find(f=>f.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),u.jsx(te.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:z(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:z(o.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:z(o.onPointerLeave,()=>{l()})})}),D8="SelectSeparator",QA=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return u.jsx(te.div,{"aria-hidden":!0,...r,ref:e})});QA.displayName=D8;var ty="SelectArrow",I8=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Dh(n),s=as(ty,n),i=ls(ty,n);return s.open&&i.position==="popper"?u.jsx(sh,{...o,...r,ref:e}):null});I8.displayName=ty;function YA(t){return t===""||t===void 0}var JA=y.forwardRef((t,e)=>{const{value:n,...r}=t,o=y.useRef(null),s=de(e,o),i=g8(n);return y.useEffect(()=>{const a=o.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&d){const f=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(f)}},[i,n]),u.jsx(Tc,{asChild:!0,children:u.jsx("select",{...r,ref:s,defaultValue:n})})});JA.displayName="BubbleSelect";function XA(t){const e=vt(t),n=y.useRef(""),r=y.useRef(0),o=y.useCallback(i=>{const a=n.current+i;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function ZA(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=L8(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function L8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var _8=NA,eO=MA,F8=AA,z8=OA,$8=jA,tO=RA,B8=_A,nO=$A,rO=HA,H8=VA,V8=UA,oO=KA,sO=qA,iO=QA;const td=_8,nd=F8,Al=y.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(eO,{ref:r,className:X("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,u.jsx(z8,{asChild:!0,children:u.jsx(lv,{className:"h-4 w-4 opacity-50"})})]}));Al.displayName=eO.displayName;const aO=y.forwardRef(({className:t,...e},n)=>u.jsx(oO,{ref:n,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(QI,{className:"h-4 w-4"})}));aO.displayName=oO.displayName;const lO=y.forwardRef(({className:t,...e},n)=>u.jsx(sO,{ref:n,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(lv,{className:"h-4 w-4"})}));lO.displayName=sO.displayName;const Ol=y.forwardRef(({className:t,children:e,position:n="popper",...r},o)=>u.jsx($8,{children:u.jsxs(tO,{ref:o,className:X("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[u.jsx(aO,{}),u.jsx(B8,{className:X("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(lO,{})]})}));Ol.displayName=tO.displayName;const W8=y.forwardRef(({className:t,...e},n)=>u.jsx(nO,{ref:n,className:X("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));W8.displayName=nO.displayName;const Ge=y.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(rO,{ref:r,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(V8,{children:u.jsx(av,{className:"h-4 w-4"})})}),u.jsx(H8,{children:e})]}));Ge.displayName=rO.displayName;const U8=y.forwardRef(({className:t,...e},n)=>u.jsx(iO,{ref:n,className:X("-mx-1 my-1 h-px bg-muted",t),...e}));U8.displayName=iO.displayName;function K8({editor:t,onInsertPageBreak:e}){const[n,r]=y.useState("");if(!t)return null;const o=({onClick:l,isActive:c,icon:d,label:f,title:h})=>u.jsx(H,{variant:c?"secondary":"ghost",size:"icon",onClick:l,className:"h-8 w-8",title:h||f,"data-testid":`button-${f.toLowerCase()}`,children:u.jsx(d,{className:"h-4 w-4"})}),s=()=>{n&&(t.chain().focus().extendMarkRange("link").setLink({href:n}).run(),r(""))},i=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000"],a=["#FFFF00","#90EE90","#FFB6C1","#ADD8E6","#FFDAB9","#E6E6FA","#F0E68C","#DDA0DD","#B0E0E6","#FAFAD2"];return u.jsx("div",{className:"sticky top-0 z-20 border-b bg-background/95 backdrop-blur-sm p-2 shadow-sm",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[u.jsxs("div",{className:"flex items-center gap-0.5",children:[u.jsx(o,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),icon:QC,label:"Bold",title:"Bold (Ctrl+B)"}),u.jsx(o,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),icon:JC,label:"Italic",title:"Italic (Ctrl+I)"}),u.jsx(o,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:t.isActive("underline"),icon:oE,label:"Underline",title:"Underline (Ctrl+U)"}),u.jsx(o,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),icon:uL,label:"Strikethrough"}),u.jsx(o,{onClick:()=>t.chain().focus().toggleCode().run(),isActive:t.isActive("code"),icon:JI,label:"Code"})]}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsx("div",{className:"flex items-center gap-0.5",children:u.jsxs(td,{value:t.isActive("heading",{level:1})?"h1":t.isActive("heading",{level:2})?"h2":t.isActive("heading",{level:3})?"h3":"paragraph",onValueChange:l=>{l==="paragraph"?t.chain().focus().setParagraph().run():l==="h1"?t.chain().focus().setHeading({level:1}).run():l==="h2"?t.chain().focus().setHeading({level:2}).run():l==="h3"&&t.chain().focus().setHeading({level:3}).run()},children:[u.jsx(Al,{className:"w-[140px] h-8",children:u.jsx(nd,{placeholder:"Style"})}),u.jsxs(Ol,{children:[u.jsx(Ge,{value:"paragraph",children:"Paragraph"}),u.jsx(Ge,{value:"h1",children:"Heading 1"}),u.jsx(Ge,{value:"h2",children:"Heading 2"}),u.jsx(Ge,{value:"h3",children:"Heading 3"})]})]})}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsx("div",{className:"flex items-center gap-0.5",children:u.jsxs(td,{value:t.getAttributes("textStyle").fontFamily||"serif",onValueChange:l=>{l==="default"?t.chain().focus().unsetFontFamily().run():t.chain().focus().setFontFamily(l).run()},children:[u.jsx(Al,{className:"w-[130px] h-8",children:u.jsx(nd,{placeholder:"Font"})}),u.jsxs(Ol,{children:[u.jsx(Ge,{value:"default",children:"Default"}),u.jsx(Ge,{value:"serif",children:"Serif"}),u.jsx(Ge,{value:"sans-serif",children:"Sans Serif"}),u.jsx(Ge,{value:"monospace",children:"Monospace"})]})]})}),u.jsx("div",{className:"flex items-center gap-0.5",children:u.jsxs(td,{value:t.getAttributes("textStyle").fontSize||"16px",onValueChange:l=>{if(l==="default"){const c=t.getAttributes("textStyle"),{fontSize:d,...f}=c;Object.keys(f).length>0?t.chain().focus().setMark("textStyle",f).run():t.chain().focus().unsetMark("textStyle").run()}else t.chain().focus().setMark("textStyle",{fontSize:l}).run()},children:[u.jsx(Al,{className:"w-[90px] h-8","data-testid":"select-font-size",children:u.jsx(nd,{placeholder:"Size"})}),u.jsxs(Ol,{children:[u.jsx(Ge,{value:"default",children:"Default"}),u.jsx(Ge,{value:"12px",children:"12px"}),u.jsx(Ge,{value:"14px",children:"14px"}),u.jsx(Ge,{value:"16px",children:"16px"}),u.jsx(Ge,{value:"18px",children:"18px"}),u.jsx(Ge,{value:"20px",children:"20px"}),u.jsx(Ge,{value:"24px",children:"24px"}),u.jsx(Ge,{value:"32px",children:"32px"}),u.jsx(Ge,{value:"48px",children:"48px"})]})]})}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsxs(tm,{children:[u.jsx(nm,{asChild:!0,children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Text Color",children:u.jsx(iL,{className:"h-4 w-4"})})}),u.jsxs(ed,{className:"w-auto p-2",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1",children:i.map(l=>u.jsx("button",{className:"h-6 w-6 rounded border",style:{backgroundColor:l},onClick:()=>t.chain().focus().setColor(l).run()},l))}),u.jsx(H,{variant:"ghost",size:"sm",className:"mt-2 w-full",onClick:()=>t.chain().focus().unsetColor().run(),children:"Clear Color"})]})]}),u.jsxs(tm,{children:[u.jsx(nm,{asChild:!0,children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Highlight",children:u.jsx(tL,{className:"h-4 w-4"})})}),u.jsxs(ed,{className:"w-auto p-2",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1",children:a.map(l=>u.jsx("button",{className:"h-6 w-6 rounded border",style:{backgroundColor:l},onClick:()=>t.chain().focus().setHighlight({color:l}).run()},l))}),u.jsx(H,{variant:"ghost",size:"sm",className:"mt-2 w-full",onClick:()=>t.chain().focus().unsetHighlight().run(),children:"Clear Highlight"})]})]}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center gap-0.5",children:[u.jsx(o,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),icon:ZC,label:"BulletList",title:"Bullet List"}),u.jsx(o,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),icon:XC,label:"OrderedList",title:"Numbered List"})]}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center gap-0.5",children:[u.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("left").run(),isActive:t.isActive({textAlign:"left"}),icon:UI,label:"AlignLeft",title:"Align Left"}),u.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("center").run(),isActive:t.isActive({textAlign:"center"}),icon:WI,label:"AlignCenter",title:"Align Center"}),u.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("right").run(),isActive:t.isActive({textAlign:"right"}),icon:KI,label:"AlignRight",title:"Align Right"})]}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsxs(tm,{children:[u.jsx(nm,{asChild:!0,children:u.jsx(H,{variant:t.isActive("link")?"secondary":"ghost",size:"icon",className:"h-8 w-8",title:"Insert Link",children:u.jsx(nL,{className:"h-4 w-4"})})}),u.jsxs(ed,{className:"w-80",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx(ec,{type:"url",placeholder:"https://example.com",value:n,onChange:l=>r(l.target.value),onKeyDown:l=>{l.key==="Enter"&&s()}}),u.jsx(H,{onClick:s,size:"sm",children:"Add"})]}),t.isActive("link")&&u.jsx(H,{variant:"ghost",size:"sm",className:"mt-2 w-full",onClick:()=>t.chain().focus().unsetLink().run(),children:"Remove Link"})]})]}),u.jsx(o,{onClick:()=>t.chain().focus().toggleBlockquote().run(),isActive:t.isActive("blockquote"),icon:lL,label:"Quote",title:"Block Quote"}),u.jsx(o,{onClick:()=>t.chain().focus().setHorizontalRule().run(),icon:sL,label:"HorizontalRule",title:"Horizontal Line"}),e&&u.jsx(o,{onClick:e,icon:Ta,label:"PageBreak",title:"Insert Page Break"}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsx(o,{onClick:()=>t.chain().focus().unsetAllMarks().clearNodes().run(),icon:XI,label:"ClearFormat",title:"Clear Formatting"}),u.jsx(bn,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center gap-0.5",children:[u.jsx(o,{onClick:()=>t.chain().focus().undo().run(),icon:fL,label:"Undo",title:"Undo (Ctrl+Z)"}),u.jsx(o,{onClick:()=>t.chain().focus().redo().run(),icon:cL,label:"Redo",title:"Redo (Ctrl+Shift+Z)"})]})]})})}const q8=ke.create({name:"fontSize",addGlobalAttributes(){return[{types:["textStyle"],attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]}}),G8=Xt.create({name:"pageBreak",group:"block",parseHTML(){return[{tag:'div[data-type="page-break"]'}]},renderHTML(){return["div",{"data-type":"page-break",class:"page-break"},["div",{class:"page-break-line"}],["div",{class:"page-break-label"},"Page Break"]]},addCommands(){return{setPageBreak:()=>({commands:t})=>t.insertContent({type:this.name})}}});function Sx({content:t,onChange:e,placeholder:n="Start writing..."}){const[r,o]=y.useState(1),[s,i]=y.useState(!1),[a,l]=y.useState(!1),[c,d]=y.useState(!1),f=y.useRef(!1),h=y.useRef(null);y.useEffect(()=>{const w=()=>{const b=window.innerWidth<768||/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);console.log("[TipTapEditor] Mobile detection - width:",window.innerWidth,"userAgent:",navigator.userAgent,"isMobile:",b),d(b)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const p=rW({extensions:[zU.configure({underline:!1}),pU,HU.configure({types:["heading","paragraph"]}),$U.configure({placeholder:n}),ZW.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary underline cursor-pointer"}}),uA,q8,GU,XU.configure({multicolor:!0}),ZU,G8],content:t,editable:!0,onUpdate:({editor:w})=>{f.current=!0,e(w.getHTML())},editorProps:{attributes:{class:"prose prose-lg dark:prose-invert max-w-none focus:outline-none min-h-[500px] px-8 pt-12 pb-6 font-serif"}}});y.useEffect(()=>{if(f.current){f.current=!1;return}if(p&&t!==p.getHTML()){const{from:w,to:b}=p.state.selection;p.commands.setContent(t,{emitUpdate:!1}),w<=p.state.doc.content.size&&p.commands.setTextSelection({from:Math.min(w,p.state.doc.content.size),to:Math.min(b,p.state.doc.content.size)})}},[p,t]);const m=(t.match(/data-type="page-break"/g)||[]).length+1,v=w=>{if(!p)return;const b=document.querySelector('[data-testid="editor-content"]');if(!b)return;const S=b.querySelectorAll('[data-type="page-break"]');w===1?b.scrollIntoView({behavior:"smooth",block:"start"}):w<=m&&S[w-2]&&S[w-2].scrollIntoView({behavior:"smooth",block:"start"}),o(w)},x=w=>{w.preventDefault(),w.stopPropagation(),l(!a)};return y.useEffect(()=>{if(!p)return;const w=()=>{console.log("[TipTapEditor] Editor focused, showing floating toolbar"),i(!0)},b=()=>{console.log("[TipTapEditor] Editor blurred, hiding toolbar"),setTimeout(()=>{i(!1),l(!1)},200)};return p.on("focus",w),p.on("blur",b),()=>{p.off("focus",w),p.off("blur",b)}},[p]),console.log("[TipTapEditor] Render - showFloatingToolbar:",s,"showMobileToolbar:",a),u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx(K8,{editor:p,onInsertPageBreak:()=>{var w,b;return(b=(w=p==null?void 0:p.commands)==null?void 0:w.setPageBreak)==null?void 0:b.call(w)}}),u.jsxs("div",{ref:h,className:"flex-1 overflow-y-auto bg-background relative",children:[u.jsx("div",{className:"mx-auto max-w-4xl",children:u.jsx(YV,{editor:p,"data-testid":"editor-content"})}),c&&u.jsx(H,{size:"icon",variant:"default",className:"fixed top-20 right-4 h-12 w-12 rounded-full shadow-lg z-50",onPointerDown:w=>{console.log("[TOOLBAR FIX ACTIVE] Floating button tapped, isMobile:",c),x(w)},"data-testid":"button-open-mobile-toolbar",children:u.jsx(dL,{className:"h-5 w-5"})}),a&&p&&u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t shadow-lg z-50",children:[u.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[u.jsx("span",{className:"text-sm font-medium",children:"Format"}),u.jsx(H,{size:"icon",variant:"ghost",className:"h-8 w-8",onPointerDown:x,"data-testid":"button-close-mobile-toolbar",children:u.jsx(uv,{className:"h-4 w-4"})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2",children:[u.jsx(H,{size:"sm",variant:p.isActive("bold")?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleBold().run()},"data-testid":"mobile-button-bold",children:u.jsx(QC,{className:"h-4 w-4"})}),u.jsx(H,{size:"sm",variant:p.isActive("italic")?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleItalic().run()},"data-testid":"mobile-button-italic",children:u.jsx(JC,{className:"h-4 w-4"})}),u.jsx(H,{size:"sm",variant:p.isActive("underline")?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleUnderline().run()},"data-testid":"mobile-button-underline",children:u.jsx(oE,{className:"h-4 w-4"})}),u.jsx(H,{size:"sm",variant:p.isActive("heading",{level:1})?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleHeading({level:1}).run()},"data-testid":"mobile-button-h1",children:"H1"}),u.jsx(H,{size:"sm",variant:p.isActive("heading",{level:2})?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleHeading({level:2}).run()},"data-testid":"mobile-button-h2",children:"H2"}),u.jsx(H,{size:"sm",variant:p.isActive("bulletList")?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleBulletList().run()},"data-testid":"mobile-button-bullet-list",children:u.jsx(ZC,{className:"h-4 w-4"})}),u.jsx(H,{size:"sm",variant:p.isActive("orderedList")?"default":"outline",className:"h-9",onPointerDown:w=>{w.preventDefault(),p.chain().focus().toggleOrderedList().run()},"data-testid":"mobile-button-ordered-list",children:u.jsx(XC,{className:"h-4 w-4"})})]})]})]}),m>1&&u.jsxs("div",{className:"border-t bg-background/95 px-4 py-2 flex items-center justify-center gap-4",children:[u.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>v(Math.max(1,r-1)),disabled:r===1,"data-testid":"button-prev-page",children:[u.jsx(GI,{className:"h-4 w-4 mr-1"}),"Previous"]}),u.jsxs("span",{className:"text-sm text-muted-foreground","data-testid":"text-page-indicator",children:["Page ",r," of ",m]}),u.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>v(Math.min(m,r+1)),disabled:r===m,"data-testid":"button-next-page",children:["Next",u.jsx(cv,{className:"h-4 w-4 ml-1"})]})]})]})}function cO({status:t}){return t==="saved"?u.jsxs(Fe,{variant:"outline",className:"text-chart-3 border-chart-3/20","data-testid":"status-saved",children:[u.jsx(av,{className:"h-3 w-3 mr-1"}),"Saved"]}):t==="saving"?u.jsxs(Fe,{variant:"outline",className:"text-chart-4 border-chart-4/20","data-testid":"status-saving",children:[u.jsx(rl,{className:"h-3 w-3 mr-1 animate-spin"}),"Saving..."]}):null}function Q8({content:t}){const e=t.replace(/<[^>]*>/g,"").trim(),n=e.length>0?e.split(/\s+/).length:0,r=e.length;return u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-foreground","data-testid":"word-counter",children:[u.jsxs("span",{className:"hidden sm:inline",children:[u.jsx("span",{className:"font-medium",children:n.toLocaleString()})," words"]}),u.jsx("span",{className:"text-muted-foreground/50 hidden sm:inline",children:""}),u.jsxs("span",{children:[u.jsx("span",{className:"font-medium",children:r.toLocaleString()})," ",u.jsx("span",{className:"hidden sm:inline",children:"characters"}),u.jsx("span",{className:"sm:hidden",children:"ch"})]})]})}function uO({documentTitle:t,autosaveStatus:e,onToggleAI:n,onToggleSidebar:r,userEmail:o="user@example.com",onLogout:s,content:i,onContentImport:a,onTitleChange:l,isEditable:c=!1}){const{toast:d}=Wr(),f=y.useRef(null),h=y.useRef(null),p=o.split("@")[0].split(".").map(x=>x[0]).join("").toUpperCase().slice(0,2),g=async x=>{try{x==="docx"?(await vz(t,i),d({title:"Export successful",description:"Document exported as DOCX"})):(await xz(t,i),d({title:"Export successful",description:"Document exported as PDF"}))}catch(w){d({variant:"destructive",title:"Export failed",description:w instanceof Error?w.message:"Failed to export document"})}},m=()=>{var x;(x=f.current)==null||x.click()},v=async x=>{var b;const w=(b=x.target.files)==null?void 0:b[0];if(w){try{const S=await OT(w);a==null||a(S),d({title:"Import successful",description:"File has been imported successfully"})}catch(S){d({variant:"destructive",title:"Import failed",description:S instanceof Error?S.message:"Failed to import file"})}f.current&&(f.current.value="")}};return u.jsxs("div",{className:"h-14 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex items-center justify-between px-4 sticky top-0 z-30",children:[u.jsx("input",{ref:f,type:"file",accept:".docx",onChange:v,className:"hidden"}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0 overflow-hidden",children:[r&&u.jsx(H,{variant:"ghost",size:"icon",onClick:r,className:"lg:hidden flex-shrink-0","data-testid":"button-toggle-sidebar",children:u.jsx(oL,{className:"h-5 w-5"})}),u.jsx(jt,{href:"/dashboard",children:u.jsx("h1",{className:"text-base sm:text-xl font-bold text-primary flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity","data-testid":"link-logo",children:"NovaWriter"})}),u.jsx("div",{className:"hidden sm:block text-muted-foreground flex-shrink-0",children:"|"}),c?u.jsx("input",{ref:h,type:"text",value:t,onChange:x=>l==null?void 0:l(x.target.value),className:"hidden sm:block text-sm text-foreground bg-transparent border-none outline-none focus:ring-0 truncate max-w-md",placeholder:"Untitled Document","data-testid":"input-document-title"}):u.jsx("span",{className:"hidden sm:block text-sm text-muted-foreground truncate","data-testid":"text-document-title",children:t})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[u.jsx(Q8,{content:i}),u.jsx("div",{className:"h-6 w-px bg-border mx-2"}),u.jsx(cO,{status:e}),u.jsx(H,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-toggle-ai",children:u.jsx(Rr,{className:"h-5 w-5 text-chart-2"})}),u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,children:u.jsx(H,{variant:"ghost",size:"icon","data-testid":"button-file-menu",children:u.jsx(Wu,{className:"h-5 w-5"})})}),u.jsxs(Hr,{align:"end",children:[u.jsxs(st,{onClick:m,"data-testid":"button-import-file",children:[u.jsx(Ad,{className:"h-4 w-4 mr-2"}),"Import File"]}),u.jsx(oc,{}),u.jsxs(st,{onClick:()=>g("docx"),"data-testid":"button-export-docx",children:[u.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Export as DOCX"]}),u.jsxs(st,{onClick:()=>g("pdf"),"data-testid":"button-export-pdf",children:[u.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]}),u.jsx(jv,{}),u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,children:u.jsx(H,{variant:"ghost",className:"h-9 w-9 rounded-full p-0","data-testid":"button-user-menu",children:u.jsx(Dv,{className:"h-9 w-9",children:u.jsx(Iv,{children:p})})})}),u.jsxs(Hr,{align:"end",children:[u.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:o}),u.jsx(oc,{}),s&&u.jsx(st,{onClick:s,"data-testid":"button-logout",children:"Log out"})]})]})]})]})}const kx=y.forwardRef(({className:t,...e},n)=>u.jsx("textarea",{className:X("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));kx.displayName="Textarea";function dO({isOpen:t,onClose:e,onApply:n,content:r}){const[o,s]=y.useState(""),[i,a]=y.useState(""),l=yz(),{toast:c}=Wr(),d=[{label:"Summarize",icon:Rr},{label:"Continue",icon:qI},{label:"Rewrite",icon:gw},{label:"Improve",icon:pL}],f=async p=>{const g=p||o;if(g)try{const m=await l.mutateAsync({prompt:g,content:r});a(m)}catch(m){c({variant:"destructive",title:"AI generation failed",description:m instanceof Error?m.message:"Failed to generate AI suggestion"})}},h=()=>{i&&(n(i),a(""),s(""))};return t?u.jsxs("div",{className:"fixed right-0 top-14 bottom-0 w-80 border-l bg-background shadow-lg z-20 flex flex-col animate-in slide-in-from-right duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Rr,{className:"h-5 w-5 text-chart-2"}),u.jsx("h2",{className:"font-semibold",children:"AI Assistant"})]}),u.jsx(H,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-close-ai",children:u.jsx(uv,{className:"h-4 w-4"})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium mb-2 block",children:"What would you like to do?"}),u.jsx(kx,{placeholder:"Enter your prompt... (e.g., 'Make this more professional')",value:o,onChange:p=>s(p.target.value),className:"min-h-24","data-testid":"input-ai-prompt"}),u.jsx(H,{onClick:()=>f(),disabled:!o||l.isPending,className:"w-full mt-2","data-testid":"button-generate-ai",children:l.isPending?"Generating...":"Generate"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Actions"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(p=>u.jsxs(H,{variant:"outline",size:"sm",onClick:()=>f(p.label),disabled:l.isPending,className:"justify-start","data-testid":`button-quick-${p.label.toLowerCase()}`,children:[u.jsx(p.icon,{className:"h-3 w-3 mr-2"}),p.label]},p.label))})]}),i&&u.jsxs(pe,{className:"p-4 space-y-3",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(Fe,{variant:"secondary",className:"text-chart-2",children:[u.jsx(Rr,{className:"h-3 w-3 mr-1"}),"AI Result"]})}),u.jsx("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:i}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(H,{onClick:h,size:"sm",className:"flex-1","data-testid":"button-apply-ai",children:"Apply"}),u.jsx(H,{onClick:()=>f(),variant:"outline",size:"sm",disabled:l.isPending,"data-testid":"button-regenerate-ai",children:u.jsx(gw,{className:"h-3 w-3"})})]})]})]})]}):null}function Y8({documents:t,activeDocumentId:e,onSelectDocument:n,onAddDocument:r,onDeleteDocument:o}){return u.jsxs("div",{className:"h-full flex flex-col border-r bg-sidebar",children:[u.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[u.jsx("h2",{className:"font-semibold text-sidebar-foreground",children:"Documents"}),u.jsx(H,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8","data-testid":"button-add-document",children:u.jsx(Jl,{className:"h-4 w-4"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.length===0?u.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No documents yet"}):u.jsx("div",{className:"space-y-1",children:t.map(s=>u.jsxs("div",{className:"flex items-center gap-1 group",children:[u.jsxs(H,{variant:e===s.id?"secondary":"ghost",className:"flex-1 justify-start gap-2 h-9 px-3",onClick:()=>n(s.id),"data-testid":`button-document-${s.id}`,children:[u.jsx(Ta,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"truncate text-sm",children:s.title})]}),o&&u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 flex-shrink-0","data-testid":`button-document-menu-${s.id}`,children:u.jsx(Yl,{className:"h-4 w-4"})})}),u.jsx(Hr,{align:"end",children:u.jsx(st,{onClick:()=>o(s.id),"data-testid":`button-delete-document-${s.id}`,className:"text-destructive",children:"Delete"})})]})]},s.id))})})]})}function J8(){const[,t]=yr(),{id:e}=Xy(),{user:n,logout:r,isLoading:o}=ti(),{toast:s}=Wr(),{data:i,isLoading:a}=lz(e),{data:l,isLoading:c}=TT(),d=cz(e||""),f=MT(),h=PT(),[p,g]=y.useState(""),[m,v]=y.useState("Untitled Document"),[x,w]=y.useState("saved"),[b,S]=y.useState(!1),[k,T]=y.useState(!0),C=y.useRef(null);y.useEffect(()=>{!o&&!n&&t("/")},[n,o,t]),y.useEffect(()=>{i&&(g(i.content),v(i.title))},[i]),y.useEffect(()=>(C.current&&clearTimeout(C.current),x==="unsaved"&&(C.current=setTimeout(async()=>{w("saving");try{await d.mutateAsync({title:m,content:p}),w("saved")}catch{w("unsaved")}},2e3)),()=>{C.current&&clearTimeout(C.current)}),[p,m,x,d]);const N=$=>{g($),w("unsaved")},A=$=>{v($),w("unsaved")},P=$=>{g($),w("unsaved")},R=$=>{g(M=>M+`

`+$),w("unsaved")},j=$=>{t(`/editor/${$}`)},V=async()=>{try{const $=await f.mutateAsync({title:"Untitled Document",content:"<p>Start writing...</p>"});t(`/editor/${$.id}`)}catch($){s({variant:"destructive",title:"Failed to create document",description:$ instanceof Error?$.message:"An error occurred"})}},D=async $=>{if($===e){s({variant:"destructive",title:"Cannot delete",description:"Cannot delete the currently open document"});return}if(confirm("Are you sure you want to delete this document?"))try{await h.mutateAsync($),s({title:"Document deleted",description:"Document has been deleted successfully"})}catch(M){s({variant:"destructive",title:"Failed to delete document",description:M instanceof Error?M.message:"An error occurred"})}},K=async()=>{try{await r(),t("/")}catch($){s({variant:"destructive",title:"Logout failed",description:$ instanceof Error?$.message:"An error occurred"})}};if(o||a||c)return null;const B=(l||[]).map($=>({id:$.id,title:$.title}));return u.jsxs("div",{className:"h-screen flex flex-col",children:[u.jsx(uO,{documentTitle:m,autosaveStatus:x,onToggleAI:()=>S(!b),onToggleSidebar:()=>T(!k),userEmail:(n==null?void 0:n.email)||"",onLogout:K,content:p,onContentImport:P,onTitleChange:A,isEditable:!0}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[k&&u.jsx("div",{className:"w-64 hidden lg:block",children:u.jsx(Y8,{documents:B,activeDocumentId:e,onSelectDocument:j,onAddDocument:V,onDeleteDocument:D})}),u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(Sx,{content:p,onChange:N,placeholder:"Start writing..."})}),u.jsx(dO,{isOpen:b,onClose:()=>S(!1),onApply:R,content:p})]})]})}function X8({projects:t,activeChapterId:e,onSelectChapter:n,onAddChapter:r,onDeleteChapter:o,onAddProject:s,sidebarTitle:i="Projects"}){const[a,l]=y.useState(new Set(t.map(d=>d.id))),c=d=>{const f=new Set(a);f.has(d)?f.delete(d):f.add(d),l(f)};return u.jsxs("div",{className:"h-full flex flex-col border-r bg-sidebar",children:[u.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[u.jsx("h2",{className:"font-semibold text-sidebar-foreground",children:i}),s&&u.jsx(H,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","data-testid":"button-add-project",children:u.jsx(Jl,{className:"h-4 w-4"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(d=>u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"flex items-center gap-1 group",children:[u.jsx(H,{variant:"ghost",size:"icon",onClick:()=>c(d.id),className:"h-8 w-8 flex-shrink-0","data-testid":`button-toggle-${d.id}`,children:a.has(d.id)?u.jsx(lv,{className:"h-4 w-4"}):u.jsx(cv,{className:"h-4 w-4"})}),u.jsxs(H,{variant:"ghost",className:"flex-1 justify-start gap-2 h-8 px-2",onClick:()=>c(d.id),children:[u.jsx(eL,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"truncate text-sm",children:d.title})]}),u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 flex-shrink-0","data-testid":`button-project-menu-${d.id}`,children:u.jsx(Yl,{className:"h-4 w-4"})})}),u.jsx(Hr,{align:"end",children:u.jsxs(st,{onClick:()=>r(d.id),"data-testid":`button-add-chapter-${d.id}`,children:[u.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Add Chapter"]})})]})]}),a.has(d.id)&&u.jsx("div",{className:"ml-8 mt-1 space-y-1",children:d.chapters.map(f=>u.jsxs("div",{className:"flex items-center gap-1 group",children:[u.jsxs(H,{variant:e===f.id?"secondary":"ghost",className:"flex-1 justify-start gap-2 h-8 px-2 text-sm",onClick:()=>n(d.id,f.id),"data-testid":`button-chapter-${f.id}`,children:[u.jsx(Ta,{className:"h-3 w-3 flex-shrink-0"}),u.jsx("span",{className:"truncate",children:f.title})]}),o&&u.jsxs(qo,{children:[u.jsx(Go,{asChild:!0,children:u.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 flex-shrink-0","data-testid":`button-chapter-menu-${f.id}`,children:u.jsx(Yl,{className:"h-4 w-4"})})}),u.jsx(Hr,{align:"end",children:u.jsxs(st,{onClick:()=>o(f.id),className:"text-destructive","data-testid":`button-delete-chapter-${f.id}`,children:[u.jsx(eh,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]},f.id))})]},d.id))})]})}function Z8(){const[,t]=yr(),{id:e}=Xy(),{user:n,logout:r,isLoading:o}=ti(),{toast:s}=Wr(),{data:i,isLoading:a}=dz(e),l=pz();AT();const c=gz(),[d,f]=y.useState("<p>Chapter content goes here...</p>"),[h,p]=y.useState("Chapter"),[g,m]=y.useState("saved"),[v,x]=y.useState(!1),[w,b]=y.useState(!1),[S,k]=y.useState(""),T=y.useRef(null),{data:C}=hz(S||void 0),N=mz(S);y.useEffect(()=>{!o&&!n&&t("/")},[n,o,t]),y.useEffect(()=>{i&&i.chapters&&i.chapters.length>0&&!S&&k(i.chapters[0].id)},[i,S]),y.useEffect(()=>{C&&(f(C.content),p(C.title))},[C]),y.useEffect(()=>(T.current&&clearTimeout(T.current),g==="unsaved"&&S&&(T.current=setTimeout(async()=>{m("saving");try{await N.mutateAsync({title:h,content:d}),m("saved")}catch{m("unsaved")}},2e3)),()=>{T.current&&clearTimeout(T.current)}),[d,h,g,S,N]);const A=M=>{f(M),m("unsaved")},P=M=>{p(M),m("unsaved")},R=M=>{f(M),m("unsaved")},j=M=>{f(O=>O+`

`+M),m("unsaved")},V=(M,O)=>{k(O)},D=async M=>{var O;try{const F=((O=i==null?void 0:i.chapters)==null?void 0:O.length)||0;await l.mutateAsync({projectId:M,title:`Chapter ${F+1}`,content:"<p>Start writing...</p>",orderIndex:F}),s({title:"Chapter created",description:"New chapter has been created successfully"})}catch(F){s({variant:"destructive",title:"Failed to create chapter",description:F instanceof Error?F.message:"An error occurred"})}},K=async M=>{if(M===S){s({variant:"destructive",title:"Cannot delete",description:"Cannot delete the currently open chapter"});return}if(confirm("Are you sure you want to delete this chapter?"))try{await c.mutateAsync(M),s({title:"Chapter deleted",description:"Chapter has been deleted successfully"})}catch(O){s({variant:"destructive",title:"Failed to delete chapter",description:O instanceof Error?O.message:"An error occurred"})}},B=async()=>{try{await r(),t("/")}catch(M){s({variant:"destructive",title:"Logout failed",description:M instanceof Error?M.message:"An error occurred"})}};if(o||a)return null;const $=i?[{id:i.id,title:i.title,chapters:(i.chapters||[]).map(M=>({id:M.id,title:M.title}))}]:[];return u.jsxs("div",{className:"h-screen flex flex-col",children:[u.jsx(uO,{documentTitle:h,autosaveStatus:g,onToggleAI:()=>x(!v),onToggleSidebar:()=>b(!w),userEmail:(n==null?void 0:n.email)||"",onLogout:B,content:d,onContentImport:R,onTitleChange:P,isEditable:!0}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[w&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>b(!1)}),u.jsx("div",{className:`
          ${w?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
          transition-transform duration-300 ease-in-out
          fixed lg:relative
          w-64 h-full
          z-50 lg:z-0
          bg-background
        `,children:u.jsx(X8,{projects:$,activeChapterId:S,onSelectChapter:(M,O)=>{V(M,O),b(!1)},onAddChapter:D,onDeleteChapter:K,sidebarTitle:"Chapters"})}),u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(Sx,{content:d,onChange:A,placeholder:"Start writing this chapter..."})}),u.jsx(dO,{isOpen:v,onClose:()=>x(!1),onApply:j,content:d})]})]})}var Cx="Dialog",[fO,hO]=mn(Cx),[e9,Zn]=fO(Cx),pO=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=y.useRef(null),l=y.useRef(null),[c=!1,d]=Vo({prop:r,defaultProp:o,onChange:s});return u.jsx(e9,{scope:e,triggerRef:a,contentRef:l,contentId:Qn(),titleId:Qn(),descriptionId:Qn(),open:c,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};pO.displayName=Cx;var mO="DialogTrigger",gO=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(mO,n),s=de(e,o.triggerRef);return u.jsx(te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Tx(o.open),...r,ref:s,onClick:z(t.onClick,o.onOpenToggle)})});gO.displayName=mO;var Ex="DialogPortal",[t9,yO]=fO(Ex,{forceMount:void 0}),vO=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,s=Zn(Ex,e);return u.jsx(t9,{scope:e,forceMount:n,children:y.Children.map(r,i=>u.jsx(gn,{present:n||s.open,children:u.jsx(Na,{asChild:!0,container:o,children:i})}))})};vO.displayName=Ex;var Pf="DialogOverlay",xO=y.forwardRef((t,e)=>{const n=yO(Pf,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Zn(Pf,t.__scopeDialog);return s.modal?u.jsx(gn,{present:r||s.open,children:u.jsx(r9,{...o,ref:e})}):null});xO.displayName=Pf;var n9=Ho("DialogOverlay.RemoveScroll"),r9=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(Pf,n);return u.jsx(jc,{as:n9,allowPinchZoom:!0,shards:[o.contentRef],children:u.jsx(te.div,{"data-state":Tx(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ys="DialogContent",wO=y.forwardRef((t,e)=>{const n=yO(Ys,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Zn(Ys,t.__scopeDialog);return u.jsx(gn,{present:r||s.open,children:s.modal?u.jsx(o9,{...o,ref:e}):u.jsx(s9,{...o,ref:e})})});wO.displayName=Ys;var o9=y.forwardRef((t,e)=>{const n=Zn(Ys,t.__scopeDialog),r=y.useRef(null),o=de(e,n.contentRef,r);return y.useEffect(()=>{const s=r.current;if(s)return fh(s)},[]),u.jsx(bO,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:z(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:z(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:z(t.onFocusOutside,s=>s.preventDefault())})}),s9=y.forwardRef((t,e)=>{const n=Zn(Ys,t.__scopeDialog),r=y.useRef(!1),o=y.useRef(!1);return u.jsx(bO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),bO=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=Zn(Ys,n),l=y.useRef(null),c=de(e,l);return ch(),u.jsxs(u.Fragment,{children:[u.jsx(Oc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:u.jsx(ei,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Tx(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(a9,{titleId:a.titleId}),u.jsx(c9,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Nx="DialogTitle",SO=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(Nx,n);return u.jsx(te.h2,{id:o.titleId,...r,ref:e})});SO.displayName=Nx;var kO="DialogDescription",CO=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(kO,n);return u.jsx(te.p,{id:o.descriptionId,...r,ref:e})});CO.displayName=kO;var EO="DialogClose",NO=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(EO,n);return u.jsx(te.button,{type:"button",...r,ref:e,onClick:z(t.onClick,()=>o.onOpenChange(!1))})});NO.displayName=EO;function Tx(t){return t?"open":"closed"}var TO="DialogTitleWarning",[i9,MO]=ZD(TO,{contentName:Ys,titleName:Nx,docsSlug:"dialog"}),a9=({titleId:t})=>{const e=MO(TO),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},l9="DialogDescriptionWarning",c9=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${MO(l9).contentName}}.`;return y.useEffect(()=>{var s;const o=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},u9=pO,d9=gO,f9=vO,h9=xO,p9=wO,m9=SO,g9=CO,PO=NO,AO="AlertDialog",[y9,AK]=mn(AO,[hO]),qr=hO(),OO=t=>{const{__scopeAlertDialog:e,...n}=t,r=qr(e);return u.jsx(u9,{...r,...n,modal:!0})};OO.displayName=AO;var v9="AlertDialogTrigger",x9=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=qr(n);return u.jsx(d9,{...o,...r,ref:e})});x9.displayName=v9;var w9="AlertDialogPortal",jO=t=>{const{__scopeAlertDialog:e,...n}=t,r=qr(e);return u.jsx(f9,{...r,...n})};jO.displayName=w9;var b9="AlertDialogOverlay",RO=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=qr(n);return u.jsx(h9,{...o,...r,ref:e})});RO.displayName=b9;var Wi="AlertDialogContent",[S9,k9]=y9(Wi),C9=SC("AlertDialogContent"),DO=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...o}=t,s=qr(n),i=y.useRef(null),a=de(e,i),l=y.useRef(null);return u.jsx(i9,{contentName:Wi,titleName:IO,docsSlug:"alert-dialog",children:u.jsx(S9,{scope:n,cancelRef:l,children:u.jsxs(p9,{role:"alertdialog",...s,...o,ref:a,onOpenAutoFocus:z(o.onOpenAutoFocus,c=>{var d;c.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[u.jsx(C9,{children:r}),u.jsx(N9,{contentRef:i})]})})})});DO.displayName=Wi;var IO="AlertDialogTitle",LO=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=qr(n);return u.jsx(m9,{...o,...r,ref:e})});LO.displayName=IO;var _O="AlertDialogDescription",FO=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=qr(n);return u.jsx(g9,{...o,...r,ref:e})});FO.displayName=_O;var E9="AlertDialogAction",zO=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=qr(n);return u.jsx(PO,{...o,...r,ref:e})});zO.displayName=E9;var $O="AlertDialogCancel",BO=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:o}=k9($O,n),s=qr(n),i=de(e,o);return u.jsx(PO,{...s,...r,ref:i})});BO.displayName=$O;var N9=({contentRef:t})=>{const e=`\`${Wi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Wi}\` by passing a \`${_O}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Wi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},T9=OO,M9=jO,HO=RO,VO=DO,WO=zO,UO=BO,KO=LO,qO=FO;const GO=T9,P9=M9,QO=y.forwardRef(({className:t,...e},n)=>u.jsx(HO,{className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));QO.displayName=HO.displayName;const Mx=y.forwardRef(({className:t,...e},n)=>u.jsxs(P9,{children:[u.jsx(QO,{}),u.jsx(VO,{ref:n,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Mx.displayName=VO.displayName;const Px=({className:t,...e})=>u.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});Px.displayName="AlertDialogHeader";const Ax=({className:t,...e})=>u.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Ax.displayName="AlertDialogFooter";const Ox=y.forwardRef(({className:t,...e},n)=>u.jsx(KO,{ref:n,className:X("text-lg font-semibold",t),...e}));Ox.displayName=KO.displayName;const jx=y.forwardRef(({className:t,...e},n)=>u.jsx(qO,{ref:n,className:X("text-sm text-muted-foreground",t),...e}));jx.displayName=qO.displayName;const Rx=y.forwardRef(({className:t,...e},n)=>u.jsx(WO,{ref:n,className:X(kv(),t),...e}));Rx.displayName=WO.displayName;const Dx=y.forwardRef(({className:t,...e},n)=>u.jsx(UO,{ref:n,className:X(kv({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Dx.displayName=UO.displayName;function A9(){const[,t]=yr(),[e,n]=y.useState(""),[r,o]=y.useState("saved"),[s,i]=y.useState(!1),a=y.useRef(null);y.useEffect(()=>{const d=localStorage.getItem("trial-editor-content");d&&(n(d),o("saved"))},[]),y.useEffect(()=>(a.current&&clearTimeout(a.current),r==="unsaved"&&(a.current=setTimeout(()=>{o("saving"),localStorage.setItem("trial-editor-content",e),o("saved")},2e3)),()=>{a.current&&clearTimeout(a.current)}),[e,r]);const l=d=>{n(d),o("unsaved")},c=()=>{t("/auth?mode=register")};return u.jsxs("div",{className:"h-screen flex flex-col",children:[u.jsxs("div",{className:"h-14 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex items-center justify-between px-4 sticky top-0 z-30",children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsx(jt,{href:"/",children:u.jsx("h1",{className:"text-xl font-bold text-primary flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity","data-testid":"link-logo-trial",children:"NovaWriter"})}),u.jsx("div",{className:"hidden sm:block text-muted-foreground",children:"|"}),u.jsx("span",{className:"hidden sm:block text-sm text-muted-foreground",children:"Free Trial Editor"})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[u.jsx(cO,{status:r}),u.jsx(jv,{}),u.jsx(H,{variant:"ghost",size:"icon",onClick:()=>i(!0),"data-testid":"button-trial-ai",title:"Sign up for AI features",children:u.jsx(Rr,{className:"h-5 w-5 text-chart-2"})}),u.jsx(H,{onClick:c,size:"sm","data-testid":"button-trial-signup",children:"Sign Up to Save"})]})]}),u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(Sx,{content:e,onChange:l,placeholder:"Try NovaWriter - Start writing for free! (Note: Your work is saved locally. Sign up to save to cloud and access more features.)"})}),u.jsx(GO,{open:s,onOpenChange:i,children:u.jsxs(Mx,{children:[u.jsxs(Px,{children:[u.jsx(Ox,{children:"Sign up for full features"}),u.jsx(jx,{children:"The Writing Assistant and other advanced features are available to registered users. Sign up now to unlock the full power of NovaWriter!"})]}),u.jsxs(Ax,{children:[u.jsx(Dx,{children:"Continue Trial"}),u.jsx(Rx,{onClick:c,children:"Sign Up Free"})]})]})})]})}function O9(){const[,t]=yr(),{user:e,isLoading:n}=ti();console.log("ACCOUNT PAGE - Auth state:",{user:e,authLoading:n,hasUser:!!e});const{data:r,isLoading:o,refetch:s}=Mn({queryKey:["/api/account"],enabled:!n&&!!e,staleTime:0,gcTime:0,refetchOnMount:"always"});if(y.useEffect(()=>{!n&&e&&s()},[n,e,s]),console.log("ACCOUNT PAGE - Query state:",{account:r,isLoading:o,queryEnabled:!n&&!!e}),y.useEffect(()=>{!n&&!e&&(console.log("ACCOUNT PAGE - No user found, redirecting to /auth"),t("/auth"))},[e,n,t]),y.useEffect(()=>{r&&(console.log("ACCOUNT PAGE - Received data:",r),console.log("ACCOUNT PAGE - Role:",r.role),console.log("ACCOUNT PAGE - Subscription:",r.subscriptionTier))},[r]),n||o)return u.jsx("div",{className:"container max-w-4xl mx-auto p-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),u.jsx("div",{className:"h-32 bg-muted rounded"})]})});const i=l=>{switch(l){case"free":return"Free Trial";case"basic":return"Basic ($1.99/mo)";case"pro":return"Pro ($4.99/mo)";default:return l}},a=l=>{switch(l){case"free":return"secondary";case"basic":return"default";case"pro":return"default";default:return"secondary"}};return u.jsxs("div",{className:"container max-w-4xl mx-auto p-6",children:[u.jsx("h1",{className:"text-3xl font-bold mb-6","data-testid":"heading-account",children:"Account Settings"}),u.jsxs(pe,{className:"mb-6",children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Account Information"}),u.jsx(Pn,{children:"Your account details and subscription status"})]}),u.jsxs(Ee,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),u.jsx("p",{className:"text-lg","data-testid":"text-account-email",children:r==null?void 0:r.email})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Account Type"}),u.jsxs("div",{className:"mt-1",children:[(r==null?void 0:r.role)==="admin"&&u.jsx(Fe,{variant:"default",className:"mr-2","data-testid":"badge-admin",children:"Admin"}),u.jsx(Fe,{variant:"secondary","data-testid":"badge-user",children:"User"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Subscription Plan"}),u.jsx("div",{className:"mt-1",children:u.jsx(Fe,{variant:a((r==null?void 0:r.subscriptionTier)||"free"),"data-testid":"badge-subscription",children:i((r==null?void 0:r.subscriptionTier)||"free")})})]})]})]}),u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Subscription Plans"}),u.jsx(Pn,{children:"Choose the plan that works best for you"})]}),u.jsxs(Ee,{className:"space-y-4",children:[u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"font-semibold",children:"Free Trial"}),(r==null?void 0:r.subscriptionTier)==="free"&&u.jsx(Fe,{variant:"secondary",children:"Current Plan"})]}),u.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Perfect for trying out NovaWriter with basic features"}),u.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[u.jsx("li",{children:" Basic text editor"}),u.jsx("li",{children:" Limited document storage"}),u.jsx("li",{children:" Single device access"})]})]}),u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"font-semibold",children:"Basic - $1.99/month"}),(r==null?void 0:r.subscriptionTier)==="basic"?u.jsx(Fe,{variant:"secondary",children:"Current Plan"}):u.jsx(H,{size:"sm",onClick:()=>t("/subscribe?tier=basic"),"data-testid":"button-upgrade-basic",children:"Upgrade"})]}),u.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Full editor access without AI assistance"}),u.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[u.jsx("li",{children:" Full rich text editor"}),u.jsx("li",{children:" Unlimited documents & projects"}),u.jsx("li",{children:" Multi-device sync"}),u.jsx("li",{children:" File import/export (.docx, .pdf, .txt)"}),u.jsx("li",{children:" Autosave & cloud storage"})]})]}),u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"font-semibold",children:"Pro - $4.99/month"}),(r==null?void 0:r.subscriptionTier)==="pro"?u.jsx(Fe,{variant:"secondary",children:"Current Plan"}):u.jsx(H,{size:"sm",onClick:()=>t("/subscribe?tier=pro"),"data-testid":"button-upgrade-pro",children:"Upgrade"})]}),u.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Everything in Basic plus AI-powered writing assistance"}),u.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[u.jsx("li",{children:" All Basic features"}),u.jsx("li",{children:" AI Writing Assistant"}),u.jsx("li",{children:" Smart suggestions & continuations"}),u.jsx("li",{children:" Content summarization"}),u.jsx("li",{children:" Writing improvements"})]})]})]})]})]})}function j9(){return u.jsx("div",{className:"min-h-screen bg-background",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[u.jsx(jt,{href:"/",children:u.jsxs(H,{variant:"ghost",className:"mb-6","data-testid":"button-back-home",children:[u.jsx(GC,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),u.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Contact Us"}),u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Get in Touch"}),u.jsx(Pn,{children:"Have questions or concerns? We're here to help."})]}),u.jsxs(Ee,{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:u.jsx(eE,{className:"h-6 w-6 text-primary"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-1",children:"Email Support"}),u.jsx("p",{className:"text-muted-foreground mb-2",children:"If you have questions or concerns, contact us at:"}),u.jsx("a",{href:"mailto:novawriter25@gmail.com",className:"text-primary hover:underline text-lg font-medium","data-testid":"link-contact-email",children:"novawriter25@gmail.com"})]})]}),u.jsxs("div",{className:"pt-4 border-t",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Response Time"}),u.jsx("p",{className:"text-muted-foreground",children:"We typically respond to all inquiries within 24-48 hours during business days."})]}),u.jsxs("div",{className:"pt-4 border-t",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"What to Include"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-muted-foreground",children:[u.jsx("li",{children:"Your account email (if applicable)"}),u.jsx("li",{children:"A detailed description of your question or issue"}),u.jsx("li",{children:"Any relevant screenshots or error messages"})]})]})]})]})]})})}function R9(){return u.jsxs("div",{className:"container max-w-4xl mx-auto p-6",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h1",{className:"text-4xl font-bold mb-4","data-testid":"heading-about",children:"About NovaWriter"}),u.jsx("p",{className:"text-xl text-muted-foreground italic",children:"By writers, for writers"})]}),u.jsxs("div",{className:"prose dark:prose-invert max-w-none mb-12",children:[u.jsx("p",{className:"text-lg leading-relaxed",children:"NovaWriter was created by writers who understand the unique challenges of crafting stories, articles, and ideas in our free time. We know what it's like to have a burst of inspiration on your lunch break, continue writing on your commute home, and polish your work late at night on a different device."}),u.jsx("p",{className:"text-lg leading-relaxed mt-4",children:"That's why we built NovaWriter: a seamless writing platform that lets you pick up exactly where you left off, no matter which device you're on. Whether you're writing your first blog post or your fifth novel, NovaWriter keeps your creative flow uninterrupted."})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[u.jsx(pe,{children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:u.jsx(aL,{className:"w-6 h-6 text-primary"})}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Distraction-Free Writing"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"A clean, intuitive editor designed to help you focus on what matters: your words."})]})}),u.jsx(pe,{children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:u.jsx(hL,{className:"w-6 h-6 text-primary"})}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Built by Writers"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Every feature is designed with real writers in mind, not just tech specifications."})]})}),u.jsx(pe,{children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:u.jsx(mL,{className:"w-6 h-6 text-primary"})}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cross-Device Sync"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Start on your laptop, continue on your tablet, finish on your phone. Seamlessly."})]})})]}),u.jsx(pe,{className:"bg-muted/50",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Our Story"}),u.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[u.jsx("p",{children:"We're a small team of passionate writers and developers who got tired of clunky writing tools that didn't understand our workflow. We wanted something simple yet powerful, accessible yet feature-rich."}),u.jsx("p",{children:"NovaWrite was born from late-night writing sessions, countless cups of coffee, and the shared frustration of losing our place in a story when switching devices. We built the tool we wished we had, and now we're sharing it with fellow writers everywhere."}),u.jsx("p",{children:"Whether you're drafting your first short story or managing a complex novel with multiple chapters, NovaWrite is here to support your creative journey. Because at the end of the day, we're writers just like you."})]})]})})]})}var YO={exports:{}},D9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I9=D9,L9=I9;function JO(){}function XO(){}XO.resetWarningCache=JO;var _9=function(){function t(r,o,s,i,a,l){if(l!==L9){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:XO,resetWarningCache:JO};return n.PropTypes=n,n};YO.exports=_9();var F9=YO.exports;const Ce=Of(F9);function gb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gb(Object(n),!0).forEach(function(r){ZO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rd=function(e){return typeof e}:rd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(t)}function ZO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z9(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function $9(t,e){if(t==null)return{};var n=z9(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function B9(t,e){return H9(t)||V9(t,e)||W9(t,e)||U9()}function H9(t){if(Array.isArray(t))return t}function V9(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],o=!0,s=!1,i,a;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(r.push(i.value),!(e&&r.length===e));o=!0);}catch(l){s=!0,a=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function W9(t,e){if(t){if(typeof t=="string")return vb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vb(t,e)}}function vb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mt=function(e,n,r){var o=!!r,s=fe.useRef(r);fe.useEffect(function(){s.current=r},[r]),fe.useEffect(function(){if(!o||!e)return function(){};var i=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,i),function(){e.off(n,i)}},[o,n,e,s])},K9=function(e){var n=fe.useRef(e);return fe.useEffect(function(){n.current=e},[e]),n.current},Af=function(e){return e!==null&&rd(e)==="object"},xb="[object Object]",q9=function t(e,n){if(!Af(e)||!Af(n))return e===n;var r=Array.isArray(e),o=Array.isArray(n);if(r!==o)return!1;var s=Object.prototype.toString.call(e)===xb,i=Object.prototype.toString.call(n)===xb;if(s!==i)return!1;if(!s&&!r)return e===n;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(var c={},d=0;d<a.length;d+=1)c[a[d]]=!0;for(var f=0;f<l.length;f+=1)c[l[f]]=!0;var h=Object.keys(c);if(h.length!==a.length)return!1;var p=e,g=n,m=function(x){return t(p[x],g[x])};return h.every(m)},G9=function(e,n,r){return Af(e)?Object.keys(e).reduce(function(o,s){var i=!Af(n)||!q9(e[s],n[s]);return r.includes(s)?(i&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),o):i?yb(yb({},o||{}),{},ZO({},s,e[s])):o},null):null},ej=fe.createContext(null);ej.displayName="ElementsContext";var Q9=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e};Ce.any,Ce.object;Ce.func.isRequired;var tj=fe.createContext(null);tj.displayName="CheckoutContext";Ce.any,Ce.shape({clientSecret:Ce.oneOfType([Ce.string,Ce.instanceOf(Promise)]).isRequired,elementsOptions:Ce.object}).isRequired;var wb=function(e){var n=fe.useContext(tj),r=fe.useContext(ej);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n}else return Q9(r,e)},Y9=["mode"],J9=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Zt=function(e,n){var r="".concat(J9(e),"Element"),o=function(l){var c=l.id,d=l.className,f=l.options,h=f===void 0?{}:f,p=l.onBlur,g=l.onFocus,m=l.onReady,v=l.onChange,x=l.onEscape,w=l.onClick,b=l.onLoadError,S=l.onLoaderStart,k=l.onNetworksChange,T=l.onConfirm,C=l.onCancel,N=l.onShippingAddressChange,A=l.onShippingRateChange,P=l.onSavedPaymentMethodRemove,R=l.onSavedPaymentMethodUpdate,j=wb("mounts <".concat(r,">")),V="elements"in j?j.elements:null,D="checkoutState"in j?j.checkoutState:null,K=(D==null?void 0:D.type)==="success"||(D==null?void 0:D.type)==="loading"?D.sdk:null,B=fe.useState(null),$=B9(B,2),M=$[0],O=$[1],F=fe.useRef(null),G=fe.useRef(null);Mt(M,"blur",p),Mt(M,"focus",g),Mt(M,"escape",x),Mt(M,"click",w),Mt(M,"loaderror",b),Mt(M,"loaderstart",S),Mt(M,"networkschange",k),Mt(M,"confirm",T),Mt(M,"cancel",C),Mt(M,"shippingaddresschange",N),Mt(M,"shippingratechange",A),Mt(M,"savedpaymentmethodremove",P),Mt(M,"savedpaymentmethodupdate",R),Mt(M,"change",v);var re;m&&(e==="expressCheckout"?re=m:re=function(){m(M)}),Mt(M,"ready",re),fe.useLayoutEffect(function(){if(F.current===null&&G.current!==null&&(V||K)){var se=null;if(K)switch(e){case"payment":se=K.createPaymentElement(h);break;case"address":if("mode"in h){var xt=h.mode,De=$9(h,Y9);if(xt==="shipping")se=K.createShippingAddressElement(De);else if(xt==="billing")se=K.createBillingAddressElement(De);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":se=K.createExpressCheckoutElement(h);break;case"currencySelector":se=K.createCurrencySelectorElement();break;case"taxId":se=K.createTaxIdElement(h);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else V&&(se=V.create(e,h));F.current=se,O(se),se&&se.mount(G.current)}},[V,K,h]);var Be=K9(h);return fe.useEffect(function(){if(F.current){var se=G9(h,Be,["paymentRequest"]);se&&"update"in F.current&&F.current.update(se)}},[h,Be]),fe.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),fe.createElement("div",{id:c,className:d,ref:G})},s=function(l){wb("mounts <".concat(r,">"));var c=l.id,d=l.className;return fe.createElement("div",{id:c,className:d})},i=n?s:o;return i.propTypes={id:Ce.string,className:Ce.string,onChange:Ce.func,onBlur:Ce.func,onFocus:Ce.func,onReady:Ce.func,onEscape:Ce.func,onClick:Ce.func,onLoadError:Ce.func,onLoaderStart:Ce.func,onNetworksChange:Ce.func,onConfirm:Ce.func,onCancel:Ce.func,onShippingAddressChange:Ce.func,onShippingRateChange:Ce.func,onSavedPaymentMethodRemove:Ce.func,onSavedPaymentMethodUpdate:Ce.func,options:Ce.object},i.displayName=r,i.__elementType=e,i},en=typeof window>"u",X9=fe.createContext(null);X9.displayName="EmbeddedCheckoutProviderContext";Zt("auBankAccount",en);Zt("card",en);Zt("cardNumber",en);Zt("cardExpiry",en);Zt("cardCvc",en);Zt("iban",en);Zt("payment",en);Zt("expressCheckout",en);Zt("paymentRequestButton",en);Zt("linkAuthentication",en);Zt("address",en);Zt("shippingAddress",en);Zt("paymentMethodMessaging",en);Zt("taxId",en);var Z9="clover",nj="https://js.stripe.com",eK="".concat(nj,"/").concat(Z9,"/stripe.js"),tK=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,nK=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,bb="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",rK=function(e){return tK.test(e)||nK.test(e)},oK=function(){for(var e=document.querySelectorAll('script[src^="'.concat(nj,'"]')),n=0;n<e.length;n++){var r=e[n];if(rK(r.src))return r}return null},Sb=function(e){var n="",r=document.createElement("script");r.src="".concat(eK).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},Ya=null,Tu=null,Mu=null,sK=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},iK=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},aK=function(e){return Ya!==null?Ya:(Ya=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(bb),window.Stripe){n(window.Stripe);return}try{var o=oK();if(o&&e)console.warn(bb);else if(!o)o=Sb(e);else if(o&&Mu!==null&&Tu!==null){var s;o.removeEventListener("load",Mu),o.removeEventListener("error",Tu),(s=o.parentNode)===null||s===void 0||s.removeChild(o),o=Sb(e)}Mu=iK(n,r),Tu=sK(r),o.addEventListener("load",Mu),o.addEventListener("error",Tu)}catch(i){r(i);return}}),Ya.catch(function(n){return Ya=null,Promise.reject(n)}))},Ja,lK=function(){return Ja||(Ja=aK(null).catch(function(e){return Ja=null,Promise.reject(e)}),Ja)};Promise.resolve().then(function(){return lK()}).catch(function(t){console.warn(t)});function cK(){const[t,e]=y.useState(""),[n,r]=y.useState("basic"),[,o]=yr();y.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("tier");a&&r(a),Ye("POST","/api/create-subscription",{tier:a||"basic"}).then(l=>l.json()).then(l=>{l.clientSecret?e(l.clientSecret):l.error&&s({title:"Error",description:l.error,variant:"destructive"})}).catch(l=>{s({title:"Error",description:"Failed to initialize subscription",variant:"destructive"})})},[]);const{toast:s}=Wr();return u.jsx("div",{className:"min-h-screen bg-background p-6",children:u.jsxs("div",{className:"container max-w-2xl mx-auto",children:[u.jsx(H,{variant:"ghost",onClick:()=>o("/account"),className:"mb-4",children:" Back to Account"}),u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{className:"text-2xl",children:"Subscriptions Not Available"}),u.jsx(Pn,{children:"Payment processing is not configured in this app version."})]}),u.jsx(Ee,{children:u.jsx("p",{className:"text-muted-foreground",children:"Stripe payment processing is currently unavailable. Please contact support or try the web version."})})]})]})})}function uK(){const[,t]=yr(),{user:e}=ti(),{toast:n}=Wr(),[r,o]=y.useState(null),{data:s,isLoading:i}=Mn({queryKey:["/api/admin/users"],enabled:(e==null?void 0:e.role)==="admin"}),{data:a,isLoading:l}=Mn({queryKey:["/api/admin/users/deleted"],enabled:(e==null?void 0:e.role)==="admin"}),{data:c,isLoading:d}=Mn({queryKey:["/api/admin/audit-logs"],enabled:(e==null?void 0:e.role)==="admin"}),f=lt({mutationFn:async({userId:v,tier:x})=>Ye("POST",`/api/admin/users/${v}/subscription`,{tier:x}),onSuccess:()=>{Hn.invalidateQueries({queryKey:["/api/admin/users"]}),n({title:"Subscription updated",description:"User subscription tier has been updated successfully."})},onError:v=>{n({title:"Update failed",description:v.message,variant:"destructive"})}}),h=lt({mutationFn:async v=>Ye("POST",`/api/admin/users/${v}/delete`,{}),onSuccess:()=>{Hn.invalidateQueries({queryKey:["/api/admin/users"]}),Hn.invalidateQueries({queryKey:["/api/admin/users/deleted"]}),Hn.invalidateQueries({queryKey:["/api/admin/audit-logs"]}),n({title:"User deleted",description:"User account has been soft deleted successfully."}),o(null)},onError:v=>{n({title:"Delete failed",description:v.message,variant:"destructive"}),o(null)}}),p=lt({mutationFn:async v=>Ye("POST",`/api/admin/users/${v}/restore`,{}),onSuccess:()=>{Hn.invalidateQueries({queryKey:["/api/admin/users"]}),Hn.invalidateQueries({queryKey:["/api/admin/users/deleted"]}),Hn.invalidateQueries({queryKey:["/api/admin/audit-logs"]}),n({title:"User restored",description:"User account has been restored successfully."})},onError:v=>{n({title:"Restore failed",description:v.message,variant:"destructive"})}});if(y.useEffect(()=>{e&&e.role!=="admin"&&t("/dashboard")},[e,t]),!e||e.role!=="admin")return null;const g=v=>{switch(v){case"pro":return"default";case"basic":return"secondary";default:return"outline"}},m=v=>{switch(v){case"create":return"default";case"soft_delete":return"destructive";case"restore":return"default";case"update_role":return"secondary";case"update_subscription":return"secondary";default:return"outline"}};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"min-h-screen bg-background",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[u.jsx("div",{className:"mb-8",children:u.jsx(H,{variant:"ghost",onClick:()=>t("/dashboard"),"data-testid":"button-back-dashboard",children:" Back to Dashboard"})}),u.jsxs(NT,{defaultValue:"users",className:"w-full",children:[u.jsxs(Fv,{className:"grid w-full grid-cols-3",children:[u.jsx(zi,{value:"users","data-testid":"tab-users",children:"Active Users"}),u.jsx(zi,{value:"deleted","data-testid":"tab-deleted",children:"Deleted Users"}),u.jsx(zi,{value:"audit","data-testid":"tab-audit",children:"Audit Logs"})]}),u.jsx($i,{value:"users",children:u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Active Users"}),u.jsx(Pn,{children:"Manage user accounts and subscription tiers"})]}),u.jsx(Ee,{children:i?u.jsx("p",{className:"text-muted-foreground",children:"Loading users..."}):u.jsx("div",{className:"space-y-4",children:s==null?void 0:s.map(v=>u.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`user-row-${v.id}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("p",{className:"font-medium","data-testid":`text-user-email-${v.id}`,children:v.email}),v.role==="admin"&&u.jsx(Fe,{variant:"default","data-testid":`badge-admin-${v.id}`,children:"Admin"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Current tier: ",u.jsx(Fe,{variant:g(v.subscriptionTier),children:v.subscriptionTier})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(td,{value:v.subscriptionTier,onValueChange:x=>f.mutate({userId:v.id,tier:x}),"data-testid":`select-tier-${v.id}`,children:[u.jsx(Al,{className:"w-32",children:u.jsx(nd,{})}),u.jsxs(Ol,{children:[u.jsx(Ge,{value:"free",children:"Free"}),u.jsx(Ge,{value:"basic",children:"Basic"}),u.jsx(Ge,{value:"pro",children:"Pro"})]})]}),u.jsx(H,{variant:"destructive",size:"sm",onClick:()=>o(v.id),"data-testid":`button-delete-${v.id}`,children:"Delete"})]})]},v.id))})})]})}),u.jsx($i,{value:"deleted",children:u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Deleted Users"}),u.jsx(Pn,{children:"View and restore soft-deleted user accounts"})]}),u.jsx(Ee,{children:l?u.jsx("p",{className:"text-muted-foreground",children:"Loading deleted users..."}):a&&a.length>0?u.jsx("div",{className:"space-y-4",children:a.map(v=>u.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50","data-testid":`deleted-user-row-${v.id}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("p",{className:"font-medium","data-testid":`text-deleted-email-${v.id}`,children:v.email}),u.jsx(Fe,{variant:"destructive",children:"Deleted"}),v.role==="admin"&&u.jsx(Fe,{variant:"outline",children:"Admin"})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Deleted: ",v.deletedAt?Kw(new Date(v.deletedAt),"PPpp"):"Unknown"]}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["Subscription tier: ",u.jsx(Fe,{variant:g(v.subscriptionTier),children:v.subscriptionTier})]})]}),u.jsx(H,{variant:"default",size:"sm",onClick:()=>p.mutate(v.id),disabled:p.isPending,"data-testid":`button-restore-${v.id}`,children:"Restore"})]},v.id))}):u.jsx("p",{className:"text-muted-foreground",children:"No deleted users"})})]})}),u.jsx($i,{value:"audit",children:u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Audit Logs"}),u.jsx(Pn,{children:"View all user account activity and changes"})]}),u.jsx(Ee,{children:d?u.jsx("p",{className:"text-muted-foreground",children:"Loading audit logs..."}):c&&c.length>0?u.jsx("div",{className:"space-y-2",children:c.map(v=>u.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg text-sm","data-testid":`audit-log-${v.id}`,children:[u.jsx(Fe,{variant:m(v.action),className:"mt-0.5",children:v.action}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium",children:v.details}),u.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:Kw(new Date(v.createdAt),"PPpp")})]})]},v.id))}):u.jsx("p",{className:"text-muted-foreground",children:"No audit logs"})})]})})]})]})}),u.jsx(GO,{open:r!==null,onOpenChange:v=>!v&&o(null),children:u.jsxs(Mx,{children:[u.jsxs(Px,{children:[u.jsx(Ox,{children:"Delete User Account?"}),u.jsx(jx,{children:'This will soft delete the user account. The user will not be able to log in, but their data will be preserved and the account can be restored later from the "Deleted Users" tab.'})]}),u.jsxs(Ax,{children:[u.jsx(Dx,{"data-testid":"button-cancel-delete",children:"Cancel"}),u.jsx(Rx,{onClick:()=>r&&h.mutate(r),"data-testid":"button-confirm-delete",className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete User"})]})]})})]})}const dK=Mc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),rj=y.forwardRef(({className:t,variant:e,...n},r)=>u.jsx("div",{ref:r,role:"alert",className:X(dK({variant:e}),t),...n}));rj.displayName="Alert";const fK=y.forwardRef(({className:t,...e},n)=>u.jsx("h5",{ref:n,className:X("mb-1 font-medium leading-none tracking-tight",t),...e}));fK.displayName="AlertTitle";const oj=y.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:X("text-sm [&_p]:leading-relaxed",t),...e}));oj.displayName="AlertDescription";function hK(){const{user:t}=ti(),[,e]=yr(),[n,r]=y.useState(""),[o,s]=y.useState("");if(!t)return e("/auth"),null;const i=t.subscriptionTier==="free",{data:a=[],isLoading:l}=Mn({queryKey:["/api/writing-samples"],enabled:!i}),{data:c,isLoading:d}=Mn({queryKey:["/api/style-profile"],enabled:!i}),f=lt({mutationFn:m=>Ye("POST","/api/writing-samples",m),onSuccess:()=>{Hn.invalidateQueries({queryKey:["/api/writing-samples"]}),r(""),s("")}}),h=lt({mutationFn:m=>Ye("DELETE",`/api/writing-samples/${m}`),onSuccess:()=>{Hn.invalidateQueries({queryKey:["/api/writing-samples"]})}}),p=lt({mutationFn:()=>Ye("POST","/api/style-profile/analyze",{}),onSuccess:()=>{Hn.invalidateQueries({queryKey:["/api/style-profile"]})}}),g=m=>{m.preventDefault(),n.trim()&&o.trim()&&f.mutate({title:n,content:o})};return i?u.jsx("div",{className:"min-h-screen bg-background",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Writing Style Learning"}),u.jsx(H,{variant:"outline",onClick:()=>e("/dashboard"),"data-testid":"button-back",children:"Back to Dashboard"})]}),u.jsxs(rj,{children:[u.jsx(YC,{className:"h-4 w-4"}),u.jsxs(oj,{children:["Writing style learning is only available for Basic and Pro tier subscribers."," ",u.jsx("button",{className:"underline underline-offset-4 hover:text-primary cursor-pointer",onClick:()=>e("/subscribe"),"data-testid":"button-upgrade",children:"Upgrade now"})]})]})]})}):u.jsx("div",{className:"min-h-screen bg-background",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Writing Style Learning"}),u.jsx("p",{className:"text-muted-foreground",children:"Upload your writing samples to teach the AI your unique voice"})]}),u.jsx(H,{variant:"outline",onClick:()=>e("/dashboard"),"data-testid":"button-back",children:"Back to Dashboard"})]}),u.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsxs(cn,{className:"flex items-center gap-2",children:[u.jsx(Ad,{className:"w-5 h-5"}),"Upload Writing Sample"]}),u.jsx(Pn,{children:"Add examples of your own writing to help the AI learn your style"})]}),u.jsx(Ee,{children:u.jsxs("form",{onSubmit:g,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(tc,{htmlFor:"title","data-testid":"label-sample-title",children:"Title"}),u.jsx(ec,{id:"title",value:n,onChange:m=>r(m.target.value),placeholder:"Sample title","data-testid":"input-sample-title"})]}),u.jsxs("div",{children:[u.jsx(tc,{htmlFor:"content","data-testid":"label-sample-content",children:"Content (minimum 100 words recommended)"}),u.jsx(kx,{id:"content",value:o,onChange:m=>s(m.target.value),placeholder:"Paste your writing sample here...",className:"min-h-[200px]","data-testid":"textarea-sample-content"})]}),u.jsx(H,{type:"submit",disabled:f.isPending||!n.trim()||!o.trim(),className:"w-full","data-testid":"button-upload-sample",children:f.isPending?u.jsxs(u.Fragment,{children:[u.jsx(rl,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ad,{className:"mr-2 h-4 w-4"}),"Upload Sample"]})})]})})]}),u.jsxs(pe,{children:[u.jsx(ln,{children:u.jsxs(cn,{className:"flex items-center gap-2",children:[u.jsx(Ta,{className:"w-5 h-5"}),"Your Writing Samples (",a.length,")"]})}),u.jsx(Ee,{children:l?u.jsx("div",{className:"flex items-center justify-center py-8",children:u.jsx(rl,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.length===0?u.jsx("p",{className:"text-muted-foreground text-center py-8","data-testid":"text-no-samples",children:"No samples uploaded yet. Upload at least one sample to analyze your style."}):u.jsx("div",{className:"space-y-2",children:a.map(m=>u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md","data-testid":`sample-${m.id}`,children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium truncate","data-testid":`sample-title-${m.id}`,children:m.title}),u.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":`sample-words-${m.id}`,children:[m.wordCount," words"]})]}),u.jsx(H,{variant:"ghost",size:"icon",onClick:()=>h.mutate(m.id),disabled:h.isPending,"data-testid":`button-delete-sample-${m.id}`,children:u.jsx(eh,{className:"h-4 w-4"})})]},m.id))})})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsxs(cn,{className:"flex items-center gap-2",children:[u.jsx(Rr,{className:"w-5 h-5"}),"AI Style Analysis"]}),u.jsx(Pn,{children:"Analyze your writing samples to create a personalized style profile"})]}),u.jsxs(Ee,{children:[u.jsx(H,{onClick:()=>p.mutate(),disabled:p.isPending||a.length===0,className:"w-full mb-4","data-testid":"button-analyze-style",children:p.isPending?u.jsxs(u.Fragment,{children:[u.jsx(rl,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Rr,{className:"mr-2 h-4 w-4"}),c?"Re-analyze":"Analyze"," Writing Style"]})}),a.length===0&&u.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Upload at least one writing sample to enable analysis"})]})]}),d?u.jsx(pe,{children:u.jsx(Ee,{className:"py-8",children:u.jsx("div",{className:"flex items-center justify-center",children:u.jsx(rl,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}):c?u.jsxs(pe,{children:[u.jsxs(ln,{children:[u.jsx(cn,{children:"Your Writing Style Profile"}),u.jsx(Pn,{children:"AI will use this profile to match your unique voice"})]}),u.jsxs(Ee,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx(Fe,{variant:"secondary","data-testid":"badge-tone",children:"Tone"})}),u.jsx("p",{className:"text-sm","data-testid":"text-tone",children:c.tone})]}),u.jsx(bn,{}),u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx(Fe,{variant:"secondary","data-testid":"badge-vocabulary",children:"Vocabulary"})}),u.jsx("p",{className:"text-sm","data-testid":"text-vocabulary",children:c.vocabulary})]}),u.jsx(bn,{}),u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx(Fe,{variant:"secondary","data-testid":"badge-sentence",children:"Sentence Structure"})}),u.jsx("p",{className:"text-sm","data-testid":"text-sentence",children:c.sentenceStructure})]}),u.jsx(bn,{}),u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx(Fe,{variant:"secondary","data-testid":"badge-pacing",children:"Pacing"})}),u.jsx("p",{className:"text-sm","data-testid":"text-pacing",children:c.pacing})]})]})]}):u.jsx(pe,{children:u.jsx(Ee,{className:"py-8",children:u.jsx("p",{className:"text-muted-foreground text-center","data-testid":"text-no-profile",children:'No style profile yet. Upload samples and click "Analyze Writing Style" to get started.'})})})]})]})]})})}function pK(){return u.jsx("div",{className:"min-h-screen bg-background",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[u.jsx(jt,{href:"/",children:u.jsxs(H,{variant:"ghost",className:"mb-6","data-testid":"button-back-home",children:[u.jsx(GC,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),u.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Privacy Policy"}),u.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none space-y-6",children:[u.jsxs("p",{className:"text-muted-foreground",children:[u.jsx("strong",{children:"Last Updated:"})," November 2, 2025"]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Information We Collect"}),u.jsx("p",{children:"We collect information you provide directly to us when you create an account, including your email address and any content you create within NovaWriter."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. How We Use Your Information"}),u.jsx("p",{children:"We use the information we collect to:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[u.jsx("li",{children:"Provide, maintain, and improve our services"}),u.jsx("li",{children:"Process your subscription payments"}),u.jsx("li",{children:"Send you technical notices and support messages"}),u.jsx("li",{children:"Respond to your comments and questions"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Data Storage and Security"}),u.jsx("p",{children:"Your documents and writing are stored securely in our database. We implement appropriate security measures to protect your personal information from unauthorized access, alteration, or destruction."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Third-Party Services"}),u.jsx("p",{children:"We use third-party services for payment processing (Stripe) and AI features (OpenAI). These services have their own privacy policies governing their use of your information."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Your Rights"}),u.jsx("p",{children:"You have the right to access, update, or delete your personal information at any time through your account settings. You may also contact us to request deletion of your account."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"6. Changes to This Policy"}),u.jsx("p",{children:"We may update this privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"7. Contact Us"}),u.jsxs("p",{children:["If you have any questions about this Privacy Policy, please contact us at"," ",u.jsx("a",{href:"mailto:novawriter25@gmail.com",className:"text-primary hover:underline",children:"novawriter25@gmail.com"})]})]})]})]})})}function mK(){return u.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:u.jsx(pe,{className:"w-full max-w-md mx-4",children:u.jsxs(Ee,{className:"pt-6",children:[u.jsxs("div",{className:"flex mb-4 gap-2",children:[u.jsx(YC,{className:"h-8 w-8 text-red-500"}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),u.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function gK(){return u.jsxs(sD,{children:[u.jsx(Bt,{path:"/",component:PF}),u.jsx(Bt,{path:"/trial",component:A9}),u.jsx(Bt,{path:"/auth",component:RF}),u.jsx(Bt,{path:"/dashboard",component:D$}),u.jsx(Bt,{path:"/editor/:id",component:J8}),u.jsx(Bt,{path:"/project/:id",component:Z8}),u.jsx(Bt,{path:"/account",component:O9}),u.jsx(Bt,{path:"/subscribe",component:cK}),u.jsx(Bt,{path:"/writing-style",component:hK}),u.jsx(Bt,{path:"/admin",component:uK}),u.jsx(Bt,{path:"/contact",component:j9}),u.jsx(Bt,{path:"/privacy",component:pK}),u.jsx(Bt,{path:"/about",component:R9}),u.jsx(Bt,{component:mK})]})}function yK(){return u.jsx(ED,{client:Hn,children:u.jsx(NF,{children:u.jsx(EF,{children:u.jsxs(kF,{children:[u.jsx(JL,{}),u.jsx(gK,{})]})})})})}qk(document.getElementById("root")).render(u.jsx(yK,{}));
